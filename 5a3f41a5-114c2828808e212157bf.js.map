{"version":3,"file":"5a3f41a5-114c2828808e212157bf.js","mappings":"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","sources":["webpack://Peacasso/./node_modules/@reactflow/core/dist/esm/index.js"],"sourcesContent":["import _slicedToArray from \"/home/victordibia/projects/peacassoweb/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"/home/victordibia/projects/peacassoweb/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _defineProperty from \"/home/victordibia/projects/peacassoweb/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectWithoutProperties from \"/home/victordibia/projects/peacassoweb/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\n\nvar _handleDirections, _oppositePosition, _MarkerSymbols;\n\nvar _excluded = [\"position\", \"children\", \"className\", \"style\"],\n    _excluded2 = [\"x\", \"y\", \"label\", \"labelStyle\", \"labelShowBg\", \"labelBgStyle\", \"labelBgPadding\", \"labelBgBorderRadius\", \"children\", \"className\"],\n    _excluded3 = [\"type\", \"position\", \"isValidConnection\", \"isConnectable\", \"id\", \"onConnect\", \"children\", \"className\", \"onMouseDown\"],\n    _excluded4 = [\"nodes\", \"edges\", \"defaultNodes\", \"defaultEdges\", \"className\", \"nodeTypes\", \"edgeTypes\", \"onNodeClick\", \"onEdgeClick\", \"onInit\", \"onMove\", \"onMoveStart\", \"onMoveEnd\", \"onConnect\", \"onConnectStart\", \"onConnectEnd\", \"onClickConnectStart\", \"onClickConnectEnd\", \"onNodeMouseEnter\", \"onNodeMouseMove\", \"onNodeMouseLeave\", \"onNodeContextMenu\", \"onNodeDoubleClick\", \"onNodeDragStart\", \"onNodeDrag\", \"onNodeDragStop\", \"onNodesDelete\", \"onEdgesDelete\", \"onSelectionChange\", \"onSelectionDragStart\", \"onSelectionDrag\", \"onSelectionDragStop\", \"onSelectionContextMenu\", \"connectionMode\", \"connectionLineType\", \"connectionLineStyle\", \"connectionLineComponent\", \"connectionLineContainerStyle\", \"deleteKeyCode\", \"selectionKeyCode\", \"multiSelectionKeyCode\", \"zoomActivationKeyCode\", \"snapToGrid\", \"snapGrid\", \"onlyRenderVisibleElements\", \"selectNodesOnDrag\", \"nodesDraggable\", \"nodesConnectable\", \"nodesFocusable\", \"nodeOrigin\", \"edgesFocusable\", \"elementsSelectable\", \"defaultViewport\", \"minZoom\", \"maxZoom\", \"translateExtent\", \"preventScrolling\", \"nodeExtent\", \"defaultMarkerColor\", \"zoomOnScroll\", \"zoomOnPinch\", \"panOnScroll\", \"panOnScrollSpeed\", \"panOnScrollMode\", \"zoomOnDoubleClick\", \"panOnDrag\", \"onPaneClick\", \"onPaneMouseEnter\", \"onPaneMouseMove\", \"onPaneMouseLeave\", \"onPaneScroll\", \"onPaneContextMenu\", \"children\", \"onEdgeUpdate\", \"onEdgeContextMenu\", \"onEdgeDoubleClick\", \"onEdgeMouseEnter\", \"onEdgeMouseMove\", \"onEdgeMouseLeave\", \"onEdgeUpdateStart\", \"onEdgeUpdateEnd\", \"edgeUpdaterRadius\", \"onNodesChange\", \"onEdgesChange\", \"noDragClassName\", \"noWheelClassName\", \"noPanClassName\", \"fitView\", \"fitViewOptions\", \"connectOnClick\", \"attributionPosition\", \"proOptions\", \"defaultEdgeOptions\", \"elevateEdgesOnSelect\", \"disableKeyboardA11y\", \"style\", \"id\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { jsx, jsxs, Fragment } from 'react/jsx-runtime';\nimport { createContext, useContext, useMemo, memo, useRef, useState, useEffect, forwardRef, useCallback } from 'react';\nimport cc from 'classcat';\nimport { useStore as useStore$1, createStore } from 'zustand';\nimport shallow from 'zustand/shallow';\nimport { drag } from 'd3-drag';\nimport { select, pointer } from 'd3-selection';\nimport { zoomIdentity, zoom } from 'd3-zoom';\nimport { createPortal } from 'react-dom';\nvar StoreContext = createContext(null);\nvar Provider$1 = StoreContext.Provider;\nvar errorMessage = '[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#100';\n\nfunction useStore(selector, equalityFn) {\n  var store = useContext(StoreContext);\n\n  if (store === null) {\n    throw new Error(errorMessage);\n  }\n\n  return useStore$1(store, selector, equalityFn);\n}\n\nvar useStoreApi = function useStoreApi() {\n  var store = useContext(StoreContext);\n\n  if (store === null) {\n    throw new Error(errorMessage);\n  }\n\n  return useMemo(function () {\n    return {\n      getState: store.getState,\n      setState: store.setState,\n      subscribe: store.subscribe,\n      destroy: store.destroy\n    };\n  }, [store]);\n};\n\nvar selector$e = function selector$e(s) {\n  return s.userSelectionActive ? 'none' : 'all';\n};\n\nfunction Panel(_ref) {\n  var position = _ref.position,\n      children = _ref.children,\n      className = _ref.className,\n      style = _ref.style,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  var pointerEvents = useStore(selector$e);\n  var positionClasses = \"\".concat(position).split('-');\n  return jsx(\"div\", _objectSpread(_objectSpread({\n    className: cc(['react-flow__panel', className].concat(_toConsumableArray(positionClasses))),\n    style: _objectSpread(_objectSpread({}, style), {}, {\n      pointerEvents: pointerEvents\n    })\n  }, rest), {}, {\n    children: children\n  }));\n}\n\nfunction Attribution(_ref2) {\n  var proOptions = _ref2.proOptions,\n      _ref2$position = _ref2.position,\n      position = _ref2$position === void 0 ? 'bottom-right' : _ref2$position;\n\n  if (proOptions !== null && proOptions !== void 0 && proOptions.hideAttribution) {\n    return null;\n  }\n\n  return jsx(Panel, {\n    position: position,\n    className: \"react-flow__attribution\",\n    \"data-message\": \"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev\",\n    children: jsx(\"a\", {\n      href: \"https://reactflow.dev\",\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      \"aria-label\": \"React Flow attribution\",\n      children: \"React Flow\"\n    })\n  });\n}\n\nvar EdgeText = function EdgeText(_ref3) {\n  var x = _ref3.x,\n      y = _ref3.y,\n      label = _ref3.label,\n      _ref3$labelStyle = _ref3.labelStyle,\n      labelStyle = _ref3$labelStyle === void 0 ? {} : _ref3$labelStyle,\n      _ref3$labelShowBg = _ref3.labelShowBg,\n      labelShowBg = _ref3$labelShowBg === void 0 ? true : _ref3$labelShowBg,\n      _ref3$labelBgStyle = _ref3.labelBgStyle,\n      labelBgStyle = _ref3$labelBgStyle === void 0 ? {} : _ref3$labelBgStyle,\n      _ref3$labelBgPadding = _ref3.labelBgPadding,\n      labelBgPadding = _ref3$labelBgPadding === void 0 ? [2, 4] : _ref3$labelBgPadding,\n      _ref3$labelBgBorderRa = _ref3.labelBgBorderRadius,\n      labelBgBorderRadius = _ref3$labelBgBorderRa === void 0 ? 2 : _ref3$labelBgBorderRa,\n      children = _ref3.children,\n      className = _ref3.className,\n      rest = _objectWithoutProperties(_ref3, _excluded2);\n\n  var edgeRef = useRef(null);\n\n  var _useState = useState({\n    x: 0,\n    y: 0,\n    width: 0,\n    height: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      edgeTextBbox = _useState2[0],\n      setEdgeTextBbox = _useState2[1];\n\n  var edgeTextClasses = cc(['react-flow__edge-textwrapper', className]);\n  useEffect(function () {\n    if (edgeRef.current) {\n      var textBbox = edgeRef.current.getBBox();\n      setEdgeTextBbox({\n        x: textBbox.x,\n        y: textBbox.y,\n        width: textBbox.width,\n        height: textBbox.height\n      });\n    }\n  }, [label]);\n\n  if (typeof label === 'undefined' || !label) {\n    return null;\n  }\n\n  return jsxs(\"g\", _objectSpread(_objectSpread({\n    transform: \"translate(\".concat(x - edgeTextBbox.width / 2, \" \").concat(y - edgeTextBbox.height / 2, \")\"),\n    className: edgeTextClasses,\n    visibility: edgeTextBbox.width ? 'visible' : 'hidden'\n  }, rest), {}, {\n    children: [labelShowBg && jsx(\"rect\", {\n      width: edgeTextBbox.width + 2 * labelBgPadding[0],\n      x: -labelBgPadding[0],\n      y: -labelBgPadding[1],\n      height: edgeTextBbox.height + 2 * labelBgPadding[1],\n      className: \"react-flow__edge-textbg\",\n      style: labelBgStyle,\n      rx: labelBgBorderRadius,\n      ry: labelBgBorderRadius\n    }), jsx(\"text\", {\n      className: \"react-flow__edge-text\",\n      y: edgeTextBbox.height / 2,\n      dy: \"0.3em\",\n      ref: edgeRef,\n      style: labelStyle,\n      children: label\n    }), children]\n  }));\n};\n\nvar EdgeText$1 = memo(EdgeText);\n\nvar BaseEdge = function BaseEdge(_ref4) {\n  var path = _ref4.path,\n      labelX = _ref4.labelX,\n      labelY = _ref4.labelY,\n      label = _ref4.label,\n      labelStyle = _ref4.labelStyle,\n      labelShowBg = _ref4.labelShowBg,\n      labelBgStyle = _ref4.labelBgStyle,\n      labelBgPadding = _ref4.labelBgPadding,\n      labelBgBorderRadius = _ref4.labelBgBorderRadius,\n      style = _ref4.style,\n      markerEnd = _ref4.markerEnd,\n      markerStart = _ref4.markerStart,\n      _ref4$interactionWidt = _ref4.interactionWidth,\n      interactionWidth = _ref4$interactionWidt === void 0 ? 20 : _ref4$interactionWidt;\n  return jsxs(Fragment, {\n    children: [jsx(\"path\", {\n      style: style,\n      d: path,\n      fill: \"none\",\n      className: \"react-flow__edge-path\",\n      markerEnd: markerEnd,\n      markerStart: markerStart\n    }), interactionWidth && jsx(\"path\", {\n      d: path,\n      fill: \"none\",\n      strokeOpacity: 0,\n      strokeWidth: interactionWidth,\n      className: \"react-flow__edge-interaction\"\n    }), label ? jsx(EdgeText$1, {\n      x: labelX,\n      y: labelY,\n      label: label,\n      labelStyle: labelStyle,\n      labelShowBg: labelShowBg,\n      labelBgStyle: labelBgStyle,\n      labelBgPadding: labelBgPadding,\n      labelBgBorderRadius: labelBgBorderRadius\n    }) : null]\n  });\n};\n\nBaseEdge.displayName = 'BaseEdge';\n\nvar getMarkerEnd = function getMarkerEnd(markerType, markerEndId) {\n  if (typeof markerEndId !== 'undefined' && markerEndId) {\n    return \"url(#\".concat(markerEndId, \")\");\n  }\n\n  return typeof markerType !== 'undefined' ? \"url(#react-flow__\".concat(markerType, \")\") : 'none';\n};\n\nfunction getMouseHandler$1(id, getState, handler) {\n  return handler === undefined ? handler : function (event) {\n    var edge = getState().edges.find(function (e) {\n      return e.id === id;\n    });\n\n    if (edge) {\n      handler(event, _objectSpread({}, edge));\n    }\n  };\n} // this is used for straight edges and simple smoothstep edges (LTR, RTL, BTT, TTB)\n\n\nfunction getEdgeCenter(_ref5) {\n  var sourceX = _ref5.sourceX,\n      sourceY = _ref5.sourceY,\n      targetX = _ref5.targetX,\n      targetY = _ref5.targetY;\n  var xOffset = Math.abs(targetX - sourceX) / 2;\n  var centerX = targetX < sourceX ? targetX + xOffset : targetX - xOffset;\n  var yOffset = Math.abs(targetY - sourceY) / 2;\n  var centerY = targetY < sourceY ? targetY + yOffset : targetY - yOffset;\n  return [centerX, centerY, xOffset, yOffset];\n}\n\nfunction getBezierEdgeCenter(_ref6) {\n  var sourceX = _ref6.sourceX,\n      sourceY = _ref6.sourceY,\n      targetX = _ref6.targetX,\n      targetY = _ref6.targetY,\n      sourceControlX = _ref6.sourceControlX,\n      sourceControlY = _ref6.sourceControlY,\n      targetControlX = _ref6.targetControlX,\n      targetControlY = _ref6.targetControlY;\n  // cubic bezier t=0.5 mid point, not the actual mid point, but easy to calculate\n  // https://stackoverflow.com/questions/67516101/how-to-find-distance-mid-point-of-bezier-curve\n  var centerX = sourceX * 0.125 + sourceControlX * 0.375 + targetControlX * 0.375 + targetX * 0.125;\n  var centerY = sourceY * 0.125 + sourceControlY * 0.375 + targetControlY * 0.375 + targetY * 0.125;\n  var offsetX = Math.abs(centerX - sourceX);\n  var offsetY = Math.abs(centerY - sourceY);\n  return [centerX, centerY, offsetX, offsetY];\n}\n\nvar ConnectionMode;\n\n(function (ConnectionMode) {\n  ConnectionMode[\"Strict\"] = \"strict\";\n  ConnectionMode[\"Loose\"] = \"loose\";\n})(ConnectionMode || (ConnectionMode = {}));\n\nvar PanOnScrollMode;\n\n(function (PanOnScrollMode) {\n  PanOnScrollMode[\"Free\"] = \"free\";\n  PanOnScrollMode[\"Vertical\"] = \"vertical\";\n  PanOnScrollMode[\"Horizontal\"] = \"horizontal\";\n})(PanOnScrollMode || (PanOnScrollMode = {}));\n\nvar getDimensions = function getDimensions(node) {\n  return {\n    width: node.offsetWidth,\n    height: node.offsetHeight\n  };\n};\n\nvar clamp = function clamp(val) {\n  var min = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var max = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  return Math.min(Math.max(val, min), max);\n};\n\nvar clampPosition = function clampPosition() {\n  var position = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n    x: 0,\n    y: 0\n  };\n  var extent = arguments.length > 1 ? arguments[1] : undefined;\n  return {\n    x: clamp(position.x, extent[0][0], extent[1][0]),\n    y: clamp(position.y, extent[0][1], extent[1][1])\n  };\n};\n\nvar getHostForElement = function getHostForElement(element) {\n  var _element$getRootNode, _window;\n\n  return ((_element$getRootNode = element.getRootNode) === null || _element$getRootNode === void 0 ? void 0 : _element$getRootNode.call(element)) || ((_window = window) === null || _window === void 0 ? void 0 : _window.document);\n};\n\nvar getBoundsOfBoxes = function getBoundsOfBoxes(box1, box2) {\n  return {\n    x: Math.min(box1.x, box2.x),\n    y: Math.min(box1.y, box2.y),\n    x2: Math.max(box1.x2, box2.x2),\n    y2: Math.max(box1.y2, box2.y2)\n  };\n};\n\nvar rectToBox = function rectToBox(_ref7) {\n  var x = _ref7.x,\n      y = _ref7.y,\n      width = _ref7.width,\n      height = _ref7.height;\n  return {\n    x: x,\n    y: y,\n    x2: x + width,\n    y2: y + height\n  };\n};\n\nvar boxToRect = function boxToRect(_ref8) {\n  var x = _ref8.x,\n      y = _ref8.y,\n      x2 = _ref8.x2,\n      y2 = _ref8.y2;\n  return {\n    x: x,\n    y: y,\n    width: x2 - x,\n    height: y2 - y\n  };\n};\n\nvar nodeToRect = function nodeToRect(node) {\n  return _objectSpread(_objectSpread({}, node.positionAbsolute || {\n    x: 0,\n    y: 0\n  }), {}, {\n    width: node.width || 0,\n    height: node.height || 0\n  });\n};\n\nvar getBoundsOfRects = function getBoundsOfRects(rect1, rect2) {\n  return boxToRect(getBoundsOfBoxes(rectToBox(rect1), rectToBox(rect2)));\n};\n\nvar getOverlappingArea = function getOverlappingArea(rectA, rectB) {\n  var xOverlap = Math.max(0, Math.min(rectA.x + rectA.width, rectB.x + rectB.width) - Math.max(rectA.x, rectB.x));\n  var yOverlap = Math.max(0, Math.min(rectA.y + rectA.height, rectB.y + rectB.height) - Math.max(rectA.y, rectB.y));\n  return Math.ceil(xOverlap * yOverlap);\n}; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nvar isRectObject = function isRectObject(obj) {\n  return !!obj.width && !!obj.height && !!obj.x && !!obj.y;\n};\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n\n\nvar isNumeric = function isNumeric(n) {\n  return !isNaN(n) && isFinite(n);\n};\n\nvar internalsSymbol = Symbol.for('internals'); // used for a11y key board controls for nodes and edges\n\nvar elementSelectionKeys = ['Enter', ' ', 'Escape'];\n\nvar devWarn = function devWarn(message) {\n  if (process.env.NODE_ENV === 'development') {\n    console.warn(\"[React Flow]: \".concat(message));\n  }\n};\n\nvar ConnectionLineType;\n\n(function (ConnectionLineType) {\n  ConnectionLineType[\"Bezier\"] = \"default\";\n  ConnectionLineType[\"Straight\"] = \"straight\";\n  ConnectionLineType[\"Step\"] = \"step\";\n  ConnectionLineType[\"SmoothStep\"] = \"smoothstep\";\n  ConnectionLineType[\"SimpleBezier\"] = \"simplebezier\";\n})(ConnectionLineType || (ConnectionLineType = {}));\n\nvar MarkerType;\n\n(function (MarkerType) {\n  MarkerType[\"Arrow\"] = \"arrow\";\n  MarkerType[\"ArrowClosed\"] = \"arrowclosed\";\n})(MarkerType || (MarkerType = {}));\n\nvar Position;\n\n(function (Position) {\n  Position[\"Left\"] = \"left\";\n  Position[\"Top\"] = \"top\";\n  Position[\"Right\"] = \"right\";\n  Position[\"Bottom\"] = \"bottom\";\n})(Position || (Position = {}));\n\nfunction getControl(_ref9) {\n  var pos = _ref9.pos,\n      x1 = _ref9.x1,\n      y1 = _ref9.y1,\n      x2 = _ref9.x2,\n      y2 = _ref9.y2;\n\n  if (pos === Position.Left || pos === Position.Right) {\n    return [0.5 * (x1 + x2), y1];\n  }\n\n  return [x1, 0.5 * (y1 + y2)];\n}\n\nfunction getSimpleBezierPath(_ref10) {\n  var sourceX = _ref10.sourceX,\n      sourceY = _ref10.sourceY,\n      _ref10$sourcePosition = _ref10.sourcePosition,\n      sourcePosition = _ref10$sourcePosition === void 0 ? Position.Bottom : _ref10$sourcePosition,\n      targetX = _ref10.targetX,\n      targetY = _ref10.targetY,\n      _ref10$targetPosition = _ref10.targetPosition,\n      targetPosition = _ref10$targetPosition === void 0 ? Position.Top : _ref10$targetPosition;\n\n  var _getControl = getControl({\n    pos: sourcePosition,\n    x1: sourceX,\n    y1: sourceY,\n    x2: targetX,\n    y2: targetY\n  }),\n      _getControl2 = _slicedToArray(_getControl, 2),\n      sourceControlX = _getControl2[0],\n      sourceControlY = _getControl2[1];\n\n  var _getControl3 = getControl({\n    pos: targetPosition,\n    x1: targetX,\n    y1: targetY,\n    x2: sourceX,\n    y2: sourceY\n  }),\n      _getControl4 = _slicedToArray(_getControl3, 2),\n      targetControlX = _getControl4[0],\n      targetControlY = _getControl4[1];\n\n  var _getBezierEdgeCenter = getBezierEdgeCenter({\n    sourceX: sourceX,\n    sourceY: sourceY,\n    targetX: targetX,\n    targetY: targetY,\n    sourceControlX: sourceControlX,\n    sourceControlY: sourceControlY,\n    targetControlX: targetControlX,\n    targetControlY: targetControlY\n  }),\n      _getBezierEdgeCenter2 = _slicedToArray(_getBezierEdgeCenter, 4),\n      labelX = _getBezierEdgeCenter2[0],\n      labelY = _getBezierEdgeCenter2[1],\n      offsetX = _getBezierEdgeCenter2[2],\n      offsetY = _getBezierEdgeCenter2[3];\n\n  return [\"M\".concat(sourceX, \",\").concat(sourceY, \" C\").concat(sourceControlX, \",\").concat(sourceControlY, \" \").concat(targetControlX, \",\").concat(targetControlY, \" \").concat(targetX, \",\").concat(targetY), labelX, labelY, offsetX, offsetY];\n}\n\nvar SimpleBezierEdge = memo(function (_ref11) {\n  var sourceX = _ref11.sourceX,\n      sourceY = _ref11.sourceY,\n      targetX = _ref11.targetX,\n      targetY = _ref11.targetY,\n      _ref11$sourcePosition = _ref11.sourcePosition,\n      sourcePosition = _ref11$sourcePosition === void 0 ? Position.Bottom : _ref11$sourcePosition,\n      _ref11$targetPosition = _ref11.targetPosition,\n      targetPosition = _ref11$targetPosition === void 0 ? Position.Top : _ref11$targetPosition,\n      label = _ref11.label,\n      labelStyle = _ref11.labelStyle,\n      labelShowBg = _ref11.labelShowBg,\n      labelBgStyle = _ref11.labelBgStyle,\n      labelBgPadding = _ref11.labelBgPadding,\n      labelBgBorderRadius = _ref11.labelBgBorderRadius,\n      style = _ref11.style,\n      markerEnd = _ref11.markerEnd,\n      markerStart = _ref11.markerStart,\n      interactionWidth = _ref11.interactionWidth;\n\n  var _getSimpleBezierPath = getSimpleBezierPath({\n    sourceX: sourceX,\n    sourceY: sourceY,\n    sourcePosition: sourcePosition,\n    targetX: targetX,\n    targetY: targetY,\n    targetPosition: targetPosition\n  }),\n      _getSimpleBezierPath2 = _slicedToArray(_getSimpleBezierPath, 3),\n      path = _getSimpleBezierPath2[0],\n      labelX = _getSimpleBezierPath2[1],\n      labelY = _getSimpleBezierPath2[2];\n\n  return jsx(BaseEdge, {\n    path: path,\n    labelX: labelX,\n    labelY: labelY,\n    label: label,\n    labelStyle: labelStyle,\n    labelShowBg: labelShowBg,\n    labelBgStyle: labelBgStyle,\n    labelBgPadding: labelBgPadding,\n    labelBgBorderRadius: labelBgBorderRadius,\n    style: style,\n    markerEnd: markerEnd,\n    markerStart: markerStart,\n    interactionWidth: interactionWidth\n  });\n});\nSimpleBezierEdge.displayName = 'SimpleBezierEdge';\nvar handleDirections = (_handleDirections = {}, _defineProperty(_handleDirections, Position.Left, {\n  x: -1,\n  y: 0\n}), _defineProperty(_handleDirections, Position.Right, {\n  x: 1,\n  y: 0\n}), _defineProperty(_handleDirections, Position.Top, {\n  x: 0,\n  y: -1\n}), _defineProperty(_handleDirections, Position.Bottom, {\n  x: 0,\n  y: 1\n}), _handleDirections);\n\nvar getDirection = function getDirection(_ref12) {\n  var source = _ref12.source,\n      _ref12$sourcePosition = _ref12.sourcePosition,\n      sourcePosition = _ref12$sourcePosition === void 0 ? Position.Bottom : _ref12$sourcePosition,\n      target = _ref12.target;\n\n  if (sourcePosition === Position.Left || sourcePosition === Position.Right) {\n    return source.x < target.x ? {\n      x: 1,\n      y: 0\n    } : {\n      x: -1,\n      y: 0\n    };\n  }\n\n  return source.y < target.y ? {\n    x: 0,\n    y: 1\n  } : {\n    x: 0,\n    y: -1\n  };\n};\n\nvar distance = function distance(a, b) {\n  return Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\n}; // ith this function we try to mimic a orthogonal edge routing behaviour\n// It's not as good as a real orthogonal edge routing but it's faster and good enough as a default for step and smooth step edges\n\n\nfunction getPoints(_ref13) {\n  var source = _ref13.source,\n      _ref13$sourcePosition = _ref13.sourcePosition,\n      sourcePosition = _ref13$sourcePosition === void 0 ? Position.Bottom : _ref13$sourcePosition,\n      target = _ref13.target,\n      _ref13$targetPosition = _ref13.targetPosition,\n      targetPosition = _ref13$targetPosition === void 0 ? Position.Top : _ref13$targetPosition,\n      center = _ref13.center,\n      offset = _ref13.offset;\n  var sourceDir = handleDirections[sourcePosition];\n  var targetDir = handleDirections[targetPosition];\n  var sourceGapped = {\n    x: source.x + sourceDir.x * offset,\n    y: source.y + sourceDir.y * offset\n  };\n  var targetGapped = {\n    x: target.x + targetDir.x * offset,\n    y: target.y + targetDir.y * offset\n  };\n  var dir = getDirection({\n    source: sourceGapped,\n    sourcePosition: sourcePosition,\n    target: targetGapped\n  });\n  var dirAccessor = dir.x !== 0 ? 'x' : 'y';\n  var currDir = dir[dirAccessor];\n  var points = [];\n  var centerX, centerY;\n\n  var _getEdgeCenter = getEdgeCenter({\n    sourceX: source.x,\n    sourceY: source.y,\n    targetX: target.x,\n    targetY: target.y\n  }),\n      _getEdgeCenter2 = _slicedToArray(_getEdgeCenter, 4),\n      defaultCenterX = _getEdgeCenter2[0],\n      defaultCenterY = _getEdgeCenter2[1],\n      defaultOffsetX = _getEdgeCenter2[2],\n      defaultOffsetY = _getEdgeCenter2[3]; // opposite handle positions, default case\n\n\n  if (sourceDir[dirAccessor] * targetDir[dirAccessor] === -1) {\n    centerX = center.x || defaultCenterX;\n    centerY = center.y || defaultCenterY; //    --->\n    //    |\n    // >---\n\n    var verticalSplit = [{\n      x: centerX,\n      y: sourceGapped.y\n    }, {\n      x: centerX,\n      y: targetGapped.y\n    }]; //    |\n    //  ---\n    //  |\n\n    var horizontalSplit = [{\n      x: sourceGapped.x,\n      y: centerY\n    }, {\n      x: targetGapped.x,\n      y: centerY\n    }];\n\n    if (sourceDir[dirAccessor] === currDir) {\n      points = dirAccessor === 'x' ? verticalSplit : horizontalSplit;\n    } else {\n      points = dirAccessor === 'x' ? horizontalSplit : verticalSplit;\n    }\n  } else {\n    // sourceTarget means we take x from source and y from target, targetSource is the opposite\n    var sourceTarget = [{\n      x: sourceGapped.x,\n      y: targetGapped.y\n    }];\n    var targetSource = [{\n      x: targetGapped.x,\n      y: sourceGapped.y\n    }]; // this handles edges with same handle positions\n\n    if (dirAccessor === 'x') {\n      points = sourceDir.x === currDir ? targetSource : sourceTarget;\n    } else {\n      points = sourceDir.y === currDir ? sourceTarget : targetSource;\n    } // these are conditions for handling mixed handle positions like Right -> Bottom for example\n\n\n    if (sourcePosition !== targetPosition) {\n      var dirAccessorOpposite = dirAccessor === 'x' ? 'y' : 'x';\n      var isSameDir = sourceDir[dirAccessor] === targetDir[dirAccessorOpposite];\n      var sourceGtTargetOppo = sourceGapped[dirAccessorOpposite] > targetGapped[dirAccessorOpposite];\n      var sourceLtTargetOppo = sourceGapped[dirAccessorOpposite] < targetGapped[dirAccessorOpposite];\n      var flipSourceTarget = sourceDir[dirAccessor] === 1 && (!isSameDir && sourceGtTargetOppo || isSameDir && sourceLtTargetOppo) || sourceDir[dirAccessor] !== 1 && (!isSameDir && sourceLtTargetOppo || isSameDir && sourceGtTargetOppo);\n\n      if (flipSourceTarget) {\n        points = dirAccessor === 'x' ? sourceTarget : targetSource;\n      }\n    }\n\n    centerX = points[0].x;\n    centerY = points[0].y;\n  }\n\n  var pathPoints = [source, sourceGapped].concat(_toConsumableArray(points), [targetGapped, target]);\n  return [pathPoints, centerX, centerY, defaultOffsetX, defaultOffsetY];\n}\n\nfunction getBend(a, b, c, size) {\n  var bendSize = Math.min(distance(a, b) / 2, distance(b, c) / 2, size);\n  var x = b.x,\n      y = b.y; // no bend\n\n  if (a.x === x && x === c.x || a.y === y && y === c.y) {\n    return \"L\".concat(x, \" \").concat(y);\n  } // first segment is horizontal\n\n\n  if (a.y === y) {\n    var _xDir = a.x < c.x ? -1 : 1;\n\n    var _yDir = a.y < c.y ? 1 : -1;\n\n    return \"L \".concat(x + bendSize * _xDir, \",\").concat(y, \"Q \").concat(x, \",\").concat(y, \" \").concat(x, \",\").concat(y + bendSize * _yDir);\n  }\n\n  var xDir = a.x < c.x ? 1 : -1;\n  var yDir = a.y < c.y ? -1 : 1;\n  return \"L \".concat(x, \",\").concat(y + bendSize * yDir, \"Q \").concat(x, \",\").concat(y, \" \").concat(x + bendSize * xDir, \",\").concat(y);\n}\n\nfunction getSmoothStepPath(_ref14) {\n  var sourceX = _ref14.sourceX,\n      sourceY = _ref14.sourceY,\n      _ref14$sourcePosition = _ref14.sourcePosition,\n      sourcePosition = _ref14$sourcePosition === void 0 ? Position.Bottom : _ref14$sourcePosition,\n      targetX = _ref14.targetX,\n      targetY = _ref14.targetY,\n      _ref14$targetPosition = _ref14.targetPosition,\n      targetPosition = _ref14$targetPosition === void 0 ? Position.Top : _ref14$targetPosition,\n      _ref14$borderRadius = _ref14.borderRadius,\n      borderRadius = _ref14$borderRadius === void 0 ? 5 : _ref14$borderRadius,\n      centerX = _ref14.centerX,\n      centerY = _ref14.centerY,\n      _ref14$offset = _ref14.offset,\n      offset = _ref14$offset === void 0 ? 20 : _ref14$offset;\n\n  var _getPoints = getPoints({\n    source: {\n      x: sourceX,\n      y: sourceY\n    },\n    sourcePosition: sourcePosition,\n    target: {\n      x: targetX,\n      y: targetY\n    },\n    targetPosition: targetPosition,\n    center: {\n      x: centerX,\n      y: centerY\n    },\n    offset: offset\n  }),\n      _getPoints2 = _slicedToArray(_getPoints, 5),\n      points = _getPoints2[0],\n      labelX = _getPoints2[1],\n      labelY = _getPoints2[2],\n      offsetX = _getPoints2[3],\n      offsetY = _getPoints2[4];\n\n  var path = points.reduce(function (res, p, i) {\n    var segment = '';\n\n    if (i > 0 && i < points.length - 1) {\n      segment = getBend(points[i - 1], p, points[i + 1], borderRadius);\n    } else {\n      segment = \"\".concat(i === 0 ? 'M' : 'L').concat(p.x, \" \").concat(p.y);\n    }\n\n    res += segment;\n    return res;\n  }, '');\n  return [path, labelX, labelY, offsetX, offsetY];\n}\n\nvar SmoothStepEdge = memo(function (_ref15) {\n  var sourceX = _ref15.sourceX,\n      sourceY = _ref15.sourceY,\n      targetX = _ref15.targetX,\n      targetY = _ref15.targetY,\n      label = _ref15.label,\n      labelStyle = _ref15.labelStyle,\n      labelShowBg = _ref15.labelShowBg,\n      labelBgStyle = _ref15.labelBgStyle,\n      labelBgPadding = _ref15.labelBgPadding,\n      labelBgBorderRadius = _ref15.labelBgBorderRadius,\n      style = _ref15.style,\n      _ref15$sourcePosition = _ref15.sourcePosition,\n      sourcePosition = _ref15$sourcePosition === void 0 ? Position.Bottom : _ref15$sourcePosition,\n      _ref15$targetPosition = _ref15.targetPosition,\n      targetPosition = _ref15$targetPosition === void 0 ? Position.Top : _ref15$targetPosition,\n      markerEnd = _ref15.markerEnd,\n      markerStart = _ref15.markerStart,\n      pathOptions = _ref15.pathOptions,\n      interactionWidth = _ref15.interactionWidth;\n\n  var _getSmoothStepPath = getSmoothStepPath({\n    sourceX: sourceX,\n    sourceY: sourceY,\n    sourcePosition: sourcePosition,\n    targetX: targetX,\n    targetY: targetY,\n    targetPosition: targetPosition,\n    borderRadius: pathOptions === null || pathOptions === void 0 ? void 0 : pathOptions.borderRadius,\n    offset: pathOptions === null || pathOptions === void 0 ? void 0 : pathOptions.offset\n  }),\n      _getSmoothStepPath2 = _slicedToArray(_getSmoothStepPath, 3),\n      path = _getSmoothStepPath2[0],\n      labelX = _getSmoothStepPath2[1],\n      labelY = _getSmoothStepPath2[2];\n\n  return jsx(BaseEdge, {\n    path: path,\n    labelX: labelX,\n    labelY: labelY,\n    label: label,\n    labelStyle: labelStyle,\n    labelShowBg: labelShowBg,\n    labelBgStyle: labelBgStyle,\n    labelBgPadding: labelBgPadding,\n    labelBgBorderRadius: labelBgBorderRadius,\n    style: style,\n    markerEnd: markerEnd,\n    markerStart: markerStart,\n    interactionWidth: interactionWidth\n  });\n});\nSmoothStepEdge.displayName = 'SmoothStepEdge';\nvar StepEdge = memo(function (props) {\n  var _props$pathOptions2;\n\n  return jsx(SmoothStepEdge, _objectSpread(_objectSpread({}, props), {}, {\n    pathOptions: useMemo(function () {\n      var _props$pathOptions;\n\n      return {\n        borderRadius: 0,\n        offset: (_props$pathOptions = props.pathOptions) === null || _props$pathOptions === void 0 ? void 0 : _props$pathOptions.offset\n      };\n    }, [(_props$pathOptions2 = props.pathOptions) === null || _props$pathOptions2 === void 0 ? void 0 : _props$pathOptions2.offset])\n  }));\n});\nStepEdge.displayName = 'StepEdge';\n\nfunction getStraightPath(_ref16) {\n  var sourceX = _ref16.sourceX,\n      sourceY = _ref16.sourceY,\n      targetX = _ref16.targetX,\n      targetY = _ref16.targetY;\n\n  var _getEdgeCenter3 = getEdgeCenter({\n    sourceX: sourceX,\n    sourceY: sourceY,\n    targetX: targetX,\n    targetY: targetY\n  }),\n      _getEdgeCenter4 = _slicedToArray(_getEdgeCenter3, 4),\n      labelX = _getEdgeCenter4[0],\n      labelY = _getEdgeCenter4[1],\n      offsetX = _getEdgeCenter4[2],\n      offsetY = _getEdgeCenter4[3];\n\n  return [\"M \".concat(sourceX, \",\").concat(sourceY, \"L \").concat(targetX, \",\").concat(targetY), labelX, labelY, offsetX, offsetY];\n}\n\nvar StraightEdge = memo(function (_ref17) {\n  var sourceX = _ref17.sourceX,\n      sourceY = _ref17.sourceY,\n      targetX = _ref17.targetX,\n      targetY = _ref17.targetY,\n      label = _ref17.label,\n      labelStyle = _ref17.labelStyle,\n      labelShowBg = _ref17.labelShowBg,\n      labelBgStyle = _ref17.labelBgStyle,\n      labelBgPadding = _ref17.labelBgPadding,\n      labelBgBorderRadius = _ref17.labelBgBorderRadius,\n      style = _ref17.style,\n      markerEnd = _ref17.markerEnd,\n      markerStart = _ref17.markerStart,\n      interactionWidth = _ref17.interactionWidth;\n\n  var _getStraightPath = getStraightPath({\n    sourceX: sourceX,\n    sourceY: sourceY,\n    targetX: targetX,\n    targetY: targetY\n  }),\n      _getStraightPath2 = _slicedToArray(_getStraightPath, 3),\n      path = _getStraightPath2[0],\n      labelX = _getStraightPath2[1],\n      labelY = _getStraightPath2[2];\n\n  return jsx(BaseEdge, {\n    path: path,\n    labelX: labelX,\n    labelY: labelY,\n    label: label,\n    labelStyle: labelStyle,\n    labelShowBg: labelShowBg,\n    labelBgStyle: labelBgStyle,\n    labelBgPadding: labelBgPadding,\n    labelBgBorderRadius: labelBgBorderRadius,\n    style: style,\n    markerEnd: markerEnd,\n    markerStart: markerStart,\n    interactionWidth: interactionWidth\n  });\n});\nStraightEdge.displayName = 'StraightEdge';\n\nfunction calculateControlOffset(distance, curvature) {\n  if (distance >= 0) {\n    return 0.5 * distance;\n  }\n\n  return curvature * 25 * Math.sqrt(-distance);\n}\n\nfunction getControlWithCurvature(_ref18) {\n  var pos = _ref18.pos,\n      x1 = _ref18.x1,\n      y1 = _ref18.y1,\n      x2 = _ref18.x2,\n      y2 = _ref18.y2,\n      c = _ref18.c;\n\n  switch (pos) {\n    case Position.Left:\n      return [x1 - calculateControlOffset(x1 - x2, c), y1];\n\n    case Position.Right:\n      return [x1 + calculateControlOffset(x2 - x1, c), y1];\n\n    case Position.Top:\n      return [x1, y1 - calculateControlOffset(y1 - y2, c)];\n\n    case Position.Bottom:\n      return [x1, y1 + calculateControlOffset(y2 - y1, c)];\n  }\n}\n\nfunction getBezierPath(_ref19) {\n  var sourceX = _ref19.sourceX,\n      sourceY = _ref19.sourceY,\n      _ref19$sourcePosition = _ref19.sourcePosition,\n      sourcePosition = _ref19$sourcePosition === void 0 ? Position.Bottom : _ref19$sourcePosition,\n      targetX = _ref19.targetX,\n      targetY = _ref19.targetY,\n      _ref19$targetPosition = _ref19.targetPosition,\n      targetPosition = _ref19$targetPosition === void 0 ? Position.Top : _ref19$targetPosition,\n      _ref19$curvature = _ref19.curvature,\n      curvature = _ref19$curvature === void 0 ? 0.25 : _ref19$curvature;\n\n  var _getControlWithCurvat = getControlWithCurvature({\n    pos: sourcePosition,\n    x1: sourceX,\n    y1: sourceY,\n    x2: targetX,\n    y2: targetY,\n    c: curvature\n  }),\n      _getControlWithCurvat2 = _slicedToArray(_getControlWithCurvat, 2),\n      sourceControlX = _getControlWithCurvat2[0],\n      sourceControlY = _getControlWithCurvat2[1];\n\n  var _getControlWithCurvat3 = getControlWithCurvature({\n    pos: targetPosition,\n    x1: targetX,\n    y1: targetY,\n    x2: sourceX,\n    y2: sourceY,\n    c: curvature\n  }),\n      _getControlWithCurvat4 = _slicedToArray(_getControlWithCurvat3, 2),\n      targetControlX = _getControlWithCurvat4[0],\n      targetControlY = _getControlWithCurvat4[1];\n\n  var _getBezierEdgeCenter3 = getBezierEdgeCenter({\n    sourceX: sourceX,\n    sourceY: sourceY,\n    targetX: targetX,\n    targetY: targetY,\n    sourceControlX: sourceControlX,\n    sourceControlY: sourceControlY,\n    targetControlX: targetControlX,\n    targetControlY: targetControlY\n  }),\n      _getBezierEdgeCenter4 = _slicedToArray(_getBezierEdgeCenter3, 4),\n      labelX = _getBezierEdgeCenter4[0],\n      labelY = _getBezierEdgeCenter4[1],\n      offsetX = _getBezierEdgeCenter4[2],\n      offsetY = _getBezierEdgeCenter4[3];\n\n  return [\"M\".concat(sourceX, \",\").concat(sourceY, \" C\").concat(sourceControlX, \",\").concat(sourceControlY, \" \").concat(targetControlX, \",\").concat(targetControlY, \" \").concat(targetX, \",\").concat(targetY), labelX, labelY, offsetX, offsetY];\n}\n\nvar BezierEdge = memo(function (_ref20) {\n  var sourceX = _ref20.sourceX,\n      sourceY = _ref20.sourceY,\n      targetX = _ref20.targetX,\n      targetY = _ref20.targetY,\n      _ref20$sourcePosition = _ref20.sourcePosition,\n      sourcePosition = _ref20$sourcePosition === void 0 ? Position.Bottom : _ref20$sourcePosition,\n      _ref20$targetPosition = _ref20.targetPosition,\n      targetPosition = _ref20$targetPosition === void 0 ? Position.Top : _ref20$targetPosition,\n      label = _ref20.label,\n      labelStyle = _ref20.labelStyle,\n      labelShowBg = _ref20.labelShowBg,\n      labelBgStyle = _ref20.labelBgStyle,\n      labelBgPadding = _ref20.labelBgPadding,\n      labelBgBorderRadius = _ref20.labelBgBorderRadius,\n      style = _ref20.style,\n      markerEnd = _ref20.markerEnd,\n      markerStart = _ref20.markerStart,\n      pathOptions = _ref20.pathOptions,\n      interactionWidth = _ref20.interactionWidth;\n\n  var _getBezierPath = getBezierPath({\n    sourceX: sourceX,\n    sourceY: sourceY,\n    sourcePosition: sourcePosition,\n    targetX: targetX,\n    targetY: targetY,\n    targetPosition: targetPosition,\n    curvature: pathOptions === null || pathOptions === void 0 ? void 0 : pathOptions.curvature\n  }),\n      _getBezierPath2 = _slicedToArray(_getBezierPath, 3),\n      path = _getBezierPath2[0],\n      labelX = _getBezierPath2[1],\n      labelY = _getBezierPath2[2];\n\n  return jsx(BaseEdge, {\n    path: path,\n    labelX: labelX,\n    labelY: labelY,\n    label: label,\n    labelStyle: labelStyle,\n    labelShowBg: labelShowBg,\n    labelBgStyle: labelBgStyle,\n    labelBgPadding: labelBgPadding,\n    labelBgBorderRadius: labelBgBorderRadius,\n    style: style,\n    markerEnd: markerEnd,\n    markerStart: markerStart,\n    interactionWidth: interactionWidth\n  });\n});\nBezierEdge.displayName = 'BezierEdge';\nvar NodeIdContext = createContext(null);\nvar Provider = NodeIdContext.Provider;\nNodeIdContext.Consumer; // checks if element below mouse is a handle and returns connection in form of an object { source: 123, target: 312 }\n\nfunction checkElementBelowIsValid(event, connectionMode, isTarget, nodeId, handleId, isValidConnection, doc) {\n  var elementBelow = doc.elementFromPoint(event.clientX, event.clientY);\n  var elementBelowIsTarget = (elementBelow === null || elementBelow === void 0 ? void 0 : elementBelow.classList.contains('target')) || false;\n  var elementBelowIsSource = (elementBelow === null || elementBelow === void 0 ? void 0 : elementBelow.classList.contains('source')) || false;\n  var result = {\n    elementBelow: elementBelow,\n    isValid: false,\n    connection: {\n      source: null,\n      target: null,\n      sourceHandle: null,\n      targetHandle: null\n    },\n    isHoveringHandle: false\n  };\n\n  if (elementBelow && (elementBelowIsTarget || elementBelowIsSource)) {\n    result.isHoveringHandle = true;\n    var elementBelowNodeId = elementBelow.getAttribute('data-nodeid');\n    var elementBelowHandleId = elementBelow.getAttribute('data-handleid');\n    var connection = isTarget ? {\n      source: elementBelowNodeId,\n      sourceHandle: elementBelowHandleId,\n      target: nodeId,\n      targetHandle: handleId\n    } : {\n      source: nodeId,\n      sourceHandle: handleId,\n      target: elementBelowNodeId,\n      targetHandle: elementBelowHandleId\n    };\n    result.connection = connection; // in strict mode we don't allow target to target or source to source connections\n\n    var isValid = connectionMode === ConnectionMode.Strict ? isTarget && elementBelowIsSource || !isTarget && elementBelowIsTarget : true;\n\n    if (isValid) {\n      result.isValid = isValidConnection(connection);\n    }\n  }\n\n  return result;\n}\n\nfunction resetRecentHandle(hoveredHandle) {\n  hoveredHandle === null || hoveredHandle === void 0 ? void 0 : hoveredHandle.classList.remove('react-flow__handle-valid');\n  hoveredHandle === null || hoveredHandle === void 0 ? void 0 : hoveredHandle.classList.remove('react-flow__handle-connecting');\n}\n\nfunction handleMouseDown(_ref21) {\n  var event = _ref21.event,\n      handleId = _ref21.handleId,\n      nodeId = _ref21.nodeId,\n      onConnect = _ref21.onConnect,\n      isTarget = _ref21.isTarget,\n      getState = _ref21.getState,\n      setState = _ref21.setState,\n      isValidConnection = _ref21.isValidConnection,\n      elementEdgeUpdaterType = _ref21.elementEdgeUpdaterType,\n      onEdgeUpdateEnd = _ref21.onEdgeUpdateEnd;\n  var reactFlowNode = event.target.closest('.react-flow'); // when react-flow is used inside a shadow root we can't use document\n\n  var doc = getHostForElement(event.target);\n\n  if (!doc) {\n    return;\n  }\n\n  var elementBelow = doc.elementFromPoint(event.clientX, event.clientY);\n  var elementBelowIsTarget = elementBelow === null || elementBelow === void 0 ? void 0 : elementBelow.classList.contains('target');\n  var elementBelowIsSource = elementBelow === null || elementBelow === void 0 ? void 0 : elementBelow.classList.contains('source');\n\n  if (!reactFlowNode || !elementBelowIsTarget && !elementBelowIsSource && !elementEdgeUpdaterType) {\n    return;\n  }\n\n  var _getState = getState(),\n      onConnectStart = _getState.onConnectStart,\n      connectionMode = _getState.connectionMode;\n\n  var handleType = elementEdgeUpdaterType ? elementEdgeUpdaterType : elementBelowIsTarget ? 'target' : 'source';\n  var containerBounds = reactFlowNode.getBoundingClientRect();\n  var recentHoveredHandle;\n  setState({\n    connectionPosition: {\n      x: event.clientX - containerBounds.left,\n      y: event.clientY - containerBounds.top\n    },\n    connectionNodeId: nodeId,\n    connectionHandleId: handleId,\n    connectionHandleType: handleType\n  });\n  onConnectStart === null || onConnectStart === void 0 ? void 0 : onConnectStart(event, {\n    nodeId: nodeId,\n    handleId: handleId,\n    handleType: handleType\n  });\n\n  function onMouseMove(event) {\n    setState({\n      connectionPosition: {\n        x: event.clientX - containerBounds.left,\n        y: event.clientY - containerBounds.top\n      }\n    });\n\n    var _checkElementBelowIsV = checkElementBelowIsValid(event, connectionMode, isTarget, nodeId, handleId, isValidConnection, doc),\n        connection = _checkElementBelowIsV.connection,\n        elementBelow = _checkElementBelowIsV.elementBelow,\n        isValid = _checkElementBelowIsV.isValid,\n        isHoveringHandle = _checkElementBelowIsV.isHoveringHandle;\n\n    if (!isHoveringHandle) {\n      return resetRecentHandle(recentHoveredHandle);\n    }\n\n    if (connection.source !== connection.target && elementBelow) {\n      resetRecentHandle(recentHoveredHandle);\n      recentHoveredHandle = elementBelow;\n      elementBelow.classList.add('react-flow__handle-connecting');\n      elementBelow.classList.toggle('react-flow__handle-valid', isValid);\n    }\n  }\n\n  function onMouseUp(event) {\n    var _getState$onConnectEn, _getState2;\n\n    var _checkElementBelowIsV2 = checkElementBelowIsValid(event, connectionMode, isTarget, nodeId, handleId, isValidConnection, doc),\n        connection = _checkElementBelowIsV2.connection,\n        isValid = _checkElementBelowIsV2.isValid;\n\n    if (isValid) {\n      onConnect === null || onConnect === void 0 ? void 0 : onConnect(connection);\n    }\n\n    (_getState$onConnectEn = (_getState2 = getState()).onConnectEnd) === null || _getState$onConnectEn === void 0 ? void 0 : _getState$onConnectEn.call(_getState2, event);\n\n    if (elementEdgeUpdaterType && onEdgeUpdateEnd) {\n      onEdgeUpdateEnd(event);\n    }\n\n    resetRecentHandle(recentHoveredHandle);\n    setState({\n      connectionNodeId: null,\n      connectionHandleId: null,\n      connectionHandleType: null\n    });\n    doc.removeEventListener('mousemove', onMouseMove);\n    doc.removeEventListener('mouseup', onMouseUp);\n  }\n\n  doc.addEventListener('mousemove', onMouseMove);\n  doc.addEventListener('mouseup', onMouseUp);\n}\n\nvar isEdge = function isEdge(element) {\n  return 'id' in element && 'source' in element && 'target' in element;\n};\n\nvar isNode = function isNode(element) {\n  return 'id' in element && !('source' in element) && !('target' in element);\n};\n\nvar getOutgoers = function getOutgoers(node, nodes, edges) {\n  if (!isNode(node)) {\n    return [];\n  }\n\n  var outgoerIds = edges.filter(function (e) {\n    return e.source === node.id;\n  }).map(function (e) {\n    return e.target;\n  });\n  return nodes.filter(function (n) {\n    return outgoerIds.includes(n.id);\n  });\n};\n\nvar getIncomers = function getIncomers(node, nodes, edges) {\n  if (!isNode(node)) {\n    return [];\n  }\n\n  var incomersIds = edges.filter(function (e) {\n    return e.target === node.id;\n  }).map(function (e) {\n    return e.source;\n  });\n  return nodes.filter(function (n) {\n    return incomersIds.includes(n.id);\n  });\n};\n\nvar getEdgeId = function getEdgeId(_ref22) {\n  var source = _ref22.source,\n      sourceHandle = _ref22.sourceHandle,\n      target = _ref22.target,\n      targetHandle = _ref22.targetHandle;\n  return \"reactflow__edge-\".concat(source).concat(sourceHandle || '', \"-\").concat(target).concat(targetHandle || '');\n};\n\nvar getMarkerId = function getMarkerId(marker, rfId) {\n  if (typeof marker === 'undefined') {\n    return '';\n  }\n\n  if (typeof marker === 'string') {\n    return marker;\n  }\n\n  var idPrefix = rfId ? \"\".concat(rfId, \"__\") : '';\n  return \"\".concat(idPrefix).concat(Object.keys(marker).sort().map(function (key) {\n    return \"\".concat(key, \"=\").concat(marker[key]);\n  }).join('&'));\n};\n\nvar connectionExists = function connectionExists(edge, edges) {\n  return edges.some(function (el) {\n    return el.source === edge.source && el.target === edge.target && (el.sourceHandle === edge.sourceHandle || !el.sourceHandle && !edge.sourceHandle) && (el.targetHandle === edge.targetHandle || !el.targetHandle && !edge.targetHandle);\n  });\n};\n\nvar addEdge = function addEdge(edgeParams, edges) {\n  if (!edgeParams.source || !edgeParams.target) {\n    devWarn(\"Can't create edge. An edge needs a source and a target. Help: https://reactflow.dev/error#600\");\n    return edges;\n  }\n\n  var edge;\n\n  if (isEdge(edgeParams)) {\n    edge = _objectSpread({}, edgeParams);\n  } else {\n    edge = _objectSpread(_objectSpread({}, edgeParams), {}, {\n      id: getEdgeId(edgeParams)\n    });\n  }\n\n  if (connectionExists(edge, edges)) {\n    return edges;\n  }\n\n  return edges.concat(edge);\n};\n\nvar updateEdge = function updateEdge(oldEdge, newConnection, edges) {\n  if (!newConnection.source || !newConnection.target) {\n    devWarn(\"Can't create a new edge. An edge needs a source and a target. Help: https://reactflow.dev/error#600\");\n    return edges;\n  }\n\n  var foundEdge = edges.find(function (e) {\n    return e.id === oldEdge.id;\n  });\n\n  if (!foundEdge) {\n    devWarn(\"The old edge with id=\".concat(oldEdge.id, \" does not exist. Help: https://reactflow.dev/error#700\"));\n    return edges;\n  } // Remove old edge and create the new edge with parameters of old edge.\n\n\n  var edge = _objectSpread(_objectSpread({}, oldEdge), {}, {\n    id: getEdgeId(newConnection),\n    source: newConnection.source,\n    target: newConnection.target,\n    sourceHandle: newConnection.sourceHandle,\n    targetHandle: newConnection.targetHandle\n  });\n\n  return edges.filter(function (e) {\n    return e.id !== oldEdge.id;\n  }).concat(edge);\n};\n\nvar pointToRendererPoint = function pointToRendererPoint(_ref23, _ref24, snapToGrid, _ref25) {\n  var x = _ref23.x,\n      y = _ref23.y;\n\n  var _ref26 = _slicedToArray(_ref24, 3),\n      tx = _ref26[0],\n      ty = _ref26[1],\n      tScale = _ref26[2];\n\n  var _ref27 = _slicedToArray(_ref25, 2),\n      snapX = _ref27[0],\n      snapY = _ref27[1];\n\n  var position = {\n    x: (x - tx) / tScale,\n    y: (y - ty) / tScale\n  };\n\n  if (snapToGrid) {\n    return {\n      x: snapX * Math.round(position.x / snapX),\n      y: snapY * Math.round(position.y / snapY)\n    };\n  }\n\n  return position;\n};\n\nvar getRectOfNodes = function getRectOfNodes(nodes) {\n  if (nodes.length === 0) {\n    return {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n  }\n\n  var box = nodes.reduce(function (currBox, _ref28) {\n    var positionAbsolute = _ref28.positionAbsolute,\n        position = _ref28.position,\n        width = _ref28.width,\n        height = _ref28.height;\n    return getBoundsOfBoxes(currBox, rectToBox({\n      x: positionAbsolute ? positionAbsolute.x : position.x,\n      y: positionAbsolute ? positionAbsolute.y : position.y,\n      width: width || 0,\n      height: height || 0\n    }));\n  }, {\n    x: Infinity,\n    y: Infinity,\n    x2: -Infinity,\n    y2: -Infinity\n  });\n  return boxToRect(box);\n};\n\nvar getNodesInside = function getNodesInside(nodeInternals, rect) {\n  var _ref29 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [0, 0, 1],\n      _ref30 = _slicedToArray(_ref29, 3),\n      tx = _ref30[0],\n      ty = _ref30[1],\n      tScale = _ref30[2];\n\n  var partially = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var excludeNonSelectableNodes = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n  var paneRect = {\n    x: (rect.x - tx) / tScale,\n    y: (rect.y - ty) / tScale,\n    width: rect.width / tScale,\n    height: rect.height / tScale\n  };\n  var visibleNodes = [];\n  nodeInternals.forEach(function (node) {\n    var _node$positionAbsolut = node.positionAbsolute,\n        positionAbsolute = _node$positionAbsolut === void 0 ? {\n      x: 0,\n      y: 0\n    } : _node$positionAbsolut,\n        width = node.width,\n        height = node.height,\n        _node$selectable = node.selectable,\n        selectable = _node$selectable === void 0 ? true : _node$selectable;\n\n    if (excludeNonSelectableNodes && !selectable) {\n      return false;\n    }\n\n    var nodeRect = _objectSpread(_objectSpread({}, positionAbsolute), {}, {\n      width: width || 0,\n      height: height || 0\n    });\n\n    var overlappingArea = getOverlappingArea(paneRect, nodeRect);\n    var notInitialized = typeof width === 'undefined' || typeof height === 'undefined' || width === null || height === null;\n    var partiallyVisible = partially && overlappingArea > 0;\n    var area = (width || 0) * (height || 0);\n    var isVisible = notInitialized || partiallyVisible || overlappingArea >= area;\n\n    if (isVisible || node.dragging) {\n      visibleNodes.push(node);\n    }\n  });\n  return visibleNodes;\n};\n\nvar getConnectedEdges = function getConnectedEdges(nodes, edges) {\n  var nodeIds = nodes.map(function (node) {\n    return node.id;\n  });\n  return edges.filter(function (edge) {\n    return nodeIds.includes(edge.source) || nodeIds.includes(edge.target);\n  });\n};\n\nvar getTransformForBounds = function getTransformForBounds(bounds, width, height, minZoom, maxZoom) {\n  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0.1;\n  var xZoom = width / (bounds.width * (1 + padding));\n  var yZoom = height / (bounds.height * (1 + padding));\n  var zoom = Math.min(xZoom, yZoom);\n  var clampedZoom = clamp(zoom, minZoom, maxZoom);\n  var boundsCenterX = bounds.x + bounds.width / 2;\n  var boundsCenterY = bounds.y + bounds.height / 2;\n  var x = width / 2 - boundsCenterX * clampedZoom;\n  var y = height / 2 - boundsCenterY * clampedZoom;\n  return [x, y, clampedZoom];\n};\n\nvar getD3Transition = function getD3Transition(selection) {\n  var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return selection.transition().duration(duration);\n};\n\nvar alwaysValid = function alwaysValid() {\n  return true;\n};\n\nvar selector$d = function selector$d(s) {\n  return {\n    connectionStartHandle: s.connectionStartHandle,\n    connectOnClick: s.connectOnClick,\n    noPanClassName: s.noPanClassName\n  };\n};\n\nvar Handle = forwardRef(function (_ref31, ref) {\n  var _ref31$type = _ref31.type,\n      type = _ref31$type === void 0 ? 'source' : _ref31$type,\n      _ref31$position = _ref31.position,\n      position = _ref31$position === void 0 ? Position.Top : _ref31$position,\n      _ref31$isValidConnect = _ref31.isValidConnection,\n      isValidConnection = _ref31$isValidConnect === void 0 ? alwaysValid : _ref31$isValidConnect,\n      _ref31$isConnectable = _ref31.isConnectable,\n      isConnectable = _ref31$isConnectable === void 0 ? true : _ref31$isConnectable,\n      id = _ref31.id,\n      onConnect = _ref31.onConnect,\n      children = _ref31.children,\n      className = _ref31.className,\n      onMouseDown = _ref31.onMouseDown,\n      rest = _objectWithoutProperties(_ref31, _excluded3);\n\n  var store = useStoreApi();\n  var nodeId = useContext(NodeIdContext);\n\n  var _useStore = useStore(selector$d, shallow),\n      connectionStartHandle = _useStore.connectionStartHandle,\n      connectOnClick = _useStore.connectOnClick,\n      noPanClassName = _useStore.noPanClassName;\n\n  var handleId = id || null;\n  var isTarget = type === 'target';\n\n  var onConnectExtended = function onConnectExtended(params) {\n    var _store$getState = store.getState(),\n        defaultEdgeOptions = _store$getState.defaultEdgeOptions,\n        onConnectAction = _store$getState.onConnect,\n        hasDefaultEdges = _store$getState.hasDefaultEdges;\n\n    var edgeParams = _objectSpread(_objectSpread({}, defaultEdgeOptions), params);\n\n    if (hasDefaultEdges) {\n      var _store$getState2 = store.getState(),\n          edges = _store$getState2.edges;\n\n      store.setState({\n        edges: addEdge(edgeParams, edges)\n      });\n    }\n\n    onConnectAction === null || onConnectAction === void 0 ? void 0 : onConnectAction(edgeParams);\n    onConnect === null || onConnect === void 0 ? void 0 : onConnect(edgeParams);\n  };\n\n  var onMouseDownHandler = function onMouseDownHandler(event) {\n    if (event.button === 0) {\n      handleMouseDown({\n        event: event,\n        handleId: handleId,\n        nodeId: nodeId,\n        onConnect: onConnectExtended,\n        isTarget: isTarget,\n        getState: store.getState,\n        setState: store.setState,\n        isValidConnection: isValidConnection\n      });\n    }\n\n    onMouseDown === null || onMouseDown === void 0 ? void 0 : onMouseDown(event);\n  };\n\n  var onClick = function onClick(event) {\n    var _store$getState3 = store.getState(),\n        onClickConnectStart = _store$getState3.onClickConnectStart,\n        onClickConnectEnd = _store$getState3.onClickConnectEnd,\n        connectionMode = _store$getState3.connectionMode;\n\n    if (!connectionStartHandle) {\n      onClickConnectStart === null || onClickConnectStart === void 0 ? void 0 : onClickConnectStart(event, {\n        nodeId: nodeId,\n        handleId: handleId,\n        handleType: type\n      });\n      store.setState({\n        connectionStartHandle: {\n          nodeId: nodeId,\n          type: type,\n          handleId: handleId\n        }\n      });\n      return;\n    }\n\n    var doc = getHostForElement(event.target);\n\n    var _checkElementBelowIsV3 = checkElementBelowIsValid(event, connectionMode, connectionStartHandle.type === 'target', connectionStartHandle.nodeId, connectionStartHandle.handleId || null, isValidConnection, doc),\n        connection = _checkElementBelowIsV3.connection,\n        isValid = _checkElementBelowIsV3.isValid;\n\n    if (isValid) {\n      onConnectExtended(connection);\n    }\n\n    onClickConnectEnd === null || onClickConnectEnd === void 0 ? void 0 : onClickConnectEnd(event);\n    store.setState({\n      connectionStartHandle: null\n    });\n  };\n\n  return jsx(\"div\", _objectSpread(_objectSpread({\n    \"data-handleid\": handleId,\n    \"data-nodeid\": nodeId,\n    \"data-handlepos\": position,\n    className: cc(['react-flow__handle', \"react-flow__handle-\".concat(position), 'nodrag', noPanClassName, className, {\n      source: !isTarget,\n      target: isTarget,\n      connectable: isConnectable,\n      connecting: (connectionStartHandle === null || connectionStartHandle === void 0 ? void 0 : connectionStartHandle.nodeId) === nodeId && (connectionStartHandle === null || connectionStartHandle === void 0 ? void 0 : connectionStartHandle.handleId) === handleId && (connectionStartHandle === null || connectionStartHandle === void 0 ? void 0 : connectionStartHandle.type) === type\n    }]),\n    onMouseDown: onMouseDownHandler,\n    onClick: connectOnClick ? onClick : undefined,\n    ref: ref\n  }, rest), {}, {\n    children: children\n  }));\n});\nHandle.displayName = 'Handle';\nvar Handle$1 = memo(Handle);\n\nvar DefaultNode = function DefaultNode(_ref32) {\n  var data = _ref32.data,\n      isConnectable = _ref32.isConnectable,\n      _ref32$targetPosition = _ref32.targetPosition,\n      targetPosition = _ref32$targetPosition === void 0 ? Position.Top : _ref32$targetPosition,\n      _ref32$sourcePosition = _ref32.sourcePosition,\n      sourcePosition = _ref32$sourcePosition === void 0 ? Position.Bottom : _ref32$sourcePosition;\n  return jsxs(Fragment, {\n    children: [jsx(Handle$1, {\n      type: \"target\",\n      position: targetPosition,\n      isConnectable: isConnectable\n    }), data === null || data === void 0 ? void 0 : data.label, jsx(Handle$1, {\n      type: \"source\",\n      position: sourcePosition,\n      isConnectable: isConnectable\n    })]\n  });\n};\n\nDefaultNode.displayName = 'DefaultNode';\nvar DefaultNode$1 = memo(DefaultNode);\n\nvar InputNode = function InputNode(_ref33) {\n  var data = _ref33.data,\n      isConnectable = _ref33.isConnectable,\n      _ref33$sourcePosition = _ref33.sourcePosition,\n      sourcePosition = _ref33$sourcePosition === void 0 ? Position.Bottom : _ref33$sourcePosition;\n  return jsxs(Fragment, {\n    children: [data === null || data === void 0 ? void 0 : data.label, jsx(Handle$1, {\n      type: \"source\",\n      position: sourcePosition,\n      isConnectable: isConnectable\n    })]\n  });\n};\n\nInputNode.displayName = 'InputNode';\nvar InputNode$1 = memo(InputNode);\n\nvar OutputNode = function OutputNode(_ref34) {\n  var data = _ref34.data,\n      isConnectable = _ref34.isConnectable,\n      _ref34$targetPosition = _ref34.targetPosition,\n      targetPosition = _ref34$targetPosition === void 0 ? Position.Top : _ref34$targetPosition;\n  return jsxs(Fragment, {\n    children: [jsx(Handle$1, {\n      type: \"target\",\n      position: targetPosition,\n      isConnectable: isConnectable\n    }), data === null || data === void 0 ? void 0 : data.label]\n  });\n};\n\nOutputNode.displayName = 'OutputNode';\nvar OutputNode$1 = memo(OutputNode);\n\nvar GroupNode = function GroupNode() {\n  return null;\n};\n\nGroupNode.displayName = 'GroupNode';\n\nvar selector$c = function selector$c(s) {\n  return {\n    selectedNodes: Array.from(s.nodeInternals.values()).filter(function (n) {\n      return n.selected;\n    }),\n    selectedEdges: s.edges.filter(function (e) {\n      return e.selected;\n    })\n  };\n};\n\nvar selectId = function selectId(obj) {\n  return obj.id;\n};\n\nfunction areEqual(a, b) {\n  return shallow(a.selectedNodes.map(selectId), b.selectedNodes.map(selectId)) && shallow(a.selectedEdges.map(selectId), b.selectedEdges.map(selectId));\n} // This is just a helper component for calling the onSelectionChange listener.\n// @TODO: Now that we have the onNodesChange and on EdgesChange listeners, do we still need this component?\n\n\nvar SelectionListener = memo(function (_ref35) {\n  var onSelectionChange = _ref35.onSelectionChange;\n  var store = useStoreApi();\n\n  var _useStore2 = useStore(selector$c, areEqual),\n      selectedNodes = _useStore2.selectedNodes,\n      selectedEdges = _useStore2.selectedEdges;\n\n  useEffect(function () {\n    var _store$getState$onSel, _store$getState4;\n\n    var params = {\n      nodes: selectedNodes,\n      edges: selectedEdges\n    };\n    onSelectionChange === null || onSelectionChange === void 0 ? void 0 : onSelectionChange(params);\n    (_store$getState$onSel = (_store$getState4 = store.getState()).onSelectionChange) === null || _store$getState$onSel === void 0 ? void 0 : _store$getState$onSel.call(_store$getState4, params);\n  }, [selectedNodes, selectedEdges, onSelectionChange]);\n  return null;\n});\nSelectionListener.displayName = 'SelectionListener';\n\nvar changeSelector = function changeSelector(s) {\n  return !!s.onSelectionChange;\n};\n\nfunction Wrapper$1(_ref36) {\n  var onSelectionChange = _ref36.onSelectionChange;\n  var storeHasSelectionChange = useStore(changeSelector);\n\n  if (onSelectionChange || storeHasSelectionChange) {\n    return jsx(SelectionListener, {\n      onSelectionChange: onSelectionChange\n    });\n  }\n\n  return null;\n}\n\nvar selector$b = function selector$b(s) {\n  return {\n    setNodes: s.setNodes,\n    setEdges: s.setEdges,\n    setDefaultNodesAndEdges: s.setDefaultNodesAndEdges,\n    setMinZoom: s.setMinZoom,\n    setMaxZoom: s.setMaxZoom,\n    setTranslateExtent: s.setTranslateExtent,\n    setNodeExtent: s.setNodeExtent,\n    reset: s.reset\n  };\n};\n\nfunction useStoreUpdater(value, setStoreState) {\n  useEffect(function () {\n    if (typeof value !== 'undefined') {\n      setStoreState(value);\n    }\n  }, [value]);\n} // updates with values in store that don't have a dedicated setter function\n\n\nfunction useDirectStoreUpdater(key, value, setState) {\n  useEffect(function () {\n    if (typeof value !== 'undefined') {\n      setState(_defineProperty({}, key, value));\n    }\n  }, [value]);\n}\n\nvar StoreUpdater = function StoreUpdater(_ref37) {\n  var nodes = _ref37.nodes,\n      edges = _ref37.edges,\n      defaultNodes = _ref37.defaultNodes,\n      defaultEdges = _ref37.defaultEdges,\n      onConnect = _ref37.onConnect,\n      onConnectStart = _ref37.onConnectStart,\n      onConnectEnd = _ref37.onConnectEnd,\n      onClickConnectStart = _ref37.onClickConnectStart,\n      onClickConnectEnd = _ref37.onClickConnectEnd,\n      nodesDraggable = _ref37.nodesDraggable,\n      nodesConnectable = _ref37.nodesConnectable,\n      nodesFocusable = _ref37.nodesFocusable,\n      edgesFocusable = _ref37.edgesFocusable,\n      minZoom = _ref37.minZoom,\n      maxZoom = _ref37.maxZoom,\n      nodeExtent = _ref37.nodeExtent,\n      onNodesChange = _ref37.onNodesChange,\n      onEdgesChange = _ref37.onEdgesChange,\n      elementsSelectable = _ref37.elementsSelectable,\n      connectionMode = _ref37.connectionMode,\n      snapGrid = _ref37.snapGrid,\n      snapToGrid = _ref37.snapToGrid,\n      translateExtent = _ref37.translateExtent,\n      connectOnClick = _ref37.connectOnClick,\n      defaultEdgeOptions = _ref37.defaultEdgeOptions,\n      fitView = _ref37.fitView,\n      fitViewOptions = _ref37.fitViewOptions,\n      onNodesDelete = _ref37.onNodesDelete,\n      onEdgesDelete = _ref37.onEdgesDelete,\n      onNodeDrag = _ref37.onNodeDrag,\n      onNodeDragStart = _ref37.onNodeDragStart,\n      onNodeDragStop = _ref37.onNodeDragStop,\n      onSelectionDrag = _ref37.onSelectionDrag,\n      onSelectionDragStart = _ref37.onSelectionDragStart,\n      onSelectionDragStop = _ref37.onSelectionDragStop,\n      noPanClassName = _ref37.noPanClassName,\n      nodeOrigin = _ref37.nodeOrigin,\n      rfId = _ref37.rfId;\n\n  var _useStore3 = useStore(selector$b, shallow),\n      setNodes = _useStore3.setNodes,\n      setEdges = _useStore3.setEdges,\n      setDefaultNodesAndEdges = _useStore3.setDefaultNodesAndEdges,\n      setMinZoom = _useStore3.setMinZoom,\n      setMaxZoom = _useStore3.setMaxZoom,\n      setTranslateExtent = _useStore3.setTranslateExtent,\n      setNodeExtent = _useStore3.setNodeExtent,\n      reset = _useStore3.reset;\n\n  var store = useStoreApi();\n  useEffect(function () {\n    var edgesWithDefaults = defaultEdges === null || defaultEdges === void 0 ? void 0 : defaultEdges.map(function (e) {\n      return _objectSpread(_objectSpread({}, e), defaultEdgeOptions);\n    });\n    setDefaultNodesAndEdges(defaultNodes, edgesWithDefaults);\n    return function () {\n      reset();\n    };\n  }, []);\n  useDirectStoreUpdater('defaultEdgeOptions', defaultEdgeOptions, store.setState);\n  useDirectStoreUpdater('connectionMode', connectionMode, store.setState);\n  useDirectStoreUpdater('onConnect', onConnect, store.setState);\n  useDirectStoreUpdater('onConnectStart', onConnectStart, store.setState);\n  useDirectStoreUpdater('onConnectEnd', onConnectEnd, store.setState);\n  useDirectStoreUpdater('onClickConnectStart', onClickConnectStart, store.setState);\n  useDirectStoreUpdater('onClickConnectEnd', onClickConnectEnd, store.setState);\n  useDirectStoreUpdater('nodesDraggable', nodesDraggable, store.setState);\n  useDirectStoreUpdater('nodesConnectable', nodesConnectable, store.setState);\n  useDirectStoreUpdater('nodesFocusable', nodesFocusable, store.setState);\n  useDirectStoreUpdater('edgesFocusable', edgesFocusable, store.setState);\n  useDirectStoreUpdater('elementsSelectable', elementsSelectable, store.setState);\n  useDirectStoreUpdater('snapToGrid', snapToGrid, store.setState);\n  useDirectStoreUpdater('snapGrid', snapGrid, store.setState);\n  useDirectStoreUpdater('onNodesChange', onNodesChange, store.setState);\n  useDirectStoreUpdater('onEdgesChange', onEdgesChange, store.setState);\n  useDirectStoreUpdater('connectOnClick', connectOnClick, store.setState);\n  useDirectStoreUpdater('fitViewOnInit', fitView, store.setState);\n  useDirectStoreUpdater('fitViewOnInitOptions', fitViewOptions, store.setState);\n  useDirectStoreUpdater('onNodesDelete', onNodesDelete, store.setState);\n  useDirectStoreUpdater('onEdgesDelete', onEdgesDelete, store.setState);\n  useDirectStoreUpdater('onNodeDrag', onNodeDrag, store.setState);\n  useDirectStoreUpdater('onNodeDragStart', onNodeDragStart, store.setState);\n  useDirectStoreUpdater('onNodeDragStop', onNodeDragStop, store.setState);\n  useDirectStoreUpdater('onSelectionDrag', onSelectionDrag, store.setState);\n  useDirectStoreUpdater('onSelectionDragStart', onSelectionDragStart, store.setState);\n  useDirectStoreUpdater('onSelectionDragStop', onSelectionDragStop, store.setState);\n  useDirectStoreUpdater('noPanClassName', noPanClassName, store.setState);\n  useDirectStoreUpdater('nodeOrigin', nodeOrigin, store.setState);\n  useDirectStoreUpdater('rfId', rfId, store.setState);\n  useStoreUpdater(nodes, setNodes);\n  useStoreUpdater(edges, setEdges);\n  useStoreUpdater(minZoom, setMinZoom);\n  useStoreUpdater(maxZoom, setMaxZoom);\n  useStoreUpdater(translateExtent, setTranslateExtent);\n  useStoreUpdater(nodeExtent, setNodeExtent);\n  return null;\n};\n\nvar style = {\n  display: 'none'\n};\nvar ariaLiveStyle = {\n  position: 'absolute',\n  width: 1,\n  height: 1,\n  margin: -1,\n  border: 0,\n  padding: 0,\n  overflow: 'hidden',\n  clip: 'rect(0px, 0px, 0px, 0px)',\n  clipPath: 'inset(100%)'\n};\nvar ARIA_NODE_DESC_KEY = 'react-flow__node-desc';\nvar ARIA_EDGE_DESC_KEY = 'react-flow__edge-desc';\nvar ARIA_LIVE_MESSAGE = 'react-flow__aria-live';\n\nvar selector$a = function selector$a(s) {\n  return s.ariaLiveMessage;\n};\n\nfunction AriaLiveMessage(_ref38) {\n  var rfId = _ref38.rfId;\n  var ariaLiveMessage = useStore(selector$a);\n  return jsx(\"div\", {\n    id: \"\".concat(ARIA_LIVE_MESSAGE, \"-\").concat(rfId),\n    \"aria-live\": \"assertive\",\n    \"aria-atomic\": \"true\",\n    style: ariaLiveStyle,\n    children: ariaLiveMessage\n  });\n}\n\nfunction A11yDescriptions(_ref39) {\n  var rfId = _ref39.rfId,\n      disableKeyboardA11y = _ref39.disableKeyboardA11y;\n  return jsxs(Fragment, {\n    children: [jsxs(\"div\", {\n      id: \"\".concat(ARIA_NODE_DESC_KEY, \"-\").concat(rfId),\n      style: style,\n      children: [\"Press enter or space to select a node.\", !disableKeyboardA11y && 'You can then use the arrow keys to move the node around.', \" Press delete to remove it and escape to cancel.\", ' ']\n    }), jsx(\"div\", {\n      id: \"\".concat(ARIA_EDGE_DESC_KEY, \"-\").concat(rfId),\n      style: style,\n      children: \"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.\"\n    }), !disableKeyboardA11y && jsx(AriaLiveMessage, {\n      rfId: rfId\n    })]\n  });\n}\n\nvar shiftX = function shiftX(x, shift, position) {\n  if (position === Position.Left) return x - shift;\n  if (position === Position.Right) return x + shift;\n  return x;\n};\n\nvar shiftY = function shiftY(y, shift, position) {\n  if (position === Position.Top) return y - shift;\n  if (position === Position.Bottom) return y + shift;\n  return y;\n};\n\nvar EdgeUpdaterClassName = 'react-flow__edgeupdater';\n\nvar EdgeAnchor = function EdgeAnchor(_ref40) {\n  var position = _ref40.position,\n      centerX = _ref40.centerX,\n      centerY = _ref40.centerY,\n      _ref40$radius = _ref40.radius,\n      radius = _ref40$radius === void 0 ? 10 : _ref40$radius,\n      onMouseDown = _ref40.onMouseDown,\n      onMouseEnter = _ref40.onMouseEnter,\n      onMouseOut = _ref40.onMouseOut,\n      type = _ref40.type;\n  return jsx(\"circle\", {\n    onMouseDown: onMouseDown,\n    onMouseEnter: onMouseEnter,\n    onMouseOut: onMouseOut,\n    className: cc([EdgeUpdaterClassName, \"\".concat(EdgeUpdaterClassName, \"-\").concat(type)]),\n    cx: shiftX(centerX, radius, position),\n    cy: shiftY(centerY, radius, position),\n    r: radius,\n    stroke: \"transparent\",\n    fill: \"transparent\"\n  });\n};\n\nvar wrapEdge = function wrapEdge(EdgeComponent) {\n  var EdgeWrapper = function EdgeWrapper(_ref41) {\n    var id = _ref41.id,\n        className = _ref41.className,\n        type = _ref41.type,\n        data = _ref41.data,\n        onClick = _ref41.onClick,\n        onEdgeDoubleClick = _ref41.onEdgeDoubleClick,\n        selected = _ref41.selected,\n        animated = _ref41.animated,\n        label = _ref41.label,\n        labelStyle = _ref41.labelStyle,\n        labelShowBg = _ref41.labelShowBg,\n        labelBgStyle = _ref41.labelBgStyle,\n        labelBgPadding = _ref41.labelBgPadding,\n        labelBgBorderRadius = _ref41.labelBgBorderRadius,\n        style = _ref41.style,\n        source = _ref41.source,\n        target = _ref41.target,\n        sourceX = _ref41.sourceX,\n        sourceY = _ref41.sourceY,\n        targetX = _ref41.targetX,\n        targetY = _ref41.targetY,\n        sourcePosition = _ref41.sourcePosition,\n        targetPosition = _ref41.targetPosition,\n        elementsSelectable = _ref41.elementsSelectable,\n        hidden = _ref41.hidden,\n        sourceHandleId = _ref41.sourceHandleId,\n        targetHandleId = _ref41.targetHandleId,\n        onContextMenu = _ref41.onContextMenu,\n        onMouseEnter = _ref41.onMouseEnter,\n        onMouseMove = _ref41.onMouseMove,\n        onMouseLeave = _ref41.onMouseLeave,\n        edgeUpdaterRadius = _ref41.edgeUpdaterRadius,\n        onEdgeUpdate = _ref41.onEdgeUpdate,\n        onEdgeUpdateStart = _ref41.onEdgeUpdateStart,\n        onEdgeUpdateEnd = _ref41.onEdgeUpdateEnd,\n        markerEnd = _ref41.markerEnd,\n        markerStart = _ref41.markerStart,\n        rfId = _ref41.rfId,\n        ariaLabel = _ref41.ariaLabel,\n        isFocusable = _ref41.isFocusable,\n        pathOptions = _ref41.pathOptions,\n        interactionWidth = _ref41.interactionWidth;\n    var edgeRef = useRef(null);\n\n    var _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        updateHover = _useState4[0],\n        setUpdateHover = _useState4[1];\n\n    var _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        updating = _useState6[0],\n        setUpdating = _useState6[1];\n\n    var store = useStoreApi();\n    var markerStartUrl = useMemo(function () {\n      return \"url(#\".concat(getMarkerId(markerStart, rfId), \")\");\n    }, [markerStart, rfId]);\n    var markerEndUrl = useMemo(function () {\n      return \"url(#\".concat(getMarkerId(markerEnd, rfId), \")\");\n    }, [markerEnd, rfId]);\n\n    if (hidden) {\n      return null;\n    }\n\n    var onEdgeClick = function onEdgeClick(event) {\n      var _store$getState5 = store.getState(),\n          edges = _store$getState5.edges,\n          addSelectedEdges = _store$getState5.addSelectedEdges;\n\n      if (elementsSelectable) {\n        store.setState({\n          nodesSelectionActive: false\n        });\n        addSelectedEdges([id]);\n      }\n\n      if (onClick) {\n        var edge = edges.find(function (e) {\n          return e.id === id;\n        });\n        onClick(event, edge);\n      }\n    };\n\n    var onEdgeDoubleClickHandler = getMouseHandler$1(id, store.getState, onEdgeDoubleClick);\n    var onEdgeContextMenu = getMouseHandler$1(id, store.getState, onContextMenu);\n    var onEdgeMouseEnter = getMouseHandler$1(id, store.getState, onMouseEnter);\n    var onEdgeMouseMove = getMouseHandler$1(id, store.getState, onMouseMove);\n    var onEdgeMouseLeave = getMouseHandler$1(id, store.getState, onMouseLeave);\n\n    var handleEdgeUpdater = function handleEdgeUpdater(event, isSourceHandle) {\n      var nodeId = isSourceHandle ? target : source;\n      var handleId = (isSourceHandle ? targetHandleId : sourceHandleId) || null;\n      var handleType = isSourceHandle ? 'target' : 'source';\n\n      var isValidConnection = function isValidConnection() {\n        return true;\n      };\n\n      var isTarget = isSourceHandle;\n      var edge = store.getState().edges.find(function (e) {\n        return e.id === id;\n      });\n      setUpdating(true);\n      onEdgeUpdateStart === null || onEdgeUpdateStart === void 0 ? void 0 : onEdgeUpdateStart(event, edge, handleType);\n\n      var _onEdgeUpdateEnd = function _onEdgeUpdateEnd(evt) {\n        setUpdating(false);\n        onEdgeUpdateEnd === null || onEdgeUpdateEnd === void 0 ? void 0 : onEdgeUpdateEnd(evt, edge, handleType);\n      };\n\n      var onConnectEdge = function onConnectEdge(connection) {\n        return onEdgeUpdate === null || onEdgeUpdate === void 0 ? void 0 : onEdgeUpdate(edge, connection);\n      };\n\n      handleMouseDown({\n        event: event,\n        handleId: handleId,\n        nodeId: nodeId,\n        onConnect: onConnectEdge,\n        isTarget: isTarget,\n        getState: store.getState,\n        setState: store.setState,\n        isValidConnection: isValidConnection,\n        elementEdgeUpdaterType: handleType,\n        onEdgeUpdateEnd: _onEdgeUpdateEnd\n      });\n    };\n\n    var onEdgeUpdaterSourceMouseDown = function onEdgeUpdaterSourceMouseDown(event) {\n      return handleEdgeUpdater(event, true);\n    };\n\n    var onEdgeUpdaterTargetMouseDown = function onEdgeUpdaterTargetMouseDown(event) {\n      return handleEdgeUpdater(event, false);\n    };\n\n    var onEdgeUpdaterMouseEnter = function onEdgeUpdaterMouseEnter() {\n      return setUpdateHover(true);\n    };\n\n    var onEdgeUpdaterMouseOut = function onEdgeUpdaterMouseOut() {\n      return setUpdateHover(false);\n    };\n\n    var inactive = !elementsSelectable && !onClick;\n    var handleEdgeUpdate = typeof onEdgeUpdate !== 'undefined';\n\n    var onKeyDown = function onKeyDown(event) {\n      if (elementSelectionKeys.includes(event.key) && elementsSelectable) {\n        var _store$getState6 = store.getState(),\n            unselectNodesAndEdges = _store$getState6.unselectNodesAndEdges,\n            addSelectedEdges = _store$getState6.addSelectedEdges,\n            edges = _store$getState6.edges;\n\n        var unselect = event.key === 'Escape';\n\n        if (unselect) {\n          var _edgeRef$current;\n\n          (_edgeRef$current = edgeRef.current) === null || _edgeRef$current === void 0 ? void 0 : _edgeRef$current.blur();\n          unselectNodesAndEdges({\n            edges: [edges.find(function (e) {\n              return e.id === id;\n            })]\n          });\n        } else {\n          addSelectedEdges([id]);\n        }\n      }\n    };\n\n    return jsxs(\"g\", {\n      className: cc(['react-flow__edge', \"react-flow__edge-\".concat(type), className, {\n        selected: selected,\n        animated: animated,\n        inactive: inactive,\n        updating: updateHover\n      }]),\n      onClick: onEdgeClick,\n      onDoubleClick: onEdgeDoubleClickHandler,\n      onContextMenu: onEdgeContextMenu,\n      onMouseEnter: onEdgeMouseEnter,\n      onMouseMove: onEdgeMouseMove,\n      onMouseLeave: onEdgeMouseLeave,\n      onKeyDown: isFocusable ? onKeyDown : undefined,\n      tabIndex: isFocusable ? 0 : undefined,\n      role: isFocusable ? 'button' : undefined,\n      \"data-testid\": \"rf__edge-\".concat(id),\n      \"aria-label\": ariaLabel === null ? undefined : ariaLabel ? ariaLabel : \"Edge from \".concat(source, \" to \").concat(target),\n      \"aria-describedby\": isFocusable ? \"\".concat(ARIA_EDGE_DESC_KEY, \"-\").concat(rfId) : undefined,\n      ref: edgeRef,\n      children: [!updating && jsx(EdgeComponent, {\n        id: id,\n        source: source,\n        target: target,\n        selected: selected,\n        animated: animated,\n        label: label,\n        labelStyle: labelStyle,\n        labelShowBg: labelShowBg,\n        labelBgStyle: labelBgStyle,\n        labelBgPadding: labelBgPadding,\n        labelBgBorderRadius: labelBgBorderRadius,\n        data: data,\n        style: style,\n        sourceX: sourceX,\n        sourceY: sourceY,\n        targetX: targetX,\n        targetY: targetY,\n        sourcePosition: sourcePosition,\n        targetPosition: targetPosition,\n        sourceHandleId: sourceHandleId,\n        targetHandleId: targetHandleId,\n        markerStart: markerStartUrl,\n        markerEnd: markerEndUrl,\n        pathOptions: pathOptions,\n        interactionWidth: interactionWidth\n      }), handleEdgeUpdate && jsxs(Fragment, {\n        children: [jsx(EdgeAnchor, {\n          position: sourcePosition,\n          centerX: sourceX,\n          centerY: sourceY,\n          radius: edgeUpdaterRadius,\n          onMouseDown: onEdgeUpdaterSourceMouseDown,\n          onMouseEnter: onEdgeUpdaterMouseEnter,\n          onMouseOut: onEdgeUpdaterMouseOut,\n          type: \"source\"\n        }), jsx(EdgeAnchor, {\n          position: targetPosition,\n          centerX: targetX,\n          centerY: targetY,\n          radius: edgeUpdaterRadius,\n          onMouseDown: onEdgeUpdaterTargetMouseDown,\n          onMouseEnter: onEdgeUpdaterMouseEnter,\n          onMouseOut: onEdgeUpdaterMouseOut,\n          type: \"target\"\n        })]\n      })]\n    });\n  };\n\n  EdgeWrapper.displayName = 'EdgeWrapper';\n  return memo(EdgeWrapper);\n};\n\nfunction createEdgeTypes(edgeTypes) {\n  var standardTypes = {\n    default: wrapEdge(edgeTypes.default || BezierEdge),\n    straight: wrapEdge(edgeTypes.bezier || StraightEdge),\n    step: wrapEdge(edgeTypes.step || StepEdge),\n    smoothstep: wrapEdge(edgeTypes.step || SmoothStepEdge),\n    simplebezier: wrapEdge(edgeTypes.simplebezier || SimpleBezierEdge)\n  };\n  var wrappedTypes = {};\n  var specialTypes = Object.keys(edgeTypes).filter(function (k) {\n    return !['default', 'bezier'].includes(k);\n  }).reduce(function (res, key) {\n    res[key] = wrapEdge(edgeTypes[key] || BezierEdge);\n    return res;\n  }, wrappedTypes);\n  return _objectSpread(_objectSpread({}, standardTypes), specialTypes);\n}\n\nfunction getHandlePosition(position, nodeRect) {\n  var handle = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var x = ((handle === null || handle === void 0 ? void 0 : handle.x) || 0) + nodeRect.x;\n  var y = ((handle === null || handle === void 0 ? void 0 : handle.y) || 0) + nodeRect.y;\n  var width = (handle === null || handle === void 0 ? void 0 : handle.width) || nodeRect.width;\n  var height = (handle === null || handle === void 0 ? void 0 : handle.height) || nodeRect.height;\n\n  switch (position) {\n    case Position.Top:\n      return {\n        x: x + width / 2,\n        y: y\n      };\n\n    case Position.Right:\n      return {\n        x: x + width,\n        y: y + height / 2\n      };\n\n    case Position.Bottom:\n      return {\n        x: x + width / 2,\n        y: y + height\n      };\n\n    case Position.Left:\n      return {\n        x: x,\n        y: y + height / 2\n      };\n  }\n}\n\nfunction getHandle(bounds, handleId) {\n  if (!bounds) {\n    return null;\n  } // there is no handleId when there are no multiple handles/ handles with ids\n  // so we just pick the first one\n\n\n  var handle = null;\n\n  if (bounds.length === 1 || !handleId) {\n    handle = bounds[0];\n  } else if (handleId) {\n    handle = bounds.find(function (d) {\n      return d.id === handleId;\n    });\n  }\n\n  return typeof handle === 'undefined' ? null : handle;\n}\n\nvar getEdgePositions = function getEdgePositions(sourceNodeRect, sourceHandle, sourcePosition, targetNodeRect, targetHandle, targetPosition) {\n  var sourceHandlePos = getHandlePosition(sourcePosition, sourceNodeRect, sourceHandle);\n  var targetHandlePos = getHandlePosition(targetPosition, targetNodeRect, targetHandle);\n  return {\n    sourceX: sourceHandlePos.x,\n    sourceY: sourceHandlePos.y,\n    targetX: targetHandlePos.x,\n    targetY: targetHandlePos.y\n  };\n};\n\nfunction isEdgeVisible(_ref42) {\n  var sourcePos = _ref42.sourcePos,\n      targetPos = _ref42.targetPos,\n      sourceWidth = _ref42.sourceWidth,\n      sourceHeight = _ref42.sourceHeight,\n      targetWidth = _ref42.targetWidth,\n      targetHeight = _ref42.targetHeight,\n      width = _ref42.width,\n      height = _ref42.height,\n      transform = _ref42.transform;\n  var edgeBox = {\n    x: Math.min(sourcePos.x, targetPos.x),\n    y: Math.min(sourcePos.y, targetPos.y),\n    x2: Math.max(sourcePos.x + sourceWidth, targetPos.x + targetWidth),\n    y2: Math.max(sourcePos.y + sourceHeight, targetPos.y + targetHeight)\n  };\n\n  if (edgeBox.x === edgeBox.x2) {\n    edgeBox.x2 += 1;\n  }\n\n  if (edgeBox.y === edgeBox.y2) {\n    edgeBox.y2 += 1;\n  }\n\n  var viewBox = rectToBox({\n    x: (0 - transform[0]) / transform[2],\n    y: (0 - transform[1]) / transform[2],\n    width: width / transform[2],\n    height: height / transform[2]\n  });\n  var xOverlap = Math.max(0, Math.min(viewBox.x2, edgeBox.x2) - Math.max(viewBox.x, edgeBox.x));\n  var yOverlap = Math.max(0, Math.min(viewBox.y2, edgeBox.y2) - Math.max(viewBox.y, edgeBox.y));\n  var overlappingArea = Math.ceil(xOverlap * yOverlap);\n  return overlappingArea > 0;\n}\n\nfunction getNodeData(node) {\n  var _node$internalsSymbol, _node$positionAbsolut2, _node$positionAbsolut3, _node$positionAbsolut4, _node$positionAbsolut5;\n\n  var handleBounds = (node === null || node === void 0 ? void 0 : (_node$internalsSymbol = node[internalsSymbol]) === null || _node$internalsSymbol === void 0 ? void 0 : _node$internalsSymbol.handleBounds) || null;\n  var isInvalid = !node || !handleBounds || !node.width || !node.height || typeof ((_node$positionAbsolut2 = node.positionAbsolute) === null || _node$positionAbsolut2 === void 0 ? void 0 : _node$positionAbsolut2.x) === 'undefined' || typeof ((_node$positionAbsolut3 = node.positionAbsolute) === null || _node$positionAbsolut3 === void 0 ? void 0 : _node$positionAbsolut3.y) === 'undefined';\n  return [{\n    x: (node === null || node === void 0 ? void 0 : (_node$positionAbsolut4 = node.positionAbsolute) === null || _node$positionAbsolut4 === void 0 ? void 0 : _node$positionAbsolut4.x) || 0,\n    y: (node === null || node === void 0 ? void 0 : (_node$positionAbsolut5 = node.positionAbsolute) === null || _node$positionAbsolut5 === void 0 ? void 0 : _node$positionAbsolut5.y) || 0,\n    width: (node === null || node === void 0 ? void 0 : node.width) || 0,\n    height: (node === null || node === void 0 ? void 0 : node.height) || 0\n  }, handleBounds, !isInvalid];\n}\n\nfunction isParentSelected(node, nodeInternals) {\n  if (!node.parentNode) {\n    return false;\n  }\n\n  var parentNode = nodeInternals.get(node.parentNode);\n\n  if (!parentNode) {\n    return false;\n  }\n\n  if (parentNode.selected) {\n    return true;\n  }\n\n  return isParentSelected(parentNode, nodeInternals);\n}\n\nfunction hasSelector(target, selector, nodeRef) {\n  var current = target;\n\n  do {\n    var _current;\n\n    if ((_current = current) !== null && _current !== void 0 && _current.matches(selector)) return true;\n    if (current === nodeRef.current) return false;\n    current = current.parentElement;\n  } while (current);\n\n  return false;\n} // looks for all selected nodes and created a NodeDragItem for each of them\n\n\nfunction getDragItems(nodeInternals, mousePos, nodeId) {\n  return Array.from(nodeInternals.values()).filter(function (n) {\n    return (n.selected || n.id === nodeId) && (!n.parentNode || !isParentSelected(n, nodeInternals));\n  }).map(function (n) {\n    var _n$positionAbsolute$x, _n$positionAbsolute, _n$positionAbsolute$y, _n$positionAbsolute2;\n\n    return {\n      id: n.id,\n      position: n.position || {\n        x: 0,\n        y: 0\n      },\n      positionAbsolute: n.positionAbsolute || {\n        x: 0,\n        y: 0\n      },\n      distance: {\n        x: mousePos.x - ((_n$positionAbsolute$x = (_n$positionAbsolute = n.positionAbsolute) === null || _n$positionAbsolute === void 0 ? void 0 : _n$positionAbsolute.x) !== null && _n$positionAbsolute$x !== void 0 ? _n$positionAbsolute$x : 0),\n        y: mousePos.y - ((_n$positionAbsolute$y = (_n$positionAbsolute2 = n.positionAbsolute) === null || _n$positionAbsolute2 === void 0 ? void 0 : _n$positionAbsolute2.y) !== null && _n$positionAbsolute$y !== void 0 ? _n$positionAbsolute$y : 0)\n      },\n      delta: {\n        x: 0,\n        y: 0\n      },\n      extent: n.extent,\n      parentNode: n.parentNode,\n      width: n.width,\n      height: n.height\n    };\n  });\n}\n\nfunction calcNextPosition(node, nextPosition, nodeInternals, nodeExtent) {\n  var currentExtent = node.extent || nodeExtent;\n\n  if (node.extent === 'parent') {\n    if (node.parentNode && node.width && node.height) {\n      var parent = nodeInternals.get(node.parentNode);\n      currentExtent = parent !== null && parent !== void 0 && parent.positionAbsolute && parent !== null && parent !== void 0 && parent.width && parent !== null && parent !== void 0 && parent.height ? [[parent.positionAbsolute.x, parent.positionAbsolute.y], [parent.positionAbsolute.x + parent.width - node.width, parent.positionAbsolute.y + parent.height - node.height]] : currentExtent;\n    } else {\n      devWarn('Only child nodes can use a parent extent. Help: https://reactflow.dev/error#500');\n      currentExtent = nodeExtent;\n    }\n  } else if (node.extent && node.parentNode) {\n    var _parent$positionAbsol, _parent$positionAbsol2, _parent$positionAbsol3, _parent$positionAbsol4;\n\n    var _parent = nodeInternals.get(node.parentNode);\n\n    var parentX = (_parent$positionAbsol = _parent === null || _parent === void 0 ? void 0 : (_parent$positionAbsol2 = _parent.positionAbsolute) === null || _parent$positionAbsol2 === void 0 ? void 0 : _parent$positionAbsol2.x) !== null && _parent$positionAbsol !== void 0 ? _parent$positionAbsol : 0;\n    var parentY = (_parent$positionAbsol3 = _parent === null || _parent === void 0 ? void 0 : (_parent$positionAbsol4 = _parent.positionAbsolute) === null || _parent$positionAbsol4 === void 0 ? void 0 : _parent$positionAbsol4.y) !== null && _parent$positionAbsol3 !== void 0 ? _parent$positionAbsol3 : 0;\n    currentExtent = [[node.extent[0][0] + parentX, node.extent[0][1] + parentY], [node.extent[1][0] + parentX, node.extent[1][1] + parentY]];\n  }\n\n  var parentPosition = {\n    x: 0,\n    y: 0\n  };\n\n  if (node.parentNode) {\n    var _parentNode$positionA, _parentNode$positionA2, _parentNode$positionA3, _parentNode$positionA4;\n\n    var parentNode = nodeInternals.get(node.parentNode);\n    parentPosition = {\n      x: (_parentNode$positionA = parentNode === null || parentNode === void 0 ? void 0 : (_parentNode$positionA2 = parentNode.positionAbsolute) === null || _parentNode$positionA2 === void 0 ? void 0 : _parentNode$positionA2.x) !== null && _parentNode$positionA !== void 0 ? _parentNode$positionA : 0,\n      y: (_parentNode$positionA3 = parentNode === null || parentNode === void 0 ? void 0 : (_parentNode$positionA4 = parentNode.positionAbsolute) === null || _parentNode$positionA4 === void 0 ? void 0 : _parentNode$positionA4.y) !== null && _parentNode$positionA3 !== void 0 ? _parentNode$positionA3 : 0\n    };\n  }\n\n  var positionAbsolute = currentExtent ? clampPosition(nextPosition, currentExtent) : nextPosition;\n  return {\n    position: {\n      x: positionAbsolute.x - parentPosition.x,\n      y: positionAbsolute.y - parentPosition.y\n    },\n    positionAbsolute: positionAbsolute\n  };\n} // returns two params:\n// 1. the dragged node (or the first of the list, if we are dragging a node selection)\n// 2. array of selected nodes (for multi selections)\n\n\nfunction getEventHandlerParams(_ref43) {\n  var nodeId = _ref43.nodeId,\n      dragItems = _ref43.dragItems,\n      nodeInternals = _ref43.nodeInternals;\n  var extentedDragItems = dragItems.map(function (n) {\n    var node = nodeInternals.get(n.id);\n    return _objectSpread(_objectSpread({}, node), {}, {\n      position: n.position,\n      positionAbsolute: n.positionAbsolute\n    });\n  });\n  return [nodeId ? extentedDragItems.find(function (n) {\n    return n.id === nodeId;\n  }) : extentedDragItems[0], extentedDragItems];\n}\n\nvar getHandleBounds = function getHandleBounds(selector, nodeElement, zoom, nodeOrigin) {\n  var handles = nodeElement.querySelectorAll(selector);\n\n  if (!handles || !handles.length) {\n    return null;\n  }\n\n  var handlesArray = Array.from(handles);\n  var nodeBounds = nodeElement.getBoundingClientRect();\n  var nodeOffset = {\n    x: nodeBounds.width * nodeOrigin[0],\n    y: nodeBounds.height * nodeOrigin[1]\n  };\n  return handlesArray.map(function (handle) {\n    var handleBounds = handle.getBoundingClientRect();\n    return _objectSpread({\n      id: handle.getAttribute('data-handleid'),\n      position: handle.getAttribute('data-handlepos'),\n      x: (handleBounds.left - nodeBounds.left - nodeOffset.x) / zoom,\n      y: (handleBounds.top - nodeBounds.top - nodeOffset.y) / zoom\n    }, getDimensions(handle));\n  });\n};\n\nfunction getMouseHandler(id, getState, handler) {\n  return handler === undefined ? handler : function (event) {\n    var node = getState().nodeInternals.get(id);\n    handler(event, _objectSpread({}, node));\n  };\n} // this handler is called by\n// 1. the click handler when node is not draggable or selectNodesOnDrag = false\n// or\n// 2. the on drag start handler when node is draggable and selectNodesOnDrag = true\n\n\nfunction handleNodeClick(_ref44) {\n  var id = _ref44.id,\n      store = _ref44.store,\n      _ref44$unselect = _ref44.unselect,\n      unselect = _ref44$unselect === void 0 ? false : _ref44$unselect;\n\n  var _store$getState7 = store.getState(),\n      addSelectedNodes = _store$getState7.addSelectedNodes,\n      unselectNodesAndEdges = _store$getState7.unselectNodesAndEdges,\n      multiSelectionActive = _store$getState7.multiSelectionActive,\n      nodeInternals = _store$getState7.nodeInternals;\n\n  var node = nodeInternals.get(id);\n  store.setState({\n    nodesSelectionActive: false\n  });\n\n  if (!node.selected) {\n    addSelectedNodes([id]);\n  } else if (unselect || node.selected && multiSelectionActive) {\n    unselectNodesAndEdges({\n      nodes: [node]\n    });\n  }\n}\n\nfunction wrapSelectionDragFunc(selectionFunc) {\n  return function (event, _, nodes) {\n    return selectionFunc === null || selectionFunc === void 0 ? void 0 : selectionFunc(event, nodes);\n  };\n}\n\nfunction useDrag(_ref45) {\n  var nodeRef = _ref45.nodeRef,\n      _ref45$disabled = _ref45.disabled,\n      disabled = _ref45$disabled === void 0 ? false : _ref45$disabled,\n      noDragClassName = _ref45.noDragClassName,\n      handleSelector = _ref45.handleSelector,\n      nodeId = _ref45.nodeId,\n      isSelectable = _ref45.isSelectable,\n      selectNodesOnDrag = _ref45.selectNodesOnDrag;\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      dragging = _useState8[0],\n      setDragging = _useState8[1];\n\n  var store = useStoreApi();\n  var dragItems = useRef();\n  var lastPos = useRef({\n    x: null,\n    y: null\n  }); // returns the pointer position projected to the RF coordinate system\n\n  var getPointerPosition = useCallback(function (_ref46) {\n    var sourceEvent = _ref46.sourceEvent;\n\n    var _store$getState8 = store.getState(),\n        transform = _store$getState8.transform,\n        snapGrid = _store$getState8.snapGrid,\n        snapToGrid = _store$getState8.snapToGrid;\n\n    var x = sourceEvent.touches ? sourceEvent.touches[0].clientX : sourceEvent.clientX;\n    var y = sourceEvent.touches ? sourceEvent.touches[0].clientY : sourceEvent.clientY;\n    var pointerPos = {\n      x: (x - transform[0]) / transform[2],\n      y: (y - transform[1]) / transform[2]\n    }; // we need the snapped position in order to be able to skip unnecessary drag events\n\n    return _objectSpread({\n      xSnapped: snapToGrid ? snapGrid[0] * Math.round(pointerPos.x / snapGrid[0]) : pointerPos.x,\n      ySnapped: snapToGrid ? snapGrid[1] * Math.round(pointerPos.y / snapGrid[1]) : pointerPos.y\n    }, pointerPos);\n  }, []);\n  useEffect(function () {\n    if (nodeRef !== null && nodeRef !== void 0 && nodeRef.current) {\n      var selection = select(nodeRef.current);\n\n      if (disabled) {\n        selection.on('.drag', null);\n      } else {\n        var dragHandler = drag().on('start', function (event) {\n          var _store$getState9 = store.getState(),\n              nodeInternals = _store$getState9.nodeInternals,\n              multiSelectionActive = _store$getState9.multiSelectionActive,\n              unselectNodesAndEdges = _store$getState9.unselectNodesAndEdges,\n              onNodeDragStart = _store$getState9.onNodeDragStart,\n              onSelectionDragStart = _store$getState9.onSelectionDragStart;\n\n          var onStart = nodeId ? onNodeDragStart : wrapSelectionDragFunc(onSelectionDragStart);\n\n          if (!selectNodesOnDrag && !multiSelectionActive && nodeId) {\n            var _nodeInternals$get;\n\n            if (!((_nodeInternals$get = nodeInternals.get(nodeId)) !== null && _nodeInternals$get !== void 0 && _nodeInternals$get.selected)) {\n              // we need to reset selected nodes when selectNodesOnDrag=false\n              unselectNodesAndEdges();\n            }\n          }\n\n          if (nodeId && isSelectable && selectNodesOnDrag) {\n            handleNodeClick({\n              id: nodeId,\n              store: store\n            });\n          }\n\n          var pointerPos = getPointerPosition(event);\n          lastPos.current = pointerPos;\n          dragItems.current = getDragItems(nodeInternals, pointerPos, nodeId);\n\n          if (onStart && dragItems.current) {\n            var _getEventHandlerParam = getEventHandlerParams({\n              nodeId: nodeId,\n              dragItems: dragItems.current,\n              nodeInternals: nodeInternals\n            }),\n                _getEventHandlerParam2 = _slicedToArray(_getEventHandlerParam, 2),\n                currentNode = _getEventHandlerParam2[0],\n                nodes = _getEventHandlerParam2[1];\n\n            onStart(event.sourceEvent, currentNode, nodes);\n          }\n        }).on('drag', function (event) {\n          var _store$getState10 = store.getState(),\n              updateNodePositions = _store$getState10.updateNodePositions,\n              nodeInternals = _store$getState10.nodeInternals,\n              nodeExtent = _store$getState10.nodeExtent,\n              onNodeDrag = _store$getState10.onNodeDrag,\n              onSelectionDrag = _store$getState10.onSelectionDrag,\n              snapGrid = _store$getState10.snapGrid,\n              snapToGrid = _store$getState10.snapToGrid;\n\n          var pointerPos = getPointerPosition(event); // skip events without movement\n\n          if ((lastPos.current.x !== pointerPos.xSnapped || lastPos.current.y !== pointerPos.ySnapped) && dragItems.current) {\n            lastPos.current = {\n              x: pointerPos.xSnapped,\n              y: pointerPos.ySnapped\n            };\n            dragItems.current = dragItems.current.map(function (n) {\n              var nextPosition = {\n                x: pointerPos.x - n.distance.x,\n                y: pointerPos.y - n.distance.y\n              };\n\n              if (snapToGrid) {\n                nextPosition.x = snapGrid[0] * Math.round(nextPosition.x / snapGrid[0]);\n                nextPosition.y = snapGrid[1] * Math.round(nextPosition.y / snapGrid[1]);\n              }\n\n              var updatedPos = calcNextPosition(n, nextPosition, nodeInternals, nodeExtent);\n              n.position = updatedPos.position;\n              n.positionAbsolute = updatedPos.positionAbsolute;\n              return n;\n            });\n            var onDrag = nodeId ? onNodeDrag : wrapSelectionDragFunc(onSelectionDrag);\n            updateNodePositions(dragItems.current, true, true);\n            setDragging(true);\n\n            if (onDrag) {\n              var _getEventHandlerParam3 = getEventHandlerParams({\n                nodeId: nodeId,\n                dragItems: dragItems.current,\n                nodeInternals: nodeInternals\n              }),\n                  _getEventHandlerParam4 = _slicedToArray(_getEventHandlerParam3, 2),\n                  currentNode = _getEventHandlerParam4[0],\n                  nodes = _getEventHandlerParam4[1];\n\n              onDrag(event.sourceEvent, currentNode, nodes);\n            }\n          }\n        }).on('end', function (event) {\n          setDragging(false);\n\n          if (dragItems.current) {\n            var _store$getState11 = store.getState(),\n                updateNodePositions = _store$getState11.updateNodePositions,\n                nodeInternals = _store$getState11.nodeInternals,\n                onNodeDragStop = _store$getState11.onNodeDragStop,\n                onSelectionDragStop = _store$getState11.onSelectionDragStop;\n\n            var onStop = nodeId ? onNodeDragStop : wrapSelectionDragFunc(onSelectionDragStop);\n            updateNodePositions(dragItems.current, false, false);\n\n            if (onStop) {\n              var _getEventHandlerParam5 = getEventHandlerParams({\n                nodeId: nodeId,\n                dragItems: dragItems.current,\n                nodeInternals: nodeInternals\n              }),\n                  _getEventHandlerParam6 = _slicedToArray(_getEventHandlerParam5, 2),\n                  currentNode = _getEventHandlerParam6[0],\n                  nodes = _getEventHandlerParam6[1];\n\n              onStop(event.sourceEvent, currentNode, nodes);\n            }\n          }\n        }).filter(function (event) {\n          var target = event.target;\n          var isDraggable = !event.button && (!noDragClassName || !hasSelector(target, \".\".concat(noDragClassName), nodeRef)) && (!handleSelector || hasSelector(target, handleSelector, nodeRef));\n          return isDraggable;\n        });\n        selection.call(dragHandler);\n        return function () {\n          selection.on('.drag', null);\n        };\n      }\n    }\n  }, [nodeRef, disabled, noDragClassName, handleSelector, isSelectable, store, nodeId, selectNodesOnDrag, getPointerPosition]);\n  return dragging;\n}\n\nfunction useUpdateNodePositions() {\n  var store = useStoreApi();\n  var updatePositions = useCallback(function (positionDiff) {\n    var _store$getState12 = store.getState(),\n        nodeInternals = _store$getState12.nodeInternals,\n        nodeExtent = _store$getState12.nodeExtent,\n        updateNodePositions = _store$getState12.updateNodePositions,\n        snapToGrid = _store$getState12.snapToGrid,\n        snapGrid = _store$getState12.snapGrid;\n\n    var selectedNodes = Array.from(nodeInternals.values()).filter(function (n) {\n      return n.selected;\n    });\n    var nodeUpdates = selectedNodes.map(function (n) {\n      if (n.positionAbsolute) {\n        var nextPosition = {\n          x: n.positionAbsolute.x + positionDiff.x,\n          y: n.positionAbsolute.y + positionDiff.y\n        };\n\n        if (snapToGrid) {\n          nextPosition.x = snapGrid[0] * Math.round(nextPosition.x / snapGrid[0]);\n          nextPosition.y = snapGrid[1] * Math.round(nextPosition.y / snapGrid[1]);\n        }\n\n        var updatedPos = calcNextPosition(n, nextPosition, nodeInternals, nodeExtent);\n        n.position = updatedPos.position;\n        n.positionAbsolute = updatedPos.positionAbsolute;\n      }\n\n      return n;\n    });\n    updateNodePositions(nodeUpdates, true, true);\n  }, []);\n  return updatePositions;\n}\n\nvar arrowKeyDiffs = {\n  ArrowUp: {\n    x: 0,\n    y: -1\n  },\n  ArrowDown: {\n    x: 0,\n    y: 1\n  },\n  ArrowLeft: {\n    x: -1,\n    y: 0\n  },\n  ArrowRight: {\n    x: 1,\n    y: 0\n  }\n};\n\nvar wrapNode = function wrapNode(NodeComponent) {\n  var NodeWrapper = function NodeWrapper(_ref47) {\n    var id = _ref47.id,\n        type = _ref47.type,\n        data = _ref47.data,\n        xPos = _ref47.xPos,\n        yPos = _ref47.yPos,\n        xPosOrigin = _ref47.xPosOrigin,\n        yPosOrigin = _ref47.yPosOrigin,\n        selected = _ref47.selected,\n        onClick = _ref47.onClick,\n        onMouseEnter = _ref47.onMouseEnter,\n        onMouseMove = _ref47.onMouseMove,\n        onMouseLeave = _ref47.onMouseLeave,\n        onContextMenu = _ref47.onContextMenu,\n        onDoubleClick = _ref47.onDoubleClick,\n        style = _ref47.style,\n        className = _ref47.className,\n        isDraggable = _ref47.isDraggable,\n        isSelectable = _ref47.isSelectable,\n        isConnectable = _ref47.isConnectable,\n        isFocusable = _ref47.isFocusable,\n        selectNodesOnDrag = _ref47.selectNodesOnDrag,\n        sourcePosition = _ref47.sourcePosition,\n        targetPosition = _ref47.targetPosition,\n        hidden = _ref47.hidden,\n        resizeObserver = _ref47.resizeObserver,\n        dragHandle = _ref47.dragHandle,\n        zIndex = _ref47.zIndex,\n        isParent = _ref47.isParent,\n        noDragClassName = _ref47.noDragClassName,\n        noPanClassName = _ref47.noPanClassName,\n        initialized = _ref47.initialized,\n        disableKeyboardA11y = _ref47.disableKeyboardA11y,\n        ariaLabel = _ref47.ariaLabel,\n        rfId = _ref47.rfId;\n    var store = useStoreApi();\n    var nodeRef = useRef(null);\n    var prevSourcePosition = useRef(sourcePosition);\n    var prevTargetPosition = useRef(targetPosition);\n    var prevType = useRef(type);\n    var hasPointerEvents = isSelectable || isDraggable || onClick || onMouseEnter || onMouseMove || onMouseLeave;\n    var updatePositions = useUpdateNodePositions();\n    var onMouseEnterHandler = getMouseHandler(id, store.getState, onMouseEnter);\n    var onMouseMoveHandler = getMouseHandler(id, store.getState, onMouseMove);\n    var onMouseLeaveHandler = getMouseHandler(id, store.getState, onMouseLeave);\n    var onContextMenuHandler = getMouseHandler(id, store.getState, onContextMenu);\n    var onDoubleClickHandler = getMouseHandler(id, store.getState, onDoubleClick);\n\n    var onSelectNodeHandler = function onSelectNodeHandler(event) {\n      if (isSelectable && (!selectNodesOnDrag || !isDraggable)) {\n        // this handler gets called within the drag start event when selectNodesOnDrag=true\n        handleNodeClick({\n          id: id,\n          store: store\n        });\n      }\n\n      if (onClick) {\n        var node = store.getState().nodeInternals.get(id);\n        onClick(event, _objectSpread({}, node));\n      }\n    };\n\n    var onKeyDown = function onKeyDown(event) {\n      var _store$getState13 = store.getState(),\n          snapGrid = _store$getState13.snapGrid,\n          snapToGrid = _store$getState13.snapToGrid;\n\n      if (elementSelectionKeys.includes(event.key) && isSelectable) {\n        var unselect = event.key === 'Escape';\n\n        if (unselect) {\n          var _nodeRef$current;\n\n          (_nodeRef$current = nodeRef.current) === null || _nodeRef$current === void 0 ? void 0 : _nodeRef$current.blur();\n        }\n\n        handleNodeClick({\n          id: id,\n          store: store,\n          unselect: unselect\n        });\n      } else if (!disableKeyboardA11y && isDraggable && selected && Object.prototype.hasOwnProperty.call(arrowKeyDiffs, event.key)) {\n        store.setState({\n          ariaLiveMessage: \"Moved selected node \".concat(event.key.replace('Arrow', '').toLowerCase(), \". New position, x: \").concat(~~xPos, \", y: \").concat(~~yPos)\n        }); // by default a node moves 5px on each key press, or 20px if shift is pressed\n        // if snap grid is enabled, we use that for the velocity.\n\n        var xVelo = snapToGrid ? snapGrid[0] : 5;\n        var yVelo = snapToGrid ? snapGrid[1] : 5;\n        var factor = event.shiftKey ? 4 : 1;\n        updatePositions({\n          x: arrowKeyDiffs[event.key].x * xVelo * factor,\n          y: arrowKeyDiffs[event.key].y * yVelo * factor\n        });\n      }\n    };\n\n    useEffect(function () {\n      if (nodeRef.current && !hidden) {\n        var currNode = nodeRef.current;\n        resizeObserver === null || resizeObserver === void 0 ? void 0 : resizeObserver.observe(currNode);\n        return function () {\n          return resizeObserver === null || resizeObserver === void 0 ? void 0 : resizeObserver.unobserve(currNode);\n        };\n      }\n    }, [hidden]);\n    useEffect(function () {\n      // when the user programmatically changes the source or handle position, we re-initialize the node\n      var typeChanged = prevType.current !== type;\n      var sourcePosChanged = prevSourcePosition.current !== sourcePosition;\n      var targetPosChanged = prevTargetPosition.current !== targetPosition;\n\n      if (nodeRef.current && (typeChanged || sourcePosChanged || targetPosChanged)) {\n        if (typeChanged) {\n          prevType.current = type;\n        }\n\n        if (sourcePosChanged) {\n          prevSourcePosition.current = sourcePosition;\n        }\n\n        if (targetPosChanged) {\n          prevTargetPosition.current = targetPosition;\n        }\n\n        store.getState().updateNodeDimensions([{\n          id: id,\n          nodeElement: nodeRef.current,\n          forceUpdate: true\n        }]);\n      }\n    }, [id, type, sourcePosition, targetPosition]);\n    var dragging = useDrag({\n      nodeRef: nodeRef,\n      disabled: hidden || !isDraggable,\n      noDragClassName: noDragClassName,\n      handleSelector: dragHandle,\n      nodeId: id,\n      isSelectable: isSelectable,\n      selectNodesOnDrag: selectNodesOnDrag\n    });\n\n    if (hidden) {\n      return null;\n    }\n\n    return jsx(\"div\", {\n      className: cc(['react-flow__node', \"react-flow__node-\".concat(type), _defineProperty({}, noPanClassName, isDraggable), className, {\n        selected: selected,\n        selectable: isSelectable,\n        parent: isParent,\n        dragging: dragging\n      }]),\n      ref: nodeRef,\n      style: _objectSpread({\n        zIndex: zIndex,\n        transform: \"translate(\".concat(xPosOrigin, \"px,\").concat(yPosOrigin, \"px)\"),\n        pointerEvents: hasPointerEvents ? 'all' : 'none',\n        visibility: initialized ? 'visible' : 'hidden'\n      }, style),\n      \"data-id\": id,\n      \"data-testid\": \"rf__node-\".concat(id),\n      onMouseEnter: onMouseEnterHandler,\n      onMouseMove: onMouseMoveHandler,\n      onMouseLeave: onMouseLeaveHandler,\n      onContextMenu: onContextMenuHandler,\n      onClick: onSelectNodeHandler,\n      onDoubleClick: onDoubleClickHandler,\n      onKeyDown: isFocusable ? onKeyDown : undefined,\n      tabIndex: isFocusable ? 0 : undefined,\n      role: isFocusable ? 'button' : undefined,\n      \"aria-describedby\": disableKeyboardA11y ? undefined : \"\".concat(ARIA_NODE_DESC_KEY, \"-\").concat(rfId),\n      \"aria-label\": ariaLabel,\n      children: jsx(Provider, {\n        value: id,\n        children: jsx(NodeComponent, {\n          id: id,\n          data: data,\n          type: type,\n          xPos: xPos,\n          yPos: yPos,\n          selected: selected,\n          isConnectable: isConnectable,\n          sourcePosition: sourcePosition,\n          targetPosition: targetPosition,\n          dragging: dragging,\n          dragHandle: dragHandle,\n          zIndex: zIndex\n        })\n      })\n    });\n  };\n\n  NodeWrapper.displayName = 'NodeWrapper';\n  return memo(NodeWrapper);\n};\n\nfunction createNodeTypes(nodeTypes) {\n  var standardTypes = {\n    input: wrapNode(nodeTypes.input || InputNode$1),\n    default: wrapNode(nodeTypes.default || DefaultNode$1),\n    output: wrapNode(nodeTypes.output || OutputNode$1),\n    group: wrapNode(nodeTypes.group || GroupNode)\n  };\n  var wrappedTypes = {};\n  var specialTypes = Object.keys(nodeTypes).filter(function (k) {\n    return !['input', 'default', 'output', 'group'].includes(k);\n  }).reduce(function (res, key) {\n    res[key] = wrapNode(nodeTypes[key] || DefaultNode$1);\n    return res;\n  }, wrappedTypes);\n  return _objectSpread(_objectSpread({}, standardTypes), specialTypes);\n}\n\nvar getPositionWithOrigin = function getPositionWithOrigin(_ref49) {\n  var x = _ref49.x,\n      y = _ref49.y,\n      width = _ref49.width,\n      height = _ref49.height,\n      origin = _ref49.origin;\n\n  if (!width || !height) {\n    return {\n      x: x,\n      y: y\n    };\n  }\n\n  if (origin[0] < 0 || origin[1] < 0 || origin[0] > 1 || origin[1] > 1) {\n    devWarn('nodeOrigin must be between 0 and 1');\n    return {\n      x: x,\n      y: y\n    };\n  }\n\n  return {\n    x: x - width * origin[0],\n    y: y - height * origin[1]\n  };\n};\n\nvar doc = typeof document !== 'undefined' ? document : null; // the keycode can be a string 'a' or an array of strings ['a', 'a+d']\n// a string means a single key 'a' or a combination when '+' is used 'a+d'\n// an array means different possibilites. Explainer: ['a', 'd+s'] here the\n// user can use the single key 'a' or the combination 'd' + 's'\n\nvar useKeyPress = function useKeyPress() {\n  var keyCode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    target: doc\n  };\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      keyPressed = _useState10[0],\n      setKeyPressed = _useState10[1]; // we need to remember the pressed keys in order to support combinations\n\n\n  var pressedKeys = useRef(new Set([])); // keyCodes = array with single keys [['a']] or key combinations [['a', 's']]\n  // keysToWatch = array with all keys flattened ['a', 'd', 'ShiftLeft']\n  // used to check if we store event.code or event.key. When the code is in the list of keysToWatch\n  // we use the code otherwise the key. Explainer: When you press the left \"command\" key, the code is \"MetaLeft\"\n  // and the key is \"Meta\". We want users to be able to pass keys and codes so we assume that the key is meant when\n  // we can't find it in the list of keysToWatch.\n\n  var _useMemo = useMemo(function () {\n    if (keyCode !== null) {\n      var keyCodeArr = Array.isArray(keyCode) ? keyCode : [keyCode];\n      var keys = keyCodeArr.filter(function (kc) {\n        return typeof kc === 'string';\n      }).map(function (kc) {\n        return kc.split('+');\n      });\n      var keysFlat = keys.reduce(function (res, item) {\n        return res.concat.apply(res, _toConsumableArray(item));\n      }, []);\n      return [keys, keysFlat];\n    }\n\n    return [[], []];\n  }, [keyCode]),\n      _useMemo2 = _slicedToArray(_useMemo, 2),\n      keyCodes = _useMemo2[0],\n      keysToWatch = _useMemo2[1];\n\n  useEffect(function () {\n    if (keyCode !== null) {\n      var _options$target, _options$target2;\n\n      var downHandler = function downHandler(event) {\n        if (isInputDOMNode(event)) {\n          return false;\n        }\n\n        var keyOrCode = useKeyOrCode(event.code, keysToWatch);\n        pressedKeys.current.add(event[keyOrCode]);\n\n        if (isMatchingKey(keyCodes, pressedKeys.current, false)) {\n          event.preventDefault();\n          setKeyPressed(true);\n        }\n      };\n\n      var upHandler = function upHandler(event) {\n        if (isInputDOMNode(event)) {\n          return false;\n        }\n\n        var keyOrCode = useKeyOrCode(event.code, keysToWatch);\n\n        if (isMatchingKey(keyCodes, pressedKeys.current, true)) {\n          setKeyPressed(false);\n          pressedKeys.current.clear();\n        } else {\n          pressedKeys.current.delete(event[keyOrCode]);\n        }\n      };\n\n      var resetHandler = function resetHandler() {\n        pressedKeys.current.clear();\n        setKeyPressed(false);\n      };\n\n      options === null || options === void 0 ? void 0 : (_options$target = options.target) === null || _options$target === void 0 ? void 0 : _options$target.addEventListener('keydown', downHandler);\n      options === null || options === void 0 ? void 0 : (_options$target2 = options.target) === null || _options$target2 === void 0 ? void 0 : _options$target2.addEventListener('keyup', upHandler);\n      window.addEventListener('blur', resetHandler);\n      return function () {\n        var _options$target3, _options$target4;\n\n        options === null || options === void 0 ? void 0 : (_options$target3 = options.target) === null || _options$target3 === void 0 ? void 0 : _options$target3.removeEventListener('keydown', downHandler);\n        options === null || options === void 0 ? void 0 : (_options$target4 = options.target) === null || _options$target4 === void 0 ? void 0 : _options$target4.removeEventListener('keyup', upHandler);\n        window.removeEventListener('blur', resetHandler);\n      };\n    }\n  }, [keyCode, setKeyPressed]);\n  return keyPressed;\n}; // utils\n\n\nfunction isMatchingKey(keyCodes, pressedKeys, isUp) {\n  return keyCodes // we only want to compare same sizes of keyCode definitions\n  // and pressed keys. When the user specified 'Meta' as a key somewhere\n  // this would also be truthy without this filter when user presses 'Meta' + 'r'\n  .filter(function (keys) {\n    return isUp || keys.length === pressedKeys.size;\n  }) // since we want to support multiple possibilities only one of the\n  // combinations need to be part of the pressed keys\n  .some(function (keys) {\n    return keys.every(function (k) {\n      return pressedKeys.has(k);\n    });\n  });\n}\n\nfunction useKeyOrCode(eventCode, keysToWatch) {\n  return keysToWatch.includes(eventCode) ? 'code' : 'key';\n}\n\nfunction isInputDOMNode(event) {\n  var _event$composedPath;\n\n  // using composed path for handling shadow dom\n  var target = ((_event$composedPath = event.composedPath) === null || _event$composedPath === void 0 ? void 0 : _event$composedPath.call(event)[0]) || event.target;\n  return ['INPUT', 'SELECT', 'TEXTAREA'].includes(target === null || target === void 0 ? void 0 : target.nodeName) || (target === null || target === void 0 ? void 0 : target.hasAttribute('contenteditable')) || !!(target !== null && target !== void 0 && target.closest('.nokey'));\n}\n\nfunction calculateXYZPosition(node, nodeInternals, parentNodes, result) {\n  var _result$x, _parentNode$position$, _parentNode$position, _result$y, _parentNode$position$2, _parentNode$position2, _parentNode$internals, _parentNode$internals2, _result$z, _parentNode$internals3, _parentNode$internals4, _result$z2;\n\n  if (!node.parentNode) {\n    return result;\n  }\n\n  var parentNode = nodeInternals.get(node.parentNode);\n  return calculateXYZPosition(parentNode, nodeInternals, parentNodes, {\n    x: ((_result$x = result.x) !== null && _result$x !== void 0 ? _result$x : 0) + ((_parentNode$position$ = (_parentNode$position = parentNode.position) === null || _parentNode$position === void 0 ? void 0 : _parentNode$position.x) !== null && _parentNode$position$ !== void 0 ? _parentNode$position$ : 0),\n    y: ((_result$y = result.y) !== null && _result$y !== void 0 ? _result$y : 0) + ((_parentNode$position$2 = (_parentNode$position2 = parentNode.position) === null || _parentNode$position2 === void 0 ? void 0 : _parentNode$position2.y) !== null && _parentNode$position$2 !== void 0 ? _parentNode$position$2 : 0),\n    z: ((_parentNode$internals = (_parentNode$internals2 = parentNode[internalsSymbol]) === null || _parentNode$internals2 === void 0 ? void 0 : _parentNode$internals2.z) !== null && _parentNode$internals !== void 0 ? _parentNode$internals : 0) > ((_result$z = result.z) !== null && _result$z !== void 0 ? _result$z : 0) ? (_parentNode$internals3 = (_parentNode$internals4 = parentNode[internalsSymbol]) === null || _parentNode$internals4 === void 0 ? void 0 : _parentNode$internals4.z) !== null && _parentNode$internals3 !== void 0 ? _parentNode$internals3 : 0 : (_result$z2 = result.z) !== null && _result$z2 !== void 0 ? _result$z2 : 0\n  });\n}\n\nfunction createNodeInternals(nodes, nodeInternals) {\n  var nextNodeInternals = new Map();\n  var parentNodes = {};\n  nodes.forEach(function (node) {\n    var _currInternals$intern;\n\n    var z = isNumeric(node.zIndex) ? node.zIndex : node.selected ? 1000 : 0;\n    var currInternals = nodeInternals.get(node.id);\n\n    var internals = _objectSpread(_objectSpread({\n      width: currInternals === null || currInternals === void 0 ? void 0 : currInternals.width,\n      height: currInternals === null || currInternals === void 0 ? void 0 : currInternals.height\n    }, node), {}, {\n      positionAbsolute: {\n        x: node.position.x,\n        y: node.position.y\n      }\n    });\n\n    if (node.parentNode) {\n      internals.parentNode = node.parentNode;\n      parentNodes[node.parentNode] = true;\n    }\n\n    Object.defineProperty(internals, internalsSymbol, {\n      enumerable: false,\n      value: {\n        handleBounds: currInternals === null || currInternals === void 0 ? void 0 : (_currInternals$intern = currInternals[internalsSymbol]) === null || _currInternals$intern === void 0 ? void 0 : _currInternals$intern.handleBounds,\n        z: z\n      }\n    });\n    nextNodeInternals.set(node.id, internals);\n  });\n  nextNodeInternals.forEach(function (node) {\n    if (node.parentNode && !nextNodeInternals.has(node.parentNode)) {\n      throw new Error(\"Parent node \".concat(node.parentNode, \" not found\"));\n    }\n\n    if (node.parentNode || parentNodes[node.id]) {\n      var _node$internalsSymbol2, _node$internalsSymbol3;\n\n      var _calculateXYZPosition = calculateXYZPosition(node, nextNodeInternals, parentNodes, _objectSpread(_objectSpread({}, node.position), {}, {\n        z: (_node$internalsSymbol2 = (_node$internalsSymbol3 = node[internalsSymbol]) === null || _node$internalsSymbol3 === void 0 ? void 0 : _node$internalsSymbol3.z) !== null && _node$internalsSymbol2 !== void 0 ? _node$internalsSymbol2 : 0\n      })),\n          x = _calculateXYZPosition.x,\n          y = _calculateXYZPosition.y,\n          z = _calculateXYZPosition.z;\n\n      node.positionAbsolute = {\n        x: x,\n        y: y\n      };\n      node[internalsSymbol].z = z;\n\n      if (parentNodes[node.id]) {\n        node[internalsSymbol].isParent = true;\n      }\n    }\n  });\n  return nextNodeInternals;\n}\n\nfunction _fitView(get) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _get = get(),\n      nodeInternals = _get.nodeInternals,\n      width = _get.width,\n      height = _get.height,\n      minZoom = _get.minZoom,\n      maxZoom = _get.maxZoom,\n      d3Zoom = _get.d3Zoom,\n      d3Selection = _get.d3Selection,\n      fitViewOnInitDone = _get.fitViewOnInitDone,\n      fitViewOnInit = _get.fitViewOnInit;\n\n  if (options.initial && !fitViewOnInitDone && fitViewOnInit || !options.initial) {\n    if (d3Zoom && d3Selection) {\n      var nodes = Array.from(nodeInternals.values()).filter(function (n) {\n        return options.includeHiddenNodes ? n.width && n.height : !n.hidden;\n      });\n      var nodesInitialized = nodes.every(function (n) {\n        return n.width && n.height;\n      });\n\n      if (nodes.length > 0 && nodesInitialized) {\n        var _options$minZoom, _options$maxZoom, _options$padding;\n\n        var bounds = getRectOfNodes(nodes);\n\n        var _getTransformForBound = getTransformForBounds(bounds, width, height, (_options$minZoom = options.minZoom) !== null && _options$minZoom !== void 0 ? _options$minZoom : minZoom, (_options$maxZoom = options.maxZoom) !== null && _options$maxZoom !== void 0 ? _options$maxZoom : maxZoom, (_options$padding = options.padding) !== null && _options$padding !== void 0 ? _options$padding : 0.1),\n            _getTransformForBound2 = _slicedToArray(_getTransformForBound, 3),\n            x = _getTransformForBound2[0],\n            y = _getTransformForBound2[1],\n            _zoom = _getTransformForBound2[2];\n\n        var nextTransform = zoomIdentity.translate(x, y).scale(_zoom);\n\n        if (typeof options.duration === 'number' && options.duration > 0) {\n          d3Zoom.transform(getD3Transition(d3Selection, options.duration), nextTransform);\n        } else {\n          d3Zoom.transform(d3Selection, nextTransform);\n        }\n\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction handleControlledNodeSelectionChange(nodeChanges, nodeInternals) {\n  nodeChanges.forEach(function (change) {\n    var node = nodeInternals.get(change.id);\n\n    if (node) {\n      var _objectSpread2;\n\n      nodeInternals.set(node.id, _objectSpread(_objectSpread({}, node), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, internalsSymbol, node[internalsSymbol]), _defineProperty(_objectSpread2, \"selected\", change.selected), _objectSpread2)));\n    }\n  });\n  return new Map(nodeInternals);\n}\n\nfunction handleControlledEdgeSelectionChange(edgeChanges, edges) {\n  return edges.map(function (e) {\n    var change = edgeChanges.find(function (change) {\n      return change.id === e.id;\n    });\n\n    if (change) {\n      e.selected = change.selected;\n    }\n\n    return e;\n  });\n}\n\nfunction updateNodesAndEdgesSelections(_ref50) {\n  var changedNodes = _ref50.changedNodes,\n      changedEdges = _ref50.changedEdges,\n      get = _ref50.get,\n      set = _ref50.set;\n\n  var _get2 = get(),\n      nodeInternals = _get2.nodeInternals,\n      edges = _get2.edges,\n      onNodesChange = _get2.onNodesChange,\n      onEdgesChange = _get2.onEdgesChange,\n      hasDefaultNodes = _get2.hasDefaultNodes,\n      hasDefaultEdges = _get2.hasDefaultEdges;\n\n  if (changedNodes !== null && changedNodes !== void 0 && changedNodes.length) {\n    if (hasDefaultNodes) {\n      set({\n        nodeInternals: handleControlledNodeSelectionChange(changedNodes, nodeInternals)\n      });\n    }\n\n    onNodesChange === null || onNodesChange === void 0 ? void 0 : onNodesChange(changedNodes);\n  }\n\n  if (changedEdges !== null && changedEdges !== void 0 && changedEdges.length) {\n    if (hasDefaultEdges) {\n      set({\n        edges: handleControlledEdgeSelectionChange(changedEdges, edges)\n      });\n    }\n\n    onEdgesChange === null || onEdgesChange === void 0 ? void 0 : onEdgesChange(changedEdges);\n  }\n} // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n\nvar noop = function noop() {};\n\nvar initialViewportHelper = {\n  zoomIn: noop,\n  zoomOut: noop,\n  zoomTo: noop,\n  getZoom: function getZoom() {\n    return 1;\n  },\n  setViewport: noop,\n  getViewport: function getViewport() {\n    return {\n      x: 0,\n      y: 0,\n      zoom: 1\n    };\n  },\n  fitView: noop,\n  setCenter: noop,\n  fitBounds: noop,\n  project: function project(position) {\n    return position;\n  },\n  viewportInitialized: false\n};\n\nvar selector$9 = function selector$9(s) {\n  return {\n    d3Zoom: s.d3Zoom,\n    d3Selection: s.d3Selection\n  };\n};\n\nvar useViewportHelper = function useViewportHelper() {\n  var store = useStoreApi();\n\n  var _useStore4 = useStore(selector$9, shallow),\n      d3Zoom = _useStore4.d3Zoom,\n      d3Selection = _useStore4.d3Selection;\n\n  var viewportHelperFunctions = useMemo(function () {\n    if (d3Selection && d3Zoom) {\n      return {\n        zoomIn: function zoomIn(options) {\n          return d3Zoom.scaleBy(getD3Transition(d3Selection, options === null || options === void 0 ? void 0 : options.duration), 1.2);\n        },\n        zoomOut: function zoomOut(options) {\n          return d3Zoom.scaleBy(getD3Transition(d3Selection, options === null || options === void 0 ? void 0 : options.duration), 1 / 1.2);\n        },\n        zoomTo: function zoomTo(zoomLevel, options) {\n          return d3Zoom.scaleTo(getD3Transition(d3Selection, options === null || options === void 0 ? void 0 : options.duration), zoomLevel);\n        },\n        getZoom: function getZoom() {\n          return store.getState().transform[2];\n        },\n        setViewport: function setViewport(transform, options) {\n          var _transform$x, _transform$y, _transform$zoom;\n\n          var _store$getState$trans = _slicedToArray(store.getState().transform, 3),\n              x = _store$getState$trans[0],\n              y = _store$getState$trans[1],\n              zoom = _store$getState$trans[2];\n\n          var nextTransform = zoomIdentity.translate((_transform$x = transform.x) !== null && _transform$x !== void 0 ? _transform$x : x, (_transform$y = transform.y) !== null && _transform$y !== void 0 ? _transform$y : y).scale((_transform$zoom = transform.zoom) !== null && _transform$zoom !== void 0 ? _transform$zoom : zoom);\n          d3Zoom.transform(getD3Transition(d3Selection, options === null || options === void 0 ? void 0 : options.duration), nextTransform);\n        },\n        getViewport: function getViewport() {\n          var _store$getState$trans2 = _slicedToArray(store.getState().transform, 3),\n              x = _store$getState$trans2[0],\n              y = _store$getState$trans2[1],\n              zoom = _store$getState$trans2[2];\n\n          return {\n            x: x,\n            y: y,\n            zoom: zoom\n          };\n        },\n        fitView: function fitView(options) {\n          return _fitView(store.getState, options);\n        },\n        setCenter: function setCenter(x, y, options) {\n          var _store$getState14 = store.getState(),\n              width = _store$getState14.width,\n              height = _store$getState14.height,\n              maxZoom = _store$getState14.maxZoom;\n\n          var nextZoom = typeof (options === null || options === void 0 ? void 0 : options.zoom) !== 'undefined' ? options.zoom : maxZoom;\n          var centerX = width / 2 - x * nextZoom;\n          var centerY = height / 2 - y * nextZoom;\n          var transform = zoomIdentity.translate(centerX, centerY).scale(nextZoom);\n          d3Zoom.transform(getD3Transition(d3Selection, options === null || options === void 0 ? void 0 : options.duration), transform);\n        },\n        fitBounds: function fitBounds(bounds, options) {\n          var _options$padding2;\n\n          var _store$getState15 = store.getState(),\n              width = _store$getState15.width,\n              height = _store$getState15.height,\n              minZoom = _store$getState15.minZoom,\n              maxZoom = _store$getState15.maxZoom;\n\n          var _getTransformForBound3 = getTransformForBounds(bounds, width, height, minZoom, maxZoom, (_options$padding2 = options === null || options === void 0 ? void 0 : options.padding) !== null && _options$padding2 !== void 0 ? _options$padding2 : 0.1),\n              _getTransformForBound4 = _slicedToArray(_getTransformForBound3, 3),\n              x = _getTransformForBound4[0],\n              y = _getTransformForBound4[1],\n              zoom = _getTransformForBound4[2];\n\n          var transform = zoomIdentity.translate(x, y).scale(zoom);\n          d3Zoom.transform(getD3Transition(d3Selection, options === null || options === void 0 ? void 0 : options.duration), transform);\n        },\n        project: function project(position) {\n          var _store$getState16 = store.getState(),\n              transform = _store$getState16.transform,\n              snapToGrid = _store$getState16.snapToGrid,\n              snapGrid = _store$getState16.snapGrid;\n\n          return pointToRendererPoint(position, transform, snapToGrid, snapGrid);\n        },\n        viewportInitialized: true\n      };\n    }\n\n    return initialViewportHelper;\n  }, [d3Zoom, d3Selection]);\n  return viewportHelperFunctions;\n};\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n\n\nfunction useReactFlow() {\n  var viewportHelper = useViewportHelper();\n  var store = useStoreApi();\n  var getNodes = useCallback(function () {\n    var _store$getState17 = store.getState(),\n        nodeInternals = _store$getState17.nodeInternals;\n\n    var nodes = Array.from(nodeInternals.values());\n    return nodes.map(function (n) {\n      return _objectSpread({}, n);\n    });\n  }, []);\n  var getNode = useCallback(function (id) {\n    var _store$getState18 = store.getState(),\n        nodeInternals = _store$getState18.nodeInternals;\n\n    return nodeInternals.get(id);\n  }, []);\n  var getEdges = useCallback(function () {\n    var _store$getState19 = store.getState(),\n        _store$getState19$edg = _store$getState19.edges,\n        edges = _store$getState19$edg === void 0 ? [] : _store$getState19$edg;\n\n    return edges.map(function (e) {\n      return _objectSpread({}, e);\n    });\n  }, []);\n  var getEdge = useCallback(function (id) {\n    var _store$getState20 = store.getState(),\n        _store$getState20$edg = _store$getState20.edges,\n        edges = _store$getState20$edg === void 0 ? [] : _store$getState20$edg;\n\n    return edges.find(function (e) {\n      return e.id === id;\n    });\n  }, []);\n  var setNodes = useCallback(function (payload) {\n    var _store$getState21 = store.getState(),\n        nodeInternals = _store$getState21.nodeInternals,\n        setNodes = _store$getState21.setNodes,\n        hasDefaultNodes = _store$getState21.hasDefaultNodes,\n        onNodesChange = _store$getState21.onNodesChange;\n\n    var nodes = Array.from(nodeInternals.values());\n    var nextNodes = typeof payload === 'function' ? payload(nodes) : payload;\n\n    if (hasDefaultNodes) {\n      setNodes(nextNodes);\n    } else if (onNodesChange) {\n      var changes = nextNodes.length === 0 ? nodes.map(function (node) {\n        return {\n          type: 'remove',\n          id: node.id\n        };\n      }) : nextNodes.map(function (node) {\n        return {\n          item: node,\n          type: 'reset'\n        };\n      });\n      onNodesChange(changes);\n    }\n  }, []);\n  var setEdges = useCallback(function (payload) {\n    var _store$getState22 = store.getState(),\n        _store$getState22$edg = _store$getState22.edges,\n        edges = _store$getState22$edg === void 0 ? [] : _store$getState22$edg,\n        setEdges = _store$getState22.setEdges,\n        hasDefaultEdges = _store$getState22.hasDefaultEdges,\n        onEdgesChange = _store$getState22.onEdgesChange;\n\n    var nextEdges = typeof payload === 'function' ? payload(edges) : payload;\n\n    if (hasDefaultEdges) {\n      setEdges(nextEdges);\n    } else if (onEdgesChange) {\n      var changes = nextEdges.length === 0 ? edges.map(function (edge) {\n        return {\n          type: 'remove',\n          id: edge.id\n        };\n      }) : nextEdges.map(function (edge) {\n        return {\n          item: edge,\n          type: 'reset'\n        };\n      });\n      onEdgesChange(changes);\n    }\n  }, []);\n  var addNodes = useCallback(function (payload) {\n    var nodes = Array.isArray(payload) ? payload : [payload];\n\n    var _store$getState23 = store.getState(),\n        nodeInternals = _store$getState23.nodeInternals,\n        setNodes = _store$getState23.setNodes,\n        hasDefaultNodes = _store$getState23.hasDefaultNodes,\n        onNodesChange = _store$getState23.onNodesChange;\n\n    if (hasDefaultNodes) {\n      var currentNodes = Array.from(nodeInternals.values());\n      var nextNodes = [].concat(currentNodes, _toConsumableArray(nodes));\n      setNodes(nextNodes);\n    } else if (onNodesChange) {\n      var changes = nodes.map(function (node) {\n        return {\n          item: node,\n          type: 'add'\n        };\n      });\n      onNodesChange(changes);\n    }\n  }, []);\n  var addEdges = useCallback(function (payload) {\n    var nextEdges = Array.isArray(payload) ? payload : [payload];\n\n    var _store$getState24 = store.getState(),\n        _store$getState24$edg = _store$getState24.edges,\n        edges = _store$getState24$edg === void 0 ? [] : _store$getState24$edg,\n        setEdges = _store$getState24.setEdges,\n        hasDefaultEdges = _store$getState24.hasDefaultEdges,\n        onEdgesChange = _store$getState24.onEdgesChange;\n\n    if (hasDefaultEdges) {\n      setEdges([].concat(_toConsumableArray(edges), _toConsumableArray(nextEdges)));\n    } else if (onEdgesChange) {\n      var changes = nextEdges.map(function (edge) {\n        return {\n          item: edge,\n          type: 'add'\n        };\n      });\n      onEdgesChange(changes);\n    }\n  }, []);\n  var toObject = useCallback(function () {\n    var _store$getState25 = store.getState(),\n        nodeInternals = _store$getState25.nodeInternals,\n        _store$getState25$edg = _store$getState25.edges,\n        edges = _store$getState25$edg === void 0 ? [] : _store$getState25$edg,\n        transform = _store$getState25.transform;\n\n    var nodes = Array.from(nodeInternals.values());\n\n    var _transform = _slicedToArray(transform, 3),\n        x = _transform[0],\n        y = _transform[1],\n        zoom = _transform[2];\n\n    return {\n      nodes: nodes.map(function (n) {\n        return _objectSpread({}, n);\n      }),\n      edges: edges.map(function (e) {\n        return _objectSpread({}, e);\n      }),\n      viewport: {\n        x: x,\n        y: y,\n        zoom: zoom\n      }\n    };\n  }, []);\n  var deleteElements = useCallback(function (_ref51) {\n    var nodesDeleted = _ref51.nodes,\n        edgesDeleted = _ref51.edges;\n\n    var _store$getState26 = store.getState(),\n        nodeInternals = _store$getState26.nodeInternals,\n        edges = _store$getState26.edges,\n        hasDefaultNodes = _store$getState26.hasDefaultNodes,\n        hasDefaultEdges = _store$getState26.hasDefaultEdges,\n        onNodesDelete = _store$getState26.onNodesDelete,\n        onEdgesDelete = _store$getState26.onEdgesDelete,\n        onNodesChange = _store$getState26.onNodesChange,\n        onEdgesChange = _store$getState26.onEdgesChange;\n\n    var nodes = Array.from(nodeInternals.values());\n    var nodeIds = (nodesDeleted || []).map(function (node) {\n      return node.id;\n    });\n    var edgeIds = (edgesDeleted || []).map(function (edge) {\n      return edge.id;\n    });\n    var nodesToRemove = nodes.reduce(function (res, node) {\n      var parentHit = !nodeIds.includes(node.id) && node.parentNode && res.find(function (n) {\n        return n.id === node.parentNode;\n      });\n      var deletable = typeof node.deletable === 'boolean' ? node.deletable : true;\n\n      if (deletable && (nodeIds.includes(node.id) || parentHit)) {\n        res.push(node);\n      }\n\n      return res;\n    }, []);\n    var deletableEdges = edges.filter(function (e) {\n      return typeof e.deletable === 'boolean' ? e.deletable : true;\n    });\n    var initialHitEdges = deletableEdges.filter(function (e) {\n      return edgeIds.includes(e.id);\n    });\n\n    if (nodesToRemove || initialHitEdges) {\n      var connectedEdges = getConnectedEdges(nodesToRemove, deletableEdges);\n      var edgesToRemove = [].concat(_toConsumableArray(initialHitEdges), _toConsumableArray(connectedEdges));\n      var edgeIdsToRemove = edgesToRemove.reduce(function (res, edge) {\n        if (!res.includes(edge.id)) {\n          res.push(edge.id);\n        }\n\n        return res;\n      }, []);\n\n      if (hasDefaultEdges || hasDefaultNodes) {\n        if (hasDefaultEdges) {\n          store.setState({\n            edges: edges.filter(function (e) {\n              return !edgeIdsToRemove.includes(e.id);\n            })\n          });\n        }\n\n        if (hasDefaultNodes) {\n          nodesToRemove.forEach(function (node) {\n            nodeInternals.delete(node.id);\n          });\n          store.setState({\n            nodeInternals: new Map(nodeInternals)\n          });\n        }\n      }\n\n      if (edgeIdsToRemove.length > 0) {\n        onEdgesDelete === null || onEdgesDelete === void 0 ? void 0 : onEdgesDelete(edgesToRemove);\n\n        if (onEdgesChange) {\n          onEdgesChange(edgeIdsToRemove.map(function (id) {\n            return {\n              id: id,\n              type: 'remove'\n            };\n          }));\n        }\n      }\n\n      if (nodesToRemove.length > 0) {\n        onNodesDelete === null || onNodesDelete === void 0 ? void 0 : onNodesDelete(nodesToRemove);\n\n        if (onNodesChange) {\n          var nodeChanges = nodesToRemove.map(function (n) {\n            return {\n              id: n.id,\n              type: 'remove'\n            };\n          });\n          onNodesChange(nodeChanges);\n        }\n      }\n    }\n  }, []);\n  var getNodeRect = useCallback(function (nodeOrRect) {\n    var isRect = isRectObject(nodeOrRect);\n    var node = isRect ? null : store.getState().nodeInternals.get(nodeOrRect.id);\n    var nodeRect = isRect ? nodeOrRect : nodeToRect(node);\n    return [nodeRect, node, isRect];\n  }, []);\n  var getIntersectingNodes = useCallback(function (nodeOrRect) {\n    var partially = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var nodes = arguments.length > 2 ? arguments[2] : undefined;\n\n    var _getNodeRect = getNodeRect(nodeOrRect),\n        _getNodeRect2 = _slicedToArray(_getNodeRect, 3),\n        nodeRect = _getNodeRect2[0],\n        node = _getNodeRect2[1],\n        isRect = _getNodeRect2[2];\n\n    if (!nodeRect) {\n      return [];\n    }\n\n    return (nodes || Array.from(store.getState().nodeInternals.values())).filter(function (n) {\n      if (!isRect && (n.id === node.id || !n.positionAbsolute)) {\n        return false;\n      }\n\n      var currNodeRect = nodeToRect(n);\n      var overlappingArea = getOverlappingArea(currNodeRect, nodeRect);\n      var partiallyVisible = partially && overlappingArea > 0;\n      return partiallyVisible || overlappingArea >= nodeOrRect.width * nodeOrRect.height;\n    });\n  }, []);\n  var isNodeIntersecting = useCallback(function (nodeOrRect, area) {\n    var partially = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n    var _getNodeRect3 = getNodeRect(nodeOrRect),\n        _getNodeRect4 = _slicedToArray(_getNodeRect3, 1),\n        nodeRect = _getNodeRect4[0];\n\n    if (!nodeRect) {\n      return false;\n    }\n\n    var overlappingArea = getOverlappingArea(nodeRect, area);\n    var partiallyVisible = partially && overlappingArea > 0;\n    return partiallyVisible || overlappingArea >= nodeOrRect.width * nodeOrRect.height;\n  }, []);\n  return useMemo(function () {\n    return _objectSpread(_objectSpread({}, viewportHelper), {}, {\n      getNodes: getNodes,\n      getNode: getNode,\n      getEdges: getEdges,\n      getEdge: getEdge,\n      setNodes: setNodes,\n      setEdges: setEdges,\n      addNodes: addNodes,\n      addEdges: addEdges,\n      toObject: toObject,\n      deleteElements: deleteElements,\n      getIntersectingNodes: getIntersectingNodes,\n      isNodeIntersecting: isNodeIntersecting\n    });\n  }, [viewportHelper, getNodes, getNode, getEdges, getEdge, setNodes, setEdges, addNodes, addEdges, toObject, deleteElements, getIntersectingNodes, isNodeIntersecting]);\n}\n\nvar useGlobalKeyHandler = function useGlobalKeyHandler(_ref52) {\n  var deleteKeyCode = _ref52.deleteKeyCode,\n      multiSelectionKeyCode = _ref52.multiSelectionKeyCode;\n  var store = useStoreApi();\n\n  var _useReactFlow = useReactFlow(),\n      deleteElements = _useReactFlow.deleteElements;\n\n  var deleteKeyPressed = useKeyPress(deleteKeyCode);\n  var multiSelectionKeyPressed = useKeyPress(multiSelectionKeyCode);\n  useEffect(function () {\n    if (deleteKeyPressed) {\n      var _store$getState27 = store.getState(),\n          nodeInternals = _store$getState27.nodeInternals,\n          edges = _store$getState27.edges;\n\n      var nodes = Array.from(nodeInternals.values());\n      var selectedNodes = nodes.filter(function (node) {\n        return node.selected;\n      });\n      var selectedEdges = edges.filter(function (edge) {\n        return edge.selected;\n      });\n      deleteElements({\n        nodes: selectedNodes,\n        edges: selectedEdges\n      });\n      store.setState({\n        nodesSelectionActive: false\n      });\n    }\n  }, [deleteKeyPressed]);\n  useEffect(function () {\n    store.setState({\n      multiSelectionActive: multiSelectionKeyPressed\n    });\n  }, [multiSelectionKeyPressed]);\n};\n\nfunction useResizeHandler(rendererNode) {\n  var store = useStoreApi();\n  useEffect(function () {\n    var resizeObserver;\n\n    var updateDimensions = function updateDimensions() {\n      if (!rendererNode.current) {\n        return;\n      }\n\n      var size = getDimensions(rendererNode.current);\n\n      if (size.height === 0 || size.width === 0) {\n        devWarn('The React Flow parent container needs a width and a height to render the graph. Help: https://reactflow.dev/error#400');\n      }\n\n      store.setState({\n        width: size.width || 500,\n        height: size.height || 500\n      });\n    };\n\n    updateDimensions();\n    window.addEventListener('resize', updateDimensions);\n\n    if (rendererNode.current) {\n      resizeObserver = new ResizeObserver(function () {\n        return updateDimensions();\n      });\n      resizeObserver.observe(rendererNode.current);\n    }\n\n    return function () {\n      window.removeEventListener('resize', updateDimensions);\n\n      if (resizeObserver && rendererNode.current) {\n        resizeObserver.unobserve(rendererNode.current);\n      }\n    };\n  }, []);\n}\n\nvar containerStyle = {\n  position: 'absolute',\n  width: '100%',\n  height: '100%',\n  top: 0,\n  left: 0\n};\n\nvar viewChanged = function viewChanged(prevViewport, eventViewport) {\n  return prevViewport.x !== eventViewport.x || prevViewport.y !== eventViewport.y || prevViewport.zoom !== eventViewport.k;\n};\n\nvar eventToFlowTransform = function eventToFlowTransform(eventViewport) {\n  return {\n    x: eventViewport.x,\n    y: eventViewport.y,\n    zoom: eventViewport.k\n  };\n};\n\nvar isWrappedWithClass = function isWrappedWithClass(event, className) {\n  return event.target.closest(\".\".concat(className));\n};\n\nvar selector$8 = function selector$8(s) {\n  return {\n    d3Zoom: s.d3Zoom,\n    d3Selection: s.d3Selection,\n    d3ZoomHandler: s.d3ZoomHandler\n  };\n};\n\nvar ZoomPane = function ZoomPane(_ref53) {\n  var onMove = _ref53.onMove,\n      onMoveStart = _ref53.onMoveStart,\n      onMoveEnd = _ref53.onMoveEnd,\n      _ref53$zoomOnScroll = _ref53.zoomOnScroll,\n      zoomOnScroll = _ref53$zoomOnScroll === void 0 ? true : _ref53$zoomOnScroll,\n      _ref53$zoomOnPinch = _ref53.zoomOnPinch,\n      zoomOnPinch = _ref53$zoomOnPinch === void 0 ? true : _ref53$zoomOnPinch,\n      _ref53$panOnScroll = _ref53.panOnScroll,\n      panOnScroll = _ref53$panOnScroll === void 0 ? false : _ref53$panOnScroll,\n      _ref53$panOnScrollSpe = _ref53.panOnScrollSpeed,\n      panOnScrollSpeed = _ref53$panOnScrollSpe === void 0 ? 0.5 : _ref53$panOnScrollSpe,\n      _ref53$panOnScrollMod = _ref53.panOnScrollMode,\n      panOnScrollMode = _ref53$panOnScrollMod === void 0 ? PanOnScrollMode.Free : _ref53$panOnScrollMod,\n      _ref53$zoomOnDoubleCl = _ref53.zoomOnDoubleClick,\n      zoomOnDoubleClick = _ref53$zoomOnDoubleCl === void 0 ? true : _ref53$zoomOnDoubleCl,\n      selectionKeyPressed = _ref53.selectionKeyPressed,\n      elementsSelectable = _ref53.elementsSelectable,\n      _ref53$panOnDrag = _ref53.panOnDrag,\n      panOnDrag = _ref53$panOnDrag === void 0 ? true : _ref53$panOnDrag,\n      defaultViewport = _ref53.defaultViewport,\n      translateExtent = _ref53.translateExtent,\n      minZoom = _ref53.minZoom,\n      maxZoom = _ref53.maxZoom,\n      zoomActivationKeyCode = _ref53.zoomActivationKeyCode,\n      _ref53$preventScrolli = _ref53.preventScrolling,\n      preventScrolling = _ref53$preventScrolli === void 0 ? true : _ref53$preventScrolli,\n      children = _ref53.children,\n      noWheelClassName = _ref53.noWheelClassName,\n      noPanClassName = _ref53.noPanClassName;\n  var timerId = useRef();\n  var store = useStoreApi();\n  var isZoomingOrPanning = useRef(false);\n  var zoomPane = useRef(null);\n  var prevTransform = useRef({\n    x: 0,\n    y: 0,\n    zoom: 0\n  });\n\n  var _useStore5 = useStore(selector$8, shallow),\n      d3Zoom = _useStore5.d3Zoom,\n      d3Selection = _useStore5.d3Selection,\n      d3ZoomHandler = _useStore5.d3ZoomHandler;\n\n  var zoomActivationKeyPressed = useKeyPress(zoomActivationKeyCode);\n  useResizeHandler(zoomPane);\n  useEffect(function () {\n    if (zoomPane.current) {\n      var d3ZoomInstance = zoom().scaleExtent([minZoom, maxZoom]).translateExtent(translateExtent);\n      var selection = select(zoomPane.current).call(d3ZoomInstance);\n      var clampedX = clamp(defaultViewport.x, translateExtent[0][0], translateExtent[1][0]);\n      var clampedY = clamp(defaultViewport.y, translateExtent[0][1], translateExtent[1][1]);\n      var clampedZoom = clamp(defaultViewport.zoom, minZoom, maxZoom);\n      var updatedTransform = zoomIdentity.translate(clampedX, clampedY).scale(clampedZoom);\n      d3ZoomInstance.transform(selection, updatedTransform);\n      store.setState({\n        d3Zoom: d3ZoomInstance,\n        d3Selection: selection,\n        d3ZoomHandler: selection.on('wheel.zoom'),\n        // we need to pass transform because zoom handler is not registered when we set the initial transform\n        transform: [clampedX, clampedY, clampedZoom],\n        domNode: zoomPane.current.closest('.react-flow')\n      });\n    }\n  }, []);\n  useEffect(function () {\n    if (d3Selection && d3Zoom) {\n      if (panOnScroll && !zoomActivationKeyPressed) {\n        d3Selection.on('wheel.zoom', function (event) {\n          if (isWrappedWithClass(event, noWheelClassName)) {\n            return false;\n          }\n\n          event.preventDefault();\n          event.stopImmediatePropagation();\n          var currentZoom = d3Selection.property('__zoom').k || 1;\n\n          if (event.ctrlKey && zoomOnPinch) {\n            var point = pointer(event); // taken from https://github.com/d3/d3-zoom/blob/master/src/zoom.js\n\n            var pinchDelta = -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * 10;\n\n            var _zoom2 = currentZoom * Math.pow(2, pinchDelta);\n\n            d3Zoom.scaleTo(d3Selection, _zoom2, point);\n            return;\n          } // increase scroll speed in firefox\n          // firefox: deltaMode === 1; chrome: deltaMode === 0\n\n\n          var deltaNormalize = event.deltaMode === 1 ? 20 : 1;\n          var deltaX = panOnScrollMode === PanOnScrollMode.Vertical ? 0 : event.deltaX * deltaNormalize;\n          var deltaY = panOnScrollMode === PanOnScrollMode.Horizontal ? 0 : event.deltaY * deltaNormalize;\n          d3Zoom.translateBy(d3Selection, -(deltaX / currentZoom) * panOnScrollSpeed, -(deltaY / currentZoom) * panOnScrollSpeed);\n        });\n      } else if (typeof d3ZoomHandler !== 'undefined') {\n        d3Selection.on('wheel.zoom', function (event, d) {\n          if (!preventScrolling || isWrappedWithClass(event, noWheelClassName)) {\n            return null;\n          }\n\n          event.preventDefault();\n          d3ZoomHandler.call(this, event, d);\n        });\n      }\n    }\n  }, [panOnScroll, panOnScrollMode, d3Selection, d3Zoom, d3ZoomHandler, zoomActivationKeyPressed, zoomOnPinch, preventScrolling, noWheelClassName]);\n  useEffect(function () {\n    if (d3Zoom) {\n      if (selectionKeyPressed && !isZoomingOrPanning.current) {\n        d3Zoom.on('zoom', null);\n      } else if (!selectionKeyPressed) {\n        d3Zoom.on('zoom', function (event) {\n          var _store$getState28 = store.getState(),\n              onViewportChange = _store$getState28.onViewportChange;\n\n          store.setState({\n            transform: [event.transform.x, event.transform.y, event.transform.k]\n          });\n\n          if (onMove || onViewportChange) {\n            var flowTransform = eventToFlowTransform(event.transform);\n            onViewportChange === null || onViewportChange === void 0 ? void 0 : onViewportChange(flowTransform);\n            onMove === null || onMove === void 0 ? void 0 : onMove(event.sourceEvent, flowTransform);\n          }\n        });\n      }\n    }\n  }, [selectionKeyPressed, d3Zoom, onMove]);\n  useEffect(function () {\n    if (d3Zoom) {\n      d3Zoom.on('start', function (event) {\n        var _event$sourceEvent;\n\n        if (!event.sourceEvent) {\n          return null;\n        }\n\n        var _store$getState29 = store.getState(),\n            onViewportChangeStart = _store$getState29.onViewportChangeStart;\n\n        isZoomingOrPanning.current = true;\n\n        if (((_event$sourceEvent = event.sourceEvent) === null || _event$sourceEvent === void 0 ? void 0 : _event$sourceEvent.type) === 'mousedown') {\n          store.setState({\n            paneDragging: true\n          });\n        }\n\n        if (onMoveStart || onViewportChangeStart) {\n          var flowTransform = eventToFlowTransform(event.transform);\n          prevTransform.current = flowTransform;\n          onViewportChangeStart === null || onViewportChangeStart === void 0 ? void 0 : onViewportChangeStart(flowTransform);\n          onMoveStart === null || onMoveStart === void 0 ? void 0 : onMoveStart(event.sourceEvent, flowTransform);\n        }\n      });\n    }\n  }, [d3Zoom, onMoveStart]);\n  useEffect(function () {\n    if (d3Zoom) {\n      d3Zoom.on('end', function (event) {\n        if (!event.sourceEvent) {\n          return null;\n        }\n\n        var _store$getState30 = store.getState(),\n            onViewportChangeEnd = _store$getState30.onViewportChangeEnd;\n\n        isZoomingOrPanning.current = false;\n        store.setState({\n          paneDragging: false\n        });\n\n        if ((onMoveEnd || onViewportChangeEnd) && viewChanged(prevTransform.current, event.transform)) {\n          var flowTransform = eventToFlowTransform(event.transform);\n          prevTransform.current = flowTransform;\n          clearTimeout(timerId.current);\n          timerId.current = setTimeout(function () {\n            onViewportChangeEnd === null || onViewportChangeEnd === void 0 ? void 0 : onViewportChangeEnd(flowTransform);\n            onMoveEnd === null || onMoveEnd === void 0 ? void 0 : onMoveEnd(event.sourceEvent, flowTransform);\n          }, panOnScroll ? 150 : 0);\n        }\n      });\n    }\n  }, [d3Zoom, onMoveEnd, panOnScroll]);\n  useEffect(function () {\n    if (d3Zoom) {\n      d3Zoom.filter(function (event) {\n        var zoomScroll = zoomActivationKeyPressed || zoomOnScroll;\n        var pinchZoom = zoomOnPinch && event.ctrlKey;\n\n        if (event.button === 1 && event.type === 'mousedown' && event.target.closest(\".react-flow__node\")) {\n          return true;\n        } // if all interactions are disabled, we prevent all zoom events\n\n\n        if (!panOnDrag && !zoomScroll && !panOnScroll && !zoomOnDoubleClick && !zoomOnPinch) {\n          return false;\n        } // during a selection we prevent all other interactions\n\n\n        if (selectionKeyPressed) {\n          return false;\n        } // if zoom on double click is disabled, we prevent the double click event\n\n\n        if (!zoomOnDoubleClick && event.type === 'dblclick') {\n          return false;\n        } // if the target element is inside an element with the nowheel class, we prevent zooming\n\n\n        if (isWrappedWithClass(event, noWheelClassName) && event.type === 'wheel') {\n          return false;\n        } // if the target element is inside an element with the nopan class, we prevent panning\n\n\n        if (isWrappedWithClass(event, noPanClassName) && event.type !== 'wheel') {\n          return false;\n        }\n\n        if (!zoomOnPinch && event.ctrlKey && event.type === 'wheel') {\n          return false;\n        } // when there is no scroll handling enabled, we prevent all wheel events\n\n\n        if (!zoomScroll && !panOnScroll && !pinchZoom && event.type === 'wheel') {\n          return false;\n        } // if the pane is not movable, we prevent dragging it with mousestart or touchstart\n\n\n        if (!panOnDrag && (event.type === 'mousedown' || event.type === 'touchstart')) {\n          return false;\n        } // default filter for d3-zoom\n\n\n        return (!event.ctrlKey || event.type === 'wheel') && (!event.button || event.button <= 1);\n      });\n    }\n  }, [d3Zoom, zoomOnScroll, zoomOnPinch, panOnScroll, zoomOnDoubleClick, panOnDrag, selectionKeyPressed, elementsSelectable, zoomActivationKeyPressed]);\n  return jsx(\"div\", {\n    className: \"react-flow__renderer\",\n    ref: zoomPane,\n    style: containerStyle,\n    children: children\n  });\n};\n\nfunction handleParentExpand(res, updateItem) {\n  var parent = res.find(function (e) {\n    return e.id === updateItem.parentNode;\n  });\n\n  if (parent) {\n    var extendWidth = updateItem.position.x + updateItem.width - parent.width;\n    var extendHeight = updateItem.position.y + updateItem.height - parent.height;\n\n    if (extendWidth > 0 || extendHeight > 0 || updateItem.position.x < 0 || updateItem.position.y < 0) {\n      var _parent$style$width, _parent$style$height;\n\n      parent.style = _objectSpread({}, parent.style) || {};\n      parent.style.width = (_parent$style$width = parent.style.width) !== null && _parent$style$width !== void 0 ? _parent$style$width : parent.width;\n      parent.style.height = (_parent$style$height = parent.style.height) !== null && _parent$style$height !== void 0 ? _parent$style$height : parent.height;\n\n      if (extendWidth > 0) {\n        parent.style.width += extendWidth;\n      }\n\n      if (extendHeight > 0) {\n        parent.style.height += extendHeight;\n      }\n\n      if (updateItem.position.x < 0) {\n        var xDiff = Math.abs(updateItem.position.x);\n        parent.position.x = parent.position.x - xDiff;\n        parent.style.width += xDiff;\n        updateItem.position.x = 0;\n      }\n\n      if (updateItem.position.y < 0) {\n        var yDiff = Math.abs(updateItem.position.y);\n        parent.position.y = parent.position.y - yDiff;\n        parent.style.height += yDiff;\n        updateItem.position.y = 0;\n      }\n\n      parent.width = parent.style.width;\n      parent.height = parent.style.height;\n    }\n  }\n}\n\nfunction applyChanges(changes, elements) {\n  // we need this hack to handle the setNodes and setEdges function of the useReactFlow hook for controlled flows\n  if (changes.some(function (c) {\n    return c.type === 'reset';\n  })) {\n    return changes.filter(function (c) {\n      return c.type === 'reset';\n    }).map(function (c) {\n      return c.item;\n    });\n  }\n\n  var initElements = changes.filter(function (c) {\n    return c.type === 'add';\n  }).map(function (c) {\n    return c.item;\n  });\n  return elements.reduce(function (res, item) {\n    var currentChange = changes.find(function (c) {\n      return c.id === item.id;\n    });\n\n    if (currentChange) {\n      switch (currentChange.type) {\n        case 'select':\n          {\n            res.push(_objectSpread(_objectSpread({}, item), {}, {\n              selected: currentChange.selected\n            }));\n            return res;\n          }\n\n        case 'position':\n          {\n            var updateItem = _objectSpread({}, item);\n\n            if (typeof currentChange.position !== 'undefined') {\n              updateItem.position = currentChange.position;\n            }\n\n            if (typeof currentChange.positionAbsolute !== 'undefined') {\n              updateItem.positionAbsolute = currentChange.positionAbsolute;\n            }\n\n            if (typeof currentChange.dragging !== 'undefined') {\n              updateItem.dragging = currentChange.dragging;\n            }\n\n            if (updateItem.expandParent) {\n              handleParentExpand(res, updateItem);\n            }\n\n            res.push(updateItem);\n            return res;\n          }\n\n        case 'dimensions':\n          {\n            var _updateItem = _objectSpread({}, item);\n\n            if (typeof currentChange.dimensions !== 'undefined') {\n              _updateItem.width = currentChange.dimensions.width;\n              _updateItem.height = currentChange.dimensions.height;\n            }\n\n            if (_updateItem.expandParent) {\n              handleParentExpand(res, _updateItem);\n            }\n\n            res.push(_updateItem);\n            return res;\n          }\n\n        case 'remove':\n          {\n            return res;\n          }\n      }\n    }\n\n    res.push(item);\n    return res;\n  }, initElements);\n}\n\nfunction applyNodeChanges(changes, nodes) {\n  return applyChanges(changes, nodes);\n}\n\nfunction applyEdgeChanges(changes, edges) {\n  return applyChanges(changes, edges);\n}\n\nvar createSelectionChange = function createSelectionChange(id, selected) {\n  return {\n    id: id,\n    type: 'select',\n    selected: selected\n  };\n};\n\nfunction getSelectionChanges(items, selectedIds) {\n  return items.reduce(function (res, item) {\n    var willBeSelected = selectedIds.includes(item.id);\n\n    if (!item.selected && willBeSelected) {\n      item.selected = true;\n      res.push(createSelectionChange(item.id, true));\n    } else if (item.selected && !willBeSelected) {\n      item.selected = false;\n      res.push(createSelectionChange(item.id, false));\n    }\n\n    return res;\n  }, []);\n}\n\nfunction getMousePosition(event, containerBounds) {\n  return {\n    x: event.clientX - containerBounds.left,\n    y: event.clientY - containerBounds.top\n  };\n}\n\nvar selector$7 = function selector$7(s) {\n  return {\n    userSelectionActive: s.userSelectionActive,\n    elementsSelectable: s.elementsSelectable\n  };\n};\n\nvar initialRect = {\n  startX: 0,\n  startY: 0,\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n  draw: false\n};\nvar UserSelection = memo(function (_ref54) {\n  var selectionKeyPressed = _ref54.selectionKeyPressed;\n  var store = useStoreApi();\n  var prevSelectedNodesCount = useRef(0);\n  var prevSelectedEdgesCount = useRef(0);\n  var containerBounds = useRef();\n\n  var _useState11 = useState(initialRect),\n      _useState12 = _slicedToArray(_useState11, 2),\n      userSelectionRect = _useState12[0],\n      setUserSelectionRect = _useState12[1];\n\n  var _useStore6 = useStore(selector$7, shallow),\n      userSelectionActive = _useStore6.userSelectionActive,\n      elementsSelectable = _useStore6.elementsSelectable;\n\n  var renderUserSelectionPane = userSelectionActive || selectionKeyPressed;\n\n  if (!elementsSelectable || !renderUserSelectionPane) {\n    return null;\n  }\n\n  var resetUserSelection = function resetUserSelection() {\n    setUserSelectionRect(initialRect);\n    store.setState({\n      userSelectionActive: false\n    });\n    prevSelectedNodesCount.current = 0;\n    prevSelectedEdgesCount.current = 0;\n  };\n\n  var onMouseDown = function onMouseDown(event) {\n    var reactFlowNode = event.target.closest('.react-flow');\n    containerBounds.current = reactFlowNode.getBoundingClientRect();\n    var mousePos = getMousePosition(event, containerBounds.current);\n    setUserSelectionRect({\n      width: 0,\n      height: 0,\n      startX: mousePos.x,\n      startY: mousePos.y,\n      x: mousePos.x,\n      y: mousePos.y,\n      draw: true\n    });\n    store.setState({\n      userSelectionActive: true,\n      nodesSelectionActive: false\n    });\n  };\n\n  var onMouseMove = function onMouseMove(event) {\n    var _userSelectionRect$st, _userSelectionRect$st2;\n\n    if (!selectionKeyPressed || !userSelectionRect.draw || !containerBounds.current) {\n      return;\n    }\n\n    var mousePos = getMousePosition(event, containerBounds.current);\n    var startX = (_userSelectionRect$st = userSelectionRect.startX) !== null && _userSelectionRect$st !== void 0 ? _userSelectionRect$st : 0;\n    var startY = (_userSelectionRect$st2 = userSelectionRect.startY) !== null && _userSelectionRect$st2 !== void 0 ? _userSelectionRect$st2 : 0;\n\n    var nextUserSelectRect = _objectSpread(_objectSpread({}, userSelectionRect), {}, {\n      x: mousePos.x < startX ? mousePos.x : startX,\n      y: mousePos.y < startY ? mousePos.y : startY,\n      width: Math.abs(mousePos.x - startX),\n      height: Math.abs(mousePos.y - startY)\n    });\n\n    var _store$getState31 = store.getState(),\n        nodeInternals = _store$getState31.nodeInternals,\n        edges = _store$getState31.edges,\n        transform = _store$getState31.transform,\n        onNodesChange = _store$getState31.onNodesChange,\n        onEdgesChange = _store$getState31.onEdgesChange;\n\n    var nodes = Array.from(nodeInternals.values());\n    var selectedNodes = getNodesInside(nodeInternals, nextUserSelectRect, transform, false, true);\n    var selectedEdgeIds = getConnectedEdges(selectedNodes, edges).map(function (e) {\n      return e.id;\n    });\n    var selectedNodeIds = selectedNodes.map(function (n) {\n      return n.id;\n    });\n\n    if (prevSelectedNodesCount.current !== selectedNodeIds.length) {\n      prevSelectedNodesCount.current = selectedNodeIds.length;\n      var changes = getSelectionChanges(nodes, selectedNodeIds);\n\n      if (changes.length) {\n        onNodesChange === null || onNodesChange === void 0 ? void 0 : onNodesChange(changes);\n      }\n    }\n\n    if (prevSelectedEdgesCount.current !== selectedEdgeIds.length) {\n      prevSelectedEdgesCount.current = selectedEdgeIds.length;\n\n      var _changes = getSelectionChanges(edges, selectedEdgeIds);\n\n      if (_changes.length) {\n        onEdgesChange === null || onEdgesChange === void 0 ? void 0 : onEdgesChange(_changes);\n      }\n    }\n\n    setUserSelectionRect(nextUserSelectRect);\n  };\n\n  var onMouseUp = function onMouseUp() {\n    store.setState({\n      nodesSelectionActive: prevSelectedNodesCount.current > 0\n    });\n    resetUserSelection();\n  };\n\n  var onMouseLeave = function onMouseLeave() {\n    store.setState({\n      nodesSelectionActive: false\n    });\n    resetUserSelection();\n  };\n\n  return jsx(\"div\", {\n    className: \"react-flow__selectionpane react-flow__container\",\n    onMouseDown: onMouseDown,\n    onMouseMove: onMouseMove,\n    onMouseUp: onMouseUp,\n    onMouseLeave: onMouseLeave,\n    children: userSelectionRect.draw && jsx(\"div\", {\n      className: \"react-flow__selection react-flow__container\",\n      style: {\n        width: userSelectionRect.width,\n        height: userSelectionRect.height,\n        transform: \"translate(\".concat(userSelectionRect.x, \"px, \").concat(userSelectionRect.y, \"px)\")\n      }\n    })\n  });\n});\nUserSelection.displayName = 'UserSelection';\n\nvar selector$6 = function selector$6(s) {\n  return _objectSpread({\n    transformString: \"translate(\".concat(s.transform[0], \"px,\").concat(s.transform[1], \"px) scale(\").concat(s.transform[2], \")\"),\n    userSelectionActive: s.userSelectionActive\n  }, getRectOfNodes(Array.from(s.nodeInternals.values()).filter(function (n) {\n    return n.selected;\n  })));\n};\n\nvar bboxSelector = function bboxSelector(s) {\n  var selectedNodes = Array.from(s.nodeInternals.values()).filter(function (n) {\n    return n.selected;\n  });\n  return getRectOfNodes(selectedNodes);\n};\n\nfunction NodesSelection(_ref55) {\n  var onSelectionContextMenu = _ref55.onSelectionContextMenu,\n      noPanClassName = _ref55.noPanClassName,\n      disableKeyboardA11y = _ref55.disableKeyboardA11y;\n  var store = useStoreApi();\n\n  var _useStore7 = useStore(selector$6, shallow),\n      transformString = _useStore7.transformString,\n      userSelectionActive = _useStore7.userSelectionActive;\n\n  var _useStore8 = useStore(bboxSelector, shallow),\n      width = _useStore8.width,\n      height = _useStore8.height,\n      left = _useStore8.x,\n      top = _useStore8.y;\n\n  var updatePositions = useUpdateNodePositions();\n  var nodeRef = useRef(null);\n  useEffect(function () {\n    if (!disableKeyboardA11y) {\n      var _nodeRef$current2;\n\n      (_nodeRef$current2 = nodeRef.current) === null || _nodeRef$current2 === void 0 ? void 0 : _nodeRef$current2.focus();\n    }\n  }, [disableKeyboardA11y]);\n  useDrag({\n    nodeRef: nodeRef\n  });\n\n  if (userSelectionActive || !width || !height) {\n    return null;\n  }\n\n  var onContextMenu = onSelectionContextMenu ? function (event) {\n    var selectedNodes = Array.from(store.getState().nodeInternals.values()).filter(function (n) {\n      return n.selected;\n    });\n    onSelectionContextMenu(event, selectedNodes);\n  } : undefined;\n\n  var onKeyDown = function onKeyDown(event) {\n    if (Object.prototype.hasOwnProperty.call(arrowKeyDiffs, event.key)) {\n      updatePositions(arrowKeyDiffs[event.key]);\n    }\n  };\n\n  return jsx(\"div\", {\n    className: cc(['react-flow__nodesselection', 'react-flow__container', noPanClassName]),\n    style: {\n      transform: transformString\n    },\n    children: jsx(\"div\", {\n      ref: nodeRef,\n      className: \"react-flow__nodesselection-rect\",\n      onContextMenu: onContextMenu,\n      tabIndex: disableKeyboardA11y ? undefined : -1,\n      onKeyDown: disableKeyboardA11y ? undefined : onKeyDown,\n      style: {\n        width: width,\n        height: height,\n        top: top,\n        left: left\n      }\n    })\n  });\n}\n\nvar NodesSelection$1 = memo(NodesSelection);\n\nvar selector$5 = function selector$5(s) {\n  return s.paneDragging;\n};\n\nfunction Pane(_ref56) {\n  var onClick = _ref56.onClick,\n      onMouseEnter = _ref56.onMouseEnter,\n      onMouseMove = _ref56.onMouseMove,\n      onMouseLeave = _ref56.onMouseLeave,\n      onContextMenu = _ref56.onContextMenu,\n      onWheel = _ref56.onWheel;\n  var dragging = useStore(selector$5);\n  return jsx(\"div\", {\n    className: cc(['react-flow__pane', {\n      dragging: dragging\n    }]),\n    onClick: onClick,\n    onMouseEnter: onMouseEnter,\n    onMouseMove: onMouseMove,\n    onMouseLeave: onMouseLeave,\n    onContextMenu: onContextMenu,\n    onWheel: onWheel,\n    style: containerStyle\n  });\n}\n\nvar selector$4 = function selector$4(s) {\n  return s.nodesSelectionActive;\n};\n\nvar FlowRenderer = function FlowRenderer(_ref57) {\n  var children = _ref57.children,\n      onPaneClick = _ref57.onPaneClick,\n      onPaneMouseEnter = _ref57.onPaneMouseEnter,\n      onPaneMouseMove = _ref57.onPaneMouseMove,\n      onPaneMouseLeave = _ref57.onPaneMouseLeave,\n      onPaneContextMenu = _ref57.onPaneContextMenu,\n      onPaneScroll = _ref57.onPaneScroll,\n      deleteKeyCode = _ref57.deleteKeyCode,\n      onMove = _ref57.onMove,\n      onMoveStart = _ref57.onMoveStart,\n      onMoveEnd = _ref57.onMoveEnd,\n      selectionKeyCode = _ref57.selectionKeyCode,\n      multiSelectionKeyCode = _ref57.multiSelectionKeyCode,\n      zoomActivationKeyCode = _ref57.zoomActivationKeyCode,\n      elementsSelectable = _ref57.elementsSelectable,\n      zoomOnScroll = _ref57.zoomOnScroll,\n      zoomOnPinch = _ref57.zoomOnPinch,\n      panOnScroll = _ref57.panOnScroll,\n      panOnScrollSpeed = _ref57.panOnScrollSpeed,\n      panOnScrollMode = _ref57.panOnScrollMode,\n      zoomOnDoubleClick = _ref57.zoomOnDoubleClick,\n      panOnDrag = _ref57.panOnDrag,\n      defaultViewport = _ref57.defaultViewport,\n      translateExtent = _ref57.translateExtent,\n      minZoom = _ref57.minZoom,\n      maxZoom = _ref57.maxZoom,\n      preventScrolling = _ref57.preventScrolling,\n      onSelectionContextMenu = _ref57.onSelectionContextMenu,\n      noWheelClassName = _ref57.noWheelClassName,\n      noPanClassName = _ref57.noPanClassName,\n      disableKeyboardA11y = _ref57.disableKeyboardA11y;\n  var store = useStoreApi();\n  var nodesSelectionActive = useStore(selector$4);\n  var selectionKeyPressed = useKeyPress(selectionKeyCode);\n  useGlobalKeyHandler({\n    deleteKeyCode: deleteKeyCode,\n    multiSelectionKeyCode: multiSelectionKeyCode\n  });\n\n  var onClick = function onClick(event) {\n    onPaneClick === null || onPaneClick === void 0 ? void 0 : onPaneClick(event);\n    store.getState().resetSelectedElements();\n    store.setState({\n      nodesSelectionActive: false\n    });\n  };\n\n  var onContextMenu = onPaneContextMenu ? function (event) {\n    return onPaneContextMenu(event);\n  } : undefined;\n  var onWheel = onPaneScroll ? function (event) {\n    return onPaneScroll(event);\n  } : undefined;\n  return jsxs(ZoomPane, {\n    onMove: onMove,\n    onMoveStart: onMoveStart,\n    onMoveEnd: onMoveEnd,\n    selectionKeyPressed: selectionKeyPressed,\n    elementsSelectable: elementsSelectable,\n    zoomOnScroll: zoomOnScroll,\n    zoomOnPinch: zoomOnPinch,\n    panOnScroll: panOnScroll,\n    panOnScrollSpeed: panOnScrollSpeed,\n    panOnScrollMode: panOnScrollMode,\n    zoomOnDoubleClick: zoomOnDoubleClick,\n    panOnDrag: panOnDrag,\n    defaultViewport: defaultViewport,\n    translateExtent: translateExtent,\n    minZoom: minZoom,\n    maxZoom: maxZoom,\n    zoomActivationKeyCode: zoomActivationKeyCode,\n    preventScrolling: preventScrolling,\n    noWheelClassName: noWheelClassName,\n    noPanClassName: noPanClassName,\n    children: [children, jsx(UserSelection, {\n      selectionKeyPressed: selectionKeyPressed\n    }), nodesSelectionActive && jsx(NodesSelection$1, {\n      onSelectionContextMenu: onSelectionContextMenu,\n      noPanClassName: noPanClassName,\n      disableKeyboardA11y: disableKeyboardA11y\n    }), jsx(Pane, {\n      onClick: onClick,\n      onMouseEnter: onPaneMouseEnter,\n      onMouseMove: onPaneMouseMove,\n      onMouseLeave: onPaneMouseLeave,\n      onContextMenu: onContextMenu,\n      onWheel: onWheel\n    })]\n  });\n};\n\nFlowRenderer.displayName = 'FlowRenderer';\nvar FlowRenderer$1 = memo(FlowRenderer);\n\nfunction useVisibleNodes(onlyRenderVisible) {\n  var nodes = useStore(useCallback(function (s) {\n    return onlyRenderVisible ? getNodesInside(s.nodeInternals, {\n      x: 0,\n      y: 0,\n      width: s.width,\n      height: s.height\n    }, s.transform, true) : Array.from(s.nodeInternals.values());\n  }, [onlyRenderVisible]));\n  return nodes;\n}\n\nvar selector$3 = function selector$3(s) {\n  return {\n    nodesDraggable: s.nodesDraggable,\n    nodesConnectable: s.nodesConnectable,\n    nodesFocusable: s.nodesFocusable,\n    elementsSelectable: s.elementsSelectable,\n    updateNodeDimensions: s.updateNodeDimensions\n  };\n};\n\nvar NodeRenderer = function NodeRenderer(props) {\n  var _useStore9 = useStore(selector$3, shallow),\n      nodesDraggable = _useStore9.nodesDraggable,\n      nodesConnectable = _useStore9.nodesConnectable,\n      nodesFocusable = _useStore9.nodesFocusable,\n      elementsSelectable = _useStore9.elementsSelectable,\n      updateNodeDimensions = _useStore9.updateNodeDimensions;\n\n  var nodes = useVisibleNodes(props.onlyRenderVisibleElements);\n  var resizeObserverRef = useRef();\n  var resizeObserver = useMemo(function () {\n    if (typeof ResizeObserver === 'undefined') {\n      return null;\n    }\n\n    var observer = new ResizeObserver(function (entries) {\n      var updates = entries.map(function (entry) {\n        return {\n          id: entry.target.getAttribute('data-id'),\n          nodeElement: entry.target,\n          forceUpdate: true\n        };\n      });\n      updateNodeDimensions(updates);\n    });\n    resizeObserverRef.current = observer;\n    return observer;\n  }, []);\n  useEffect(function () {\n    return function () {\n      var _resizeObserverRef$cu;\n\n      resizeObserverRef === null || resizeObserverRef === void 0 ? void 0 : (_resizeObserverRef$cu = resizeObserverRef.current) === null || _resizeObserverRef$cu === void 0 ? void 0 : _resizeObserverRef$cu.disconnect();\n    };\n  }, []);\n  return jsx(\"div\", {\n    className: \"react-flow__nodes\",\n    style: containerStyle,\n    children: nodes.map(function (node) {\n      var _clampedPosition$x, _clampedPosition$y, _node$width, _node$height, _node$internalsSymbol4, _node$internalsSymbol5, _node$internalsSymbol6;\n\n      var nodeType = node.type || 'default';\n\n      if (!props.nodeTypes[nodeType]) {\n        devWarn(\"Node type \\\"\".concat(nodeType, \"\\\" not found. Using fallback type \\\"default\\\". Help: https://reactflow.dev/error#300\"));\n        nodeType = 'default';\n      }\n\n      var NodeComponent = props.nodeTypes[nodeType] || props.nodeTypes.default;\n      var isDraggable = !!(node.draggable || nodesDraggable && typeof node.draggable === 'undefined');\n      var isSelectable = !!(node.selectable || elementsSelectable && typeof node.selectable === 'undefined');\n      var isConnectable = !!(node.connectable || nodesConnectable && typeof node.connectable === 'undefined');\n      var isFocusable = !!(node.focusable || nodesFocusable && typeof node.focusable === 'undefined');\n      var clampedPosition = props.nodeExtent ? clampPosition(node.positionAbsolute, props.nodeExtent) : node.positionAbsolute;\n      var posX = (_clampedPosition$x = clampedPosition === null || clampedPosition === void 0 ? void 0 : clampedPosition.x) !== null && _clampedPosition$x !== void 0 ? _clampedPosition$x : 0;\n      var posY = (_clampedPosition$y = clampedPosition === null || clampedPosition === void 0 ? void 0 : clampedPosition.y) !== null && _clampedPosition$y !== void 0 ? _clampedPosition$y : 0;\n      var posOrigin = getPositionWithOrigin({\n        x: posX,\n        y: posY,\n        width: (_node$width = node.width) !== null && _node$width !== void 0 ? _node$width : 0,\n        height: (_node$height = node.height) !== null && _node$height !== void 0 ? _node$height : 0,\n        origin: props.nodeOrigin\n      });\n      return jsx(NodeComponent, {\n        id: node.id,\n        className: node.className,\n        style: node.style,\n        type: nodeType,\n        data: node.data,\n        sourcePosition: node.sourcePosition || Position.Bottom,\n        targetPosition: node.targetPosition || Position.Top,\n        hidden: node.hidden,\n        xPos: posX,\n        yPos: posY,\n        xPosOrigin: posOrigin.x,\n        yPosOrigin: posOrigin.y,\n        selectNodesOnDrag: props.selectNodesOnDrag,\n        onClick: props.onNodeClick,\n        onMouseEnter: props.onNodeMouseEnter,\n        onMouseMove: props.onNodeMouseMove,\n        onMouseLeave: props.onNodeMouseLeave,\n        onContextMenu: props.onNodeContextMenu,\n        onDoubleClick: props.onNodeDoubleClick,\n        selected: !!node.selected,\n        isDraggable: isDraggable,\n        isSelectable: isSelectable,\n        isConnectable: isConnectable,\n        isFocusable: isFocusable,\n        resizeObserver: resizeObserver,\n        dragHandle: node.dragHandle,\n        zIndex: (_node$internalsSymbol4 = (_node$internalsSymbol5 = node[internalsSymbol]) === null || _node$internalsSymbol5 === void 0 ? void 0 : _node$internalsSymbol5.z) !== null && _node$internalsSymbol4 !== void 0 ? _node$internalsSymbol4 : 0,\n        isParent: !!((_node$internalsSymbol6 = node[internalsSymbol]) !== null && _node$internalsSymbol6 !== void 0 && _node$internalsSymbol6.isParent),\n        noDragClassName: props.noDragClassName,\n        noPanClassName: props.noPanClassName,\n        initialized: !!node.width && !!node.height,\n        rfId: props.rfId,\n        disableKeyboardA11y: props.disableKeyboardA11y,\n        ariaLabel: node.ariaLabel\n      }, node.id);\n    })\n  });\n};\n\nNodeRenderer.displayName = 'NodeRenderer';\nvar NodeRenderer$1 = memo(NodeRenderer);\nvar defaultEdgeTree = [{\n  level: 0,\n  isMaxLevel: true,\n  edges: []\n}];\n\nfunction groupEdgesByZLevel(edges, nodeInternals) {\n  var elevateEdgesOnSelect = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var maxLevel = -1;\n  var levelLookup = edges.reduce(function (tree, edge) {\n    var hasZIndex = isNumeric(edge.zIndex);\n    var z = hasZIndex ? edge.zIndex : 0;\n\n    if (elevateEdgesOnSelect) {\n      var _nodeInternals$get2, _nodeInternals$get2$i, _nodeInternals$get3, _nodeInternals$get3$i;\n\n      z = hasZIndex ? edge.zIndex : Math.max(((_nodeInternals$get2 = nodeInternals.get(edge.source)) === null || _nodeInternals$get2 === void 0 ? void 0 : (_nodeInternals$get2$i = _nodeInternals$get2[internalsSymbol]) === null || _nodeInternals$get2$i === void 0 ? void 0 : _nodeInternals$get2$i.z) || 0, ((_nodeInternals$get3 = nodeInternals.get(edge.target)) === null || _nodeInternals$get3 === void 0 ? void 0 : (_nodeInternals$get3$i = _nodeInternals$get3[internalsSymbol]) === null || _nodeInternals$get3$i === void 0 ? void 0 : _nodeInternals$get3$i.z) || 0);\n    }\n\n    if (tree[z]) {\n      tree[z].push(edge);\n    } else {\n      tree[z] = [edge];\n    }\n\n    maxLevel = z > maxLevel ? z : maxLevel;\n    return tree;\n  }, {});\n  var edgeTree = Object.entries(levelLookup).map(function (_ref58) {\n    var _ref59 = _slicedToArray(_ref58, 2),\n        key = _ref59[0],\n        edges = _ref59[1];\n\n    var level = +key;\n    return {\n      edges: edges,\n      level: level,\n      isMaxLevel: level === maxLevel\n    };\n  });\n\n  if (edgeTree.length === 0) {\n    return defaultEdgeTree;\n  }\n\n  return edgeTree;\n}\n\nfunction useVisibleEdges(onlyRenderVisible, nodeInternals, elevateEdgesOnSelect) {\n  var edges = useStore(useCallback(function (s) {\n    if (!onlyRenderVisible) {\n      return s.edges;\n    }\n\n    return s.edges.filter(function (e) {\n      var sourceNode = nodeInternals.get(e.source);\n      var targetNode = nodeInternals.get(e.target);\n      return (sourceNode === null || sourceNode === void 0 ? void 0 : sourceNode.width) && (sourceNode === null || sourceNode === void 0 ? void 0 : sourceNode.height) && (targetNode === null || targetNode === void 0 ? void 0 : targetNode.width) && (targetNode === null || targetNode === void 0 ? void 0 : targetNode.height) && isEdgeVisible({\n        sourcePos: sourceNode.positionAbsolute || {\n          x: 0,\n          y: 0\n        },\n        targetPos: targetNode.positionAbsolute || {\n          x: 0,\n          y: 0\n        },\n        sourceWidth: sourceNode.width,\n        sourceHeight: sourceNode.height,\n        targetWidth: targetNode.width,\n        targetHeight: targetNode.height,\n        width: s.width,\n        height: s.height,\n        transform: s.transform\n      });\n    });\n  }, [onlyRenderVisible, nodeInternals]));\n  return groupEdgesByZLevel(edges, nodeInternals, elevateEdgesOnSelect);\n}\n\nvar oppositePosition = (_oppositePosition = {}, _defineProperty(_oppositePosition, Position.Left, Position.Right), _defineProperty(_oppositePosition, Position.Right, Position.Left), _defineProperty(_oppositePosition, Position.Top, Position.Bottom), _defineProperty(_oppositePosition, Position.Bottom, Position.Top), _oppositePosition);\n\nvar ConnectionLine = function ConnectionLine(_ref60) {\n  var _fromNode$internalsSy, _fromNode$width, _fromNode$height, _fromNode$positionAbs, _fromNode$positionAbs2;\n\n  var connectionNodeId = _ref60.connectionNodeId,\n      connectionHandleType = _ref60.connectionHandleType,\n      connectionLineStyle = _ref60.connectionLineStyle,\n      _ref60$connectionLine = _ref60.connectionLineType,\n      connectionLineType = _ref60$connectionLine === void 0 ? ConnectionLineType.Bezier : _ref60$connectionLine,\n      isConnectable = _ref60.isConnectable,\n      CustomConnectionLineComponent = _ref60.CustomConnectionLineComponent;\n\n  var _useStore10 = useStore(useCallback(function (s) {\n    return {\n      fromNode: s.nodeInternals.get(connectionNodeId),\n      handleId: s.connectionHandleId,\n      toX: (s.connectionPosition.x - s.transform[0]) / s.transform[2],\n      toY: (s.connectionPosition.y - s.transform[1]) / s.transform[2]\n    };\n  }, [connectionNodeId]), shallow),\n      fromNode = _useStore10.fromNode,\n      handleId = _useStore10.handleId,\n      toX = _useStore10.toX,\n      toY = _useStore10.toY;\n\n  var fromHandleBounds = fromNode === null || fromNode === void 0 ? void 0 : (_fromNode$internalsSy = fromNode[internalsSymbol]) === null || _fromNode$internalsSy === void 0 ? void 0 : _fromNode$internalsSy.handleBounds;\n\n  if (!fromNode || !isConnectable || !(fromHandleBounds !== null && fromHandleBounds !== void 0 && fromHandleBounds[connectionHandleType])) {\n    return null;\n  }\n\n  var handleBound = fromHandleBounds[connectionHandleType];\n  var fromHandle = handleId ? handleBound.find(function (d) {\n    return d.id === handleId;\n  }) : handleBound[0];\n  var fromHandleX = fromHandle ? fromHandle.x + fromHandle.width / 2 : ((_fromNode$width = fromNode === null || fromNode === void 0 ? void 0 : fromNode.width) !== null && _fromNode$width !== void 0 ? _fromNode$width : 0) / 2;\n  var fromHandleY = fromHandle ? fromHandle.y + fromHandle.height / 2 : (_fromNode$height = fromNode === null || fromNode === void 0 ? void 0 : fromNode.height) !== null && _fromNode$height !== void 0 ? _fromNode$height : 0;\n  var fromX = ((fromNode === null || fromNode === void 0 ? void 0 : (_fromNode$positionAbs = fromNode.positionAbsolute) === null || _fromNode$positionAbs === void 0 ? void 0 : _fromNode$positionAbs.x) || 0) + fromHandleX;\n  var fromY = ((fromNode === null || fromNode === void 0 ? void 0 : (_fromNode$positionAbs2 = fromNode.positionAbsolute) === null || _fromNode$positionAbs2 === void 0 ? void 0 : _fromNode$positionAbs2.y) || 0) + fromHandleY;\n  var fromPosition = fromHandle === null || fromHandle === void 0 ? void 0 : fromHandle.position;\n\n  if (!fromPosition) {\n    return null;\n  }\n\n  var toPosition = oppositePosition[fromPosition];\n\n  if (CustomConnectionLineComponent) {\n    return jsx(\"g\", {\n      className: \"react-flow__connection\",\n      children: jsx(CustomConnectionLineComponent, {\n        connectionLineType: connectionLineType,\n        connectionLineStyle: connectionLineStyle,\n        fromNode: fromNode,\n        fromHandle: fromHandle,\n        fromX: fromX,\n        fromY: fromY,\n        toX: toX,\n        toY: toY,\n        fromPosition: fromPosition,\n        toPosition: toPosition\n      })\n    });\n  }\n\n  var dAttr = '';\n  var pathParams = {\n    sourceX: fromX,\n    sourceY: fromY,\n    sourcePosition: fromPosition,\n    targetX: toX,\n    targetY: toY,\n    targetPosition: toPosition\n  };\n\n  if (connectionLineType === ConnectionLineType.Bezier) {\n    // we assume the destination position is opposite to the source position\n    var _getBezierPath3 = getBezierPath(pathParams);\n\n    var _getBezierPath4 = _slicedToArray(_getBezierPath3, 1);\n\n    dAttr = _getBezierPath4[0];\n  } else if (connectionLineType === ConnectionLineType.Step) {\n    var _getSmoothStepPath3 = getSmoothStepPath(_objectSpread(_objectSpread({}, pathParams), {}, {\n      borderRadius: 0\n    }));\n\n    var _getSmoothStepPath4 = _slicedToArray(_getSmoothStepPath3, 1);\n\n    dAttr = _getSmoothStepPath4[0];\n  } else if (connectionLineType === ConnectionLineType.SmoothStep) {\n    var _getSmoothStepPath5 = getSmoothStepPath(pathParams);\n\n    var _getSmoothStepPath6 = _slicedToArray(_getSmoothStepPath5, 1);\n\n    dAttr = _getSmoothStepPath6[0];\n  } else if (connectionLineType === ConnectionLineType.SimpleBezier) {\n    var _getSimpleBezierPath3 = getSimpleBezierPath(pathParams);\n\n    var _getSimpleBezierPath4 = _slicedToArray(_getSimpleBezierPath3, 1);\n\n    dAttr = _getSimpleBezierPath4[0];\n  } else {\n    dAttr = \"M\".concat(fromX, \",\").concat(fromY, \" \").concat(toX, \",\").concat(toY);\n  }\n\n  return jsx(\"g\", {\n    className: \"react-flow__connection\",\n    children: jsx(\"path\", {\n      d: dAttr,\n      fill: \"none\",\n      className: \"react-flow__connection-path\",\n      style: connectionLineStyle\n    })\n  });\n};\n\nConnectionLine.displayName = 'ConnectionLine';\n\nvar ArrowSymbol = function ArrowSymbol(_ref61) {\n  var _ref61$color = _ref61.color,\n      color = _ref61$color === void 0 ? 'none' : _ref61$color,\n      _ref61$strokeWidth = _ref61.strokeWidth,\n      strokeWidth = _ref61$strokeWidth === void 0 ? 1 : _ref61$strokeWidth;\n  return jsx(\"polyline\", {\n    stroke: color,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: strokeWidth,\n    fill: \"none\",\n    points: \"-5,-4 0,0 -5,4\"\n  });\n};\n\nvar ArrowClosedSymbol = function ArrowClosedSymbol(_ref62) {\n  var _ref62$color = _ref62.color,\n      color = _ref62$color === void 0 ? 'none' : _ref62$color,\n      _ref62$strokeWidth = _ref62.strokeWidth,\n      strokeWidth = _ref62$strokeWidth === void 0 ? 1 : _ref62$strokeWidth;\n  return jsx(\"polyline\", {\n    stroke: color,\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: strokeWidth,\n    fill: color,\n    points: \"-5,-4 0,0 -5,4 -5,-4\"\n  });\n};\n\nvar MarkerSymbols = (_MarkerSymbols = {}, _defineProperty(_MarkerSymbols, MarkerType.Arrow, ArrowSymbol), _defineProperty(_MarkerSymbols, MarkerType.ArrowClosed, ArrowClosedSymbol), _MarkerSymbols);\n\nfunction useMarkerSymbol(type) {\n  var symbol = useMemo(function () {\n    var symbolExists = Object.prototype.hasOwnProperty.call(MarkerSymbols, type);\n\n    if (!symbolExists) {\n      devWarn(\"Marker type \\\"\".concat(type, \"\\\" doesn't exist. Help: https://reactflow.dev/error#900\"));\n      return null;\n    }\n\n    return MarkerSymbols[type];\n  }, [type]);\n  return symbol;\n}\n\nvar Marker = function Marker(_ref63) {\n  var id = _ref63.id,\n      type = _ref63.type,\n      color = _ref63.color,\n      _ref63$width = _ref63.width,\n      width = _ref63$width === void 0 ? 12.5 : _ref63$width,\n      _ref63$height = _ref63.height,\n      height = _ref63$height === void 0 ? 12.5 : _ref63$height,\n      _ref63$markerUnits = _ref63.markerUnits,\n      markerUnits = _ref63$markerUnits === void 0 ? 'strokeWidth' : _ref63$markerUnits,\n      strokeWidth = _ref63.strokeWidth,\n      _ref63$orient = _ref63.orient,\n      orient = _ref63$orient === void 0 ? 'auto-start-reverse' : _ref63$orient;\n  var Symbol = useMarkerSymbol(type);\n\n  if (!Symbol) {\n    return null;\n  }\n\n  return jsx(\"marker\", {\n    className: \"react-flow__arrowhead\",\n    id: id,\n    markerWidth: \"\".concat(width),\n    markerHeight: \"\".concat(height),\n    viewBox: \"-10 -10 20 20\",\n    markerUnits: markerUnits,\n    orient: orient,\n    refX: \"0\",\n    refY: \"0\",\n    children: jsx(Symbol, {\n      color: color,\n      strokeWidth: strokeWidth\n    })\n  });\n};\n\nvar markerSelector = function markerSelector(_ref64) {\n  var defaultColor = _ref64.defaultColor,\n      rfId = _ref64.rfId;\n  return function (s) {\n    var ids = [];\n    return s.edges.reduce(function (markers, edge) {\n      [edge.markerStart, edge.markerEnd].forEach(function (marker) {\n        if (marker && typeof marker === 'object') {\n          var markerId = getMarkerId(marker, rfId);\n\n          if (!ids.includes(markerId)) {\n            markers.push(_objectSpread({\n              id: markerId,\n              color: marker.color || defaultColor\n            }, marker));\n            ids.push(markerId);\n          }\n        }\n      });\n      return markers;\n    }, []).sort(function (a, b) {\n      return a.id.localeCompare(b.id);\n    });\n  };\n}; // when you have multiple flows on a page and you hide the first one, the other ones have no markers anymore\n// when they do have markers with the same ids. To prevent this the user can pass a unique id to the react flow wrapper\n// that we can then use for creating our unique marker ids\n\n\nvar MarkerDefinitions = function MarkerDefinitions(_ref65) {\n  var defaultColor = _ref65.defaultColor,\n      rfId = _ref65.rfId;\n  var markers = useStore(useCallback(markerSelector({\n    defaultColor: defaultColor,\n    rfId: rfId\n  }), [defaultColor, rfId]), // the id includes all marker options, so we just need to look at that part of the marker\n  function (a, b) {\n    return !(a.length !== b.length || a.some(function (m, i) {\n      return m.id !== b[i].id;\n    }));\n  });\n  return jsx(\"defs\", {\n    children: markers.map(function (marker) {\n      return jsx(Marker, {\n        id: marker.id,\n        type: marker.type,\n        color: marker.color,\n        width: marker.width,\n        height: marker.height,\n        markerUnits: marker.markerUnits,\n        strokeWidth: marker.strokeWidth,\n        orient: marker.orient\n      }, marker.id);\n    })\n  });\n};\n\nMarkerDefinitions.displayName = 'MarkerDefinitions';\nvar MarkerDefinitions$1 = memo(MarkerDefinitions);\n\nvar selector$2 = function selector$2(s) {\n  return {\n    connectionNodeId: s.connectionNodeId,\n    connectionHandleType: s.connectionHandleType,\n    nodesConnectable: s.nodesConnectable,\n    edgesFocusable: s.edgesFocusable,\n    elementsSelectable: s.elementsSelectable,\n    width: s.width,\n    height: s.height,\n    connectionMode: s.connectionMode,\n    nodeInternals: s.nodeInternals\n  };\n};\n\nvar EdgeRenderer = function EdgeRenderer(props) {\n  var _useStore11 = useStore(selector$2, shallow),\n      connectionNodeId = _useStore11.connectionNodeId,\n      connectionHandleType = _useStore11.connectionHandleType,\n      nodesConnectable = _useStore11.nodesConnectable,\n      edgesFocusable = _useStore11.edgesFocusable,\n      elementsSelectable = _useStore11.elementsSelectable,\n      width = _useStore11.width,\n      height = _useStore11.height,\n      connectionMode = _useStore11.connectionMode,\n      nodeInternals = _useStore11.nodeInternals;\n\n  var edgeTree = useVisibleEdges(props.onlyRenderVisibleElements, nodeInternals, props.elevateEdgesOnSelect);\n\n  if (!width) {\n    return null;\n  }\n\n  var connectionLineType = props.connectionLineType,\n      defaultMarkerColor = props.defaultMarkerColor,\n      connectionLineStyle = props.connectionLineStyle,\n      connectionLineComponent = props.connectionLineComponent,\n      connectionLineContainerStyle = props.connectionLineContainerStyle;\n  var renderConnectionLine = connectionNodeId && connectionHandleType;\n  return jsxs(Fragment, {\n    children: [edgeTree.map(function (_ref66) {\n      var level = _ref66.level,\n          edges = _ref66.edges,\n          isMaxLevel = _ref66.isMaxLevel;\n      return jsxs(\"svg\", {\n        style: {\n          zIndex: level\n        },\n        width: width,\n        height: height,\n        className: \"react-flow__edges react-flow__container\",\n        children: [isMaxLevel && jsx(MarkerDefinitions$1, {\n          defaultColor: defaultMarkerColor,\n          rfId: props.rfId\n        }), jsx(\"g\", {\n          children: edges.map(function (edge) {\n            var _getNodeData = getNodeData(nodeInternals.get(edge.source)),\n                _getNodeData2 = _slicedToArray(_getNodeData, 3),\n                sourceNodeRect = _getNodeData2[0],\n                sourceHandleBounds = _getNodeData2[1],\n                sourceIsValid = _getNodeData2[2];\n\n            var _getNodeData3 = getNodeData(nodeInternals.get(edge.target)),\n                _getNodeData4 = _slicedToArray(_getNodeData3, 3),\n                targetNodeRect = _getNodeData4[0],\n                targetHandleBounds = _getNodeData4[1],\n                targetIsValid = _getNodeData4[2];\n\n            if (!sourceIsValid || !targetIsValid) {\n              return null;\n            }\n\n            var edgeType = edge.type || 'default';\n\n            if (!props.edgeTypes[edgeType]) {\n              devWarn(\"Edge type \\\"\".concat(edgeType, \"\\\" not found. Using fallback type \\\"default\\\". Help: https://reactflow.dev/error#300\"));\n              edgeType = 'default';\n            }\n\n            var EdgeComponent = props.edgeTypes[edgeType] || props.edgeTypes.default; // when connection type is loose we can define all handles as sources\n\n            var targetNodeHandles = connectionMode === ConnectionMode.Strict ? targetHandleBounds.target : targetHandleBounds.target || targetHandleBounds.source;\n            var sourceHandle = getHandle(sourceHandleBounds.source, edge.sourceHandle || null);\n            var targetHandle = getHandle(targetNodeHandles, edge.targetHandle || null);\n            var sourcePosition = (sourceHandle === null || sourceHandle === void 0 ? void 0 : sourceHandle.position) || Position.Bottom;\n            var targetPosition = (targetHandle === null || targetHandle === void 0 ? void 0 : targetHandle.position) || Position.Top;\n            var isFocusable = !!(edge.focusable || edgesFocusable && typeof edge.focusable === 'undefined');\n\n            if (!sourceHandle || !targetHandle) {\n              devWarn(\"Couldn't create edge for \".concat(!sourceHandle ? 'source' : 'target', \" handle id: \").concat(!sourceHandle ? edge.sourceHandle : edge.targetHandle, \"; edge id: \").concat(edge.id, \". Help: https://reactflow.dev/error#800\"));\n              return null;\n            }\n\n            var _getEdgePositions = getEdgePositions(sourceNodeRect, sourceHandle, sourcePosition, targetNodeRect, targetHandle, targetPosition),\n                sourceX = _getEdgePositions.sourceX,\n                sourceY = _getEdgePositions.sourceY,\n                targetX = _getEdgePositions.targetX,\n                targetY = _getEdgePositions.targetY;\n\n            return jsx(EdgeComponent, {\n              id: edge.id,\n              className: cc([edge.className, props.noPanClassName]),\n              type: edgeType,\n              data: edge.data,\n              selected: !!edge.selected,\n              animated: !!edge.animated,\n              hidden: !!edge.hidden,\n              label: edge.label,\n              labelStyle: edge.labelStyle,\n              labelShowBg: edge.labelShowBg,\n              labelBgStyle: edge.labelBgStyle,\n              labelBgPadding: edge.labelBgPadding,\n              labelBgBorderRadius: edge.labelBgBorderRadius,\n              style: edge.style,\n              source: edge.source,\n              target: edge.target,\n              sourceHandleId: edge.sourceHandle,\n              targetHandleId: edge.targetHandle,\n              markerEnd: edge.markerEnd,\n              markerStart: edge.markerStart,\n              sourceX: sourceX,\n              sourceY: sourceY,\n              targetX: targetX,\n              targetY: targetY,\n              sourcePosition: sourcePosition,\n              targetPosition: targetPosition,\n              elementsSelectable: elementsSelectable,\n              onEdgeUpdate: props.onEdgeUpdate,\n              onContextMenu: props.onEdgeContextMenu,\n              onMouseEnter: props.onEdgeMouseEnter,\n              onMouseMove: props.onEdgeMouseMove,\n              onMouseLeave: props.onEdgeMouseLeave,\n              onClick: props.onEdgeClick,\n              edgeUpdaterRadius: props.edgeUpdaterRadius,\n              onEdgeDoubleClick: props.onEdgeDoubleClick,\n              onEdgeUpdateStart: props.onEdgeUpdateStart,\n              onEdgeUpdateEnd: props.onEdgeUpdateEnd,\n              rfId: props.rfId,\n              ariaLabel: edge.ariaLabel,\n              isFocusable: isFocusable,\n              pathOptions: 'pathOptions' in edge ? edge.pathOptions : undefined,\n              interactionWidth: edge.interactionWidth\n            }, edge.id);\n          })\n        })]\n      }, level);\n    }), renderConnectionLine && jsx(\"svg\", {\n      style: connectionLineContainerStyle,\n      width: width,\n      height: height,\n      className: \"react-flow__edges react-flow__connectionline react-flow__container\",\n      children: jsx(ConnectionLine, {\n        connectionNodeId: connectionNodeId,\n        connectionHandleType: connectionHandleType,\n        connectionLineStyle: connectionLineStyle,\n        connectionLineType: connectionLineType,\n        isConnectable: nodesConnectable,\n        CustomConnectionLineComponent: connectionLineComponent\n      })\n    })]\n  });\n};\n\nEdgeRenderer.displayName = 'EdgeRenderer';\nvar EdgeRenderer$1 = memo(EdgeRenderer);\n\nvar selector$1 = function selector$1(s) {\n  return \"translate(\".concat(s.transform[0], \"px,\").concat(s.transform[1], \"px) scale(\").concat(s.transform[2], \")\");\n};\n\nfunction Viewport(_ref67) {\n  var children = _ref67.children;\n  var transform = useStore(selector$1);\n  return jsx(\"div\", {\n    className: \"react-flow__viewport react-flow__container\",\n    style: {\n      transform: transform\n    },\n    children: children\n  });\n}\n\nfunction useOnInitHandler(onInit) {\n  var rfInstance = useReactFlow();\n  var isInitialized = useRef(false);\n  useEffect(function () {\n    if (!isInitialized.current && rfInstance.viewportInitialized && onInit) {\n      setTimeout(function () {\n        return onInit(rfInstance);\n      }, 1);\n      isInitialized.current = true;\n    }\n  }, [onInit, rfInstance.viewportInitialized]);\n}\n\nvar GraphView = function GraphView(_ref68) {\n  var nodeTypes = _ref68.nodeTypes,\n      edgeTypes = _ref68.edgeTypes,\n      onMove = _ref68.onMove,\n      onMoveStart = _ref68.onMoveStart,\n      onMoveEnd = _ref68.onMoveEnd,\n      onInit = _ref68.onInit,\n      onNodeClick = _ref68.onNodeClick,\n      onEdgeClick = _ref68.onEdgeClick,\n      onNodeDoubleClick = _ref68.onNodeDoubleClick,\n      onEdgeDoubleClick = _ref68.onEdgeDoubleClick,\n      onNodeMouseEnter = _ref68.onNodeMouseEnter,\n      onNodeMouseMove = _ref68.onNodeMouseMove,\n      onNodeMouseLeave = _ref68.onNodeMouseLeave,\n      onNodeContextMenu = _ref68.onNodeContextMenu,\n      onSelectionContextMenu = _ref68.onSelectionContextMenu,\n      connectionLineType = _ref68.connectionLineType,\n      connectionLineStyle = _ref68.connectionLineStyle,\n      connectionLineComponent = _ref68.connectionLineComponent,\n      connectionLineContainerStyle = _ref68.connectionLineContainerStyle,\n      selectionKeyCode = _ref68.selectionKeyCode,\n      multiSelectionKeyCode = _ref68.multiSelectionKeyCode,\n      zoomActivationKeyCode = _ref68.zoomActivationKeyCode,\n      deleteKeyCode = _ref68.deleteKeyCode,\n      onlyRenderVisibleElements = _ref68.onlyRenderVisibleElements,\n      elementsSelectable = _ref68.elementsSelectable,\n      selectNodesOnDrag = _ref68.selectNodesOnDrag,\n      defaultViewport = _ref68.defaultViewport,\n      translateExtent = _ref68.translateExtent,\n      minZoom = _ref68.minZoom,\n      maxZoom = _ref68.maxZoom,\n      preventScrolling = _ref68.preventScrolling,\n      defaultMarkerColor = _ref68.defaultMarkerColor,\n      zoomOnScroll = _ref68.zoomOnScroll,\n      zoomOnPinch = _ref68.zoomOnPinch,\n      panOnScroll = _ref68.panOnScroll,\n      panOnScrollSpeed = _ref68.panOnScrollSpeed,\n      panOnScrollMode = _ref68.panOnScrollMode,\n      zoomOnDoubleClick = _ref68.zoomOnDoubleClick,\n      panOnDrag = _ref68.panOnDrag,\n      onPaneClick = _ref68.onPaneClick,\n      onPaneMouseEnter = _ref68.onPaneMouseEnter,\n      onPaneMouseMove = _ref68.onPaneMouseMove,\n      onPaneMouseLeave = _ref68.onPaneMouseLeave,\n      onPaneScroll = _ref68.onPaneScroll,\n      onPaneContextMenu = _ref68.onPaneContextMenu,\n      onEdgeUpdate = _ref68.onEdgeUpdate,\n      onEdgeContextMenu = _ref68.onEdgeContextMenu,\n      onEdgeMouseEnter = _ref68.onEdgeMouseEnter,\n      onEdgeMouseMove = _ref68.onEdgeMouseMove,\n      onEdgeMouseLeave = _ref68.onEdgeMouseLeave,\n      edgeUpdaterRadius = _ref68.edgeUpdaterRadius,\n      onEdgeUpdateStart = _ref68.onEdgeUpdateStart,\n      onEdgeUpdateEnd = _ref68.onEdgeUpdateEnd,\n      noDragClassName = _ref68.noDragClassName,\n      noWheelClassName = _ref68.noWheelClassName,\n      noPanClassName = _ref68.noPanClassName,\n      elevateEdgesOnSelect = _ref68.elevateEdgesOnSelect,\n      disableKeyboardA11y = _ref68.disableKeyboardA11y,\n      nodeOrigin = _ref68.nodeOrigin,\n      nodeExtent = _ref68.nodeExtent,\n      rfId = _ref68.rfId;\n  useOnInitHandler(onInit);\n  return jsx(FlowRenderer$1, {\n    onPaneClick: onPaneClick,\n    onPaneMouseEnter: onPaneMouseEnter,\n    onPaneMouseMove: onPaneMouseMove,\n    onPaneMouseLeave: onPaneMouseLeave,\n    onPaneContextMenu: onPaneContextMenu,\n    onPaneScroll: onPaneScroll,\n    deleteKeyCode: deleteKeyCode,\n    selectionKeyCode: selectionKeyCode,\n    multiSelectionKeyCode: multiSelectionKeyCode,\n    zoomActivationKeyCode: zoomActivationKeyCode,\n    elementsSelectable: elementsSelectable,\n    onMove: onMove,\n    onMoveStart: onMoveStart,\n    onMoveEnd: onMoveEnd,\n    zoomOnScroll: zoomOnScroll,\n    zoomOnPinch: zoomOnPinch,\n    zoomOnDoubleClick: zoomOnDoubleClick,\n    panOnScroll: panOnScroll,\n    panOnScrollSpeed: panOnScrollSpeed,\n    panOnScrollMode: panOnScrollMode,\n    panOnDrag: panOnDrag,\n    defaultViewport: defaultViewport,\n    translateExtent: translateExtent,\n    minZoom: minZoom,\n    maxZoom: maxZoom,\n    onSelectionContextMenu: onSelectionContextMenu,\n    preventScrolling: preventScrolling,\n    noDragClassName: noDragClassName,\n    noWheelClassName: noWheelClassName,\n    noPanClassName: noPanClassName,\n    disableKeyboardA11y: disableKeyboardA11y,\n    children: jsxs(Viewport, {\n      children: [jsx(EdgeRenderer$1, {\n        edgeTypes: edgeTypes,\n        onEdgeClick: onEdgeClick,\n        onEdgeDoubleClick: onEdgeDoubleClick,\n        connectionLineType: connectionLineType,\n        connectionLineStyle: connectionLineStyle,\n        connectionLineComponent: connectionLineComponent,\n        connectionLineContainerStyle: connectionLineContainerStyle,\n        onEdgeUpdate: onEdgeUpdate,\n        onlyRenderVisibleElements: onlyRenderVisibleElements,\n        onEdgeContextMenu: onEdgeContextMenu,\n        onEdgeMouseEnter: onEdgeMouseEnter,\n        onEdgeMouseMove: onEdgeMouseMove,\n        onEdgeMouseLeave: onEdgeMouseLeave,\n        onEdgeUpdateStart: onEdgeUpdateStart,\n        onEdgeUpdateEnd: onEdgeUpdateEnd,\n        edgeUpdaterRadius: edgeUpdaterRadius,\n        defaultMarkerColor: defaultMarkerColor,\n        noPanClassName: noPanClassName,\n        elevateEdgesOnSelect: !!elevateEdgesOnSelect,\n        disableKeyboardA11y: disableKeyboardA11y,\n        rfId: rfId\n      }), jsx(\"div\", {\n        className: \"react-flow__edgelabel-renderer\",\n        id: \"edgelabel-portal\"\n      }), jsx(NodeRenderer$1, {\n        nodeTypes: nodeTypes,\n        onNodeClick: onNodeClick,\n        onNodeDoubleClick: onNodeDoubleClick,\n        onNodeMouseEnter: onNodeMouseEnter,\n        onNodeMouseMove: onNodeMouseMove,\n        onNodeMouseLeave: onNodeMouseLeave,\n        onNodeContextMenu: onNodeContextMenu,\n        selectNodesOnDrag: selectNodesOnDrag,\n        onlyRenderVisibleElements: onlyRenderVisibleElements,\n        noPanClassName: noPanClassName,\n        noDragClassName: noDragClassName,\n        disableKeyboardA11y: disableKeyboardA11y,\n        nodeOrigin: nodeOrigin,\n        nodeExtent: nodeExtent,\n        rfId: rfId\n      })]\n    })\n  });\n};\n\nGraphView.displayName = 'GraphView';\nvar GraphView$1 = memo(GraphView);\nvar infiniteExtent = [[Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY], [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY]];\nvar initialState = {\n  rfId: '1',\n  width: 0,\n  height: 0,\n  transform: [0, 0, 1],\n  nodeInternals: new Map(),\n  edges: [],\n  onNodesChange: null,\n  onEdgesChange: null,\n  hasDefaultNodes: false,\n  hasDefaultEdges: false,\n  d3Zoom: null,\n  d3Selection: null,\n  d3ZoomHandler: undefined,\n  minZoom: 0.5,\n  maxZoom: 2,\n  translateExtent: infiniteExtent,\n  nodeExtent: infiniteExtent,\n  nodesSelectionActive: false,\n  userSelectionActive: false,\n  connectionNodeId: null,\n  connectionHandleId: null,\n  connectionHandleType: 'source',\n  connectionPosition: {\n    x: 0,\n    y: 0\n  },\n  connectionMode: ConnectionMode.Strict,\n  domNode: null,\n  paneDragging: false,\n  noPanClassName: 'nopan',\n  nodeOrigin: [0, 0],\n  snapGrid: [15, 15],\n  snapToGrid: false,\n  nodesDraggable: true,\n  nodesConnectable: true,\n  nodesFocusable: true,\n  edgesFocusable: true,\n  elementsSelectable: true,\n  fitViewOnInit: false,\n  fitViewOnInitDone: false,\n  fitViewOnInitOptions: undefined,\n  multiSelectionActive: false,\n  connectionStartHandle: null,\n  connectOnClick: true,\n  ariaLiveMessage: ''\n};\n\nvar createRFStore = function createRFStore() {\n  return createStore(function (set, get) {\n    return _objectSpread(_objectSpread({}, initialState), {}, {\n      setNodes: function setNodes(nodes) {\n        set({\n          nodeInternals: createNodeInternals(nodes, get().nodeInternals)\n        });\n      },\n      setEdges: function setEdges(edges) {\n        var _get3 = get(),\n            _get3$defaultEdgeOpti = _get3.defaultEdgeOptions,\n            defaultEdgeOptions = _get3$defaultEdgeOpti === void 0 ? {} : _get3$defaultEdgeOpti;\n\n        set({\n          edges: edges.map(function (e) {\n            return _objectSpread(_objectSpread({}, defaultEdgeOptions), e);\n          })\n        });\n      },\n      setDefaultNodesAndEdges: function setDefaultNodesAndEdges(nodes, edges) {\n        var hasDefaultNodes = typeof nodes !== 'undefined';\n        var hasDefaultEdges = typeof edges !== 'undefined';\n        var nodeInternals = hasDefaultNodes ? createNodeInternals(nodes, new Map()) : new Map();\n        var nextEdges = hasDefaultEdges ? edges : [];\n        set({\n          nodeInternals: nodeInternals,\n          edges: nextEdges,\n          hasDefaultNodes: hasDefaultNodes,\n          hasDefaultEdges: hasDefaultEdges\n        });\n      },\n      updateNodeDimensions: function updateNodeDimensions(updates) {\n        var _get4 = get(),\n            onNodesChange = _get4.onNodesChange,\n            nodeInternals = _get4.nodeInternals,\n            fitViewOnInit = _get4.fitViewOnInit,\n            fitViewOnInitDone = _get4.fitViewOnInitDone,\n            fitViewOnInitOptions = _get4.fitViewOnInitOptions,\n            domNode = _get4.domNode,\n            nodeOrigin = _get4.nodeOrigin;\n\n        var viewportNode = domNode === null || domNode === void 0 ? void 0 : domNode.querySelector('.react-flow__viewport');\n\n        if (!viewportNode) {\n          return;\n        }\n\n        var style = window.getComputedStyle(viewportNode);\n\n        var _window$DOMMatrixRead = new window.DOMMatrixReadOnly(style.transform),\n            zoom = _window$DOMMatrixRead.m22;\n\n        var changes = updates.reduce(function (res, update) {\n          var node = nodeInternals.get(update.id);\n\n          if (node) {\n            var dimensions = getDimensions(update.nodeElement);\n            var doUpdate = !!(dimensions.width && dimensions.height && (node.width !== dimensions.width || node.height !== dimensions.height || update.forceUpdate));\n\n            if (doUpdate) {\n              nodeInternals.set(node.id, _objectSpread(_objectSpread({}, node), {}, _defineProperty({}, internalsSymbol, _objectSpread(_objectSpread({}, node[internalsSymbol]), {}, {\n                handleBounds: {\n                  source: getHandleBounds('.source', update.nodeElement, zoom, nodeOrigin),\n                  target: getHandleBounds('.target', update.nodeElement, zoom, nodeOrigin)\n                }\n              })), dimensions));\n              res.push({\n                id: node.id,\n                type: 'dimensions',\n                dimensions: dimensions\n              });\n            }\n          }\n\n          return res;\n        }, []);\n\n        var nextFitViewOnInitDone = fitViewOnInitDone || fitViewOnInit && !fitViewOnInitDone && _fitView(get, _objectSpread({\n          initial: true\n        }, fitViewOnInitOptions));\n\n        set({\n          nodeInternals: new Map(nodeInternals),\n          fitViewOnInitDone: nextFitViewOnInitDone\n        });\n\n        if ((changes === null || changes === void 0 ? void 0 : changes.length) > 0) {\n          onNodesChange === null || onNodesChange === void 0 ? void 0 : onNodesChange(changes);\n        }\n      },\n      updateNodePositions: function updateNodePositions(nodeDragItems) {\n        var positionChanged = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n        var dragging = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n        var _get5 = get(),\n            onNodesChange = _get5.onNodesChange,\n            nodeInternals = _get5.nodeInternals,\n            hasDefaultNodes = _get5.hasDefaultNodes;\n\n        if (hasDefaultNodes || onNodesChange) {\n          var changes = nodeDragItems.map(function (node) {\n            var change = {\n              id: node.id,\n              type: 'position',\n              dragging: dragging\n            };\n\n            if (positionChanged) {\n              change.positionAbsolute = node.positionAbsolute;\n              change.position = node.position;\n            }\n\n            return change;\n          });\n\n          if (changes !== null && changes !== void 0 && changes.length) {\n            if (hasDefaultNodes) {\n              var nodes = applyNodeChanges(changes, Array.from(nodeInternals.values()));\n              var nextNodeInternals = createNodeInternals(nodes, nodeInternals);\n              set({\n                nodeInternals: nextNodeInternals\n              });\n            }\n\n            onNodesChange === null || onNodesChange === void 0 ? void 0 : onNodesChange(changes);\n          }\n        }\n      },\n      addSelectedNodes: function addSelectedNodes(selectedNodeIds) {\n        var _get6 = get(),\n            multiSelectionActive = _get6.multiSelectionActive,\n            nodeInternals = _get6.nodeInternals,\n            edges = _get6.edges;\n\n        var changedNodes;\n        var changedEdges = null;\n\n        if (multiSelectionActive) {\n          changedNodes = selectedNodeIds.map(function (nodeId) {\n            return createSelectionChange(nodeId, true);\n          });\n        } else {\n          changedNodes = getSelectionChanges(Array.from(nodeInternals.values()), selectedNodeIds);\n          changedEdges = getSelectionChanges(edges, []);\n        }\n\n        updateNodesAndEdgesSelections({\n          changedNodes: changedNodes,\n          changedEdges: changedEdges,\n          get: get,\n          set: set\n        });\n      },\n      addSelectedEdges: function addSelectedEdges(selectedEdgeIds) {\n        var _get7 = get(),\n            multiSelectionActive = _get7.multiSelectionActive,\n            edges = _get7.edges,\n            nodeInternals = _get7.nodeInternals;\n\n        var changedEdges;\n        var changedNodes = null;\n\n        if (multiSelectionActive) {\n          changedEdges = selectedEdgeIds.map(function (edgeId) {\n            return createSelectionChange(edgeId, true);\n          });\n        } else {\n          changedEdges = getSelectionChanges(edges, selectedEdgeIds);\n          changedNodes = getSelectionChanges(Array.from(nodeInternals.values()), []);\n        }\n\n        updateNodesAndEdgesSelections({\n          changedNodes: changedNodes,\n          changedEdges: changedEdges,\n          get: get,\n          set: set\n        });\n      },\n      unselectNodesAndEdges: function unselectNodesAndEdges() {\n        var _ref69 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            nodes = _ref69.nodes,\n            edges = _ref69.edges;\n\n        var _get8 = get(),\n            nodeInternals = _get8.nodeInternals,\n            storeEdges = _get8.edges;\n\n        var nodesToUnselect = nodes ? nodes : Array.from(nodeInternals.values());\n        var edgesToUnselect = edges ? edges : storeEdges;\n        var changedNodes = nodesToUnselect.map(function (n) {\n          n.selected = false;\n          return createSelectionChange(n.id, false);\n        });\n        var changedEdges = edgesToUnselect.map(function (edge) {\n          return createSelectionChange(edge.id, false);\n        });\n        updateNodesAndEdgesSelections({\n          changedNodes: changedNodes,\n          changedEdges: changedEdges,\n          get: get,\n          set: set\n        });\n      },\n      setMinZoom: function setMinZoom(minZoom) {\n        var _get9 = get(),\n            d3Zoom = _get9.d3Zoom,\n            maxZoom = _get9.maxZoom;\n\n        d3Zoom === null || d3Zoom === void 0 ? void 0 : d3Zoom.scaleExtent([minZoom, maxZoom]);\n        set({\n          minZoom: minZoom\n        });\n      },\n      setMaxZoom: function setMaxZoom(maxZoom) {\n        var _get10 = get(),\n            d3Zoom = _get10.d3Zoom,\n            minZoom = _get10.minZoom;\n\n        d3Zoom === null || d3Zoom === void 0 ? void 0 : d3Zoom.scaleExtent([minZoom, maxZoom]);\n        set({\n          maxZoom: maxZoom\n        });\n      },\n      setTranslateExtent: function setTranslateExtent(translateExtent) {\n        var _get11 = get(),\n            d3Zoom = _get11.d3Zoom;\n\n        d3Zoom === null || d3Zoom === void 0 ? void 0 : d3Zoom.translateExtent(translateExtent);\n        set({\n          translateExtent: translateExtent\n        });\n      },\n      resetSelectedElements: function resetSelectedElements() {\n        var _get12 = get(),\n            nodeInternals = _get12.nodeInternals,\n            edges = _get12.edges;\n\n        var nodes = Array.from(nodeInternals.values());\n        var nodesToUnselect = nodes.filter(function (e) {\n          return e.selected;\n        }).map(function (n) {\n          return createSelectionChange(n.id, false);\n        });\n        var edgesToUnselect = edges.filter(function (e) {\n          return e.selected;\n        }).map(function (e) {\n          return createSelectionChange(e.id, false);\n        });\n        updateNodesAndEdgesSelections({\n          changedNodes: nodesToUnselect,\n          changedEdges: edgesToUnselect,\n          get: get,\n          set: set\n        });\n      },\n      setNodeExtent: function setNodeExtent(nodeExtent) {\n        var _get13 = get(),\n            nodeInternals = _get13.nodeInternals;\n\n        nodeInternals.forEach(function (node) {\n          node.positionAbsolute = clampPosition(node.position, nodeExtent);\n        });\n        set({\n          nodeExtent: nodeExtent,\n          nodeInternals: new Map(nodeInternals)\n        });\n      },\n      cancelConnection: function cancelConnection() {\n        return set({\n          connectionNodeId: initialState.connectionNodeId,\n          connectionHandleId: initialState.connectionHandleId\n        });\n      },\n      reset: function reset() {\n        return set(_objectSpread({}, initialState));\n      }\n    });\n  });\n};\n\nvar ReactFlowProvider = function ReactFlowProvider(_ref70) {\n  var children = _ref70.children;\n  var storeRef = useRef(null);\n\n  if (!storeRef.current) {\n    storeRef.current = createRFStore();\n  }\n\n  return jsx(Provider$1, {\n    value: storeRef.current,\n    children: children\n  });\n};\n\nReactFlowProvider.displayName = 'ReactFlowProvider';\n\nvar Wrapper = function Wrapper(_ref71) {\n  var children = _ref71.children;\n  var isWrapped = true;\n\n  try {\n    useStoreApi();\n  } catch (e) {\n    isWrapped = false;\n  }\n\n  if (isWrapped) {\n    // we need to wrap it with a fragment because it's not allowed for children to be a ReactNode\n    // https://github.com/DefinitelyTyped/DefinitelyTyped/issues/18051\n    return jsx(Fragment, {\n      children: children\n    });\n  }\n\n  return jsx(ReactFlowProvider, {\n    children: children\n  });\n};\n\nWrapper.displayName = 'ReactFlowWrapper'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\nfunction useNodeOrEdgeTypes(nodeOrEdgeTypes, createTypes) {\n  var typesKeysRef = useRef(null);\n  var typesParsed = useMemo(function () {\n    if (process.env.NODE_ENV === 'development') {\n      var typeKeys = Object.keys(nodeOrEdgeTypes);\n\n      if (shallow(typesKeysRef.current, typeKeys)) {\n        devWarn(\"It looks like you have created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them. Help: https://reactflow.dev/error#200\");\n      }\n\n      typesKeysRef.current = typeKeys;\n    }\n\n    return createTypes(nodeOrEdgeTypes);\n  }, [nodeOrEdgeTypes]);\n  return typesParsed;\n}\n\nvar defaultNodeTypes = {\n  input: InputNode$1,\n  default: DefaultNode$1,\n  output: OutputNode$1,\n  group: GroupNode\n};\nvar defaultEdgeTypes = {\n  default: BezierEdge,\n  straight: StraightEdge,\n  step: StepEdge,\n  smoothstep: SmoothStepEdge,\n  simplebezier: SimpleBezierEdge\n};\nvar initNodeOrigin = [0, 0];\nvar initSnapGrid = [15, 15];\nvar initDefaultViewport = {\n  x: 0,\n  y: 0,\n  zoom: 1\n};\nvar wrapperStyle = {\n  width: '100%',\n  height: '100%',\n  overflow: 'hidden',\n  position: 'relative',\n  zIndex: 0\n};\nvar ReactFlow = forwardRef(function (_ref72, ref) {\n  var nodes = _ref72.nodes,\n      edges = _ref72.edges,\n      defaultNodes = _ref72.defaultNodes,\n      defaultEdges = _ref72.defaultEdges,\n      className = _ref72.className,\n      _ref72$nodeTypes = _ref72.nodeTypes,\n      nodeTypes = _ref72$nodeTypes === void 0 ? defaultNodeTypes : _ref72$nodeTypes,\n      _ref72$edgeTypes = _ref72.edgeTypes,\n      edgeTypes = _ref72$edgeTypes === void 0 ? defaultEdgeTypes : _ref72$edgeTypes,\n      onNodeClick = _ref72.onNodeClick,\n      onEdgeClick = _ref72.onEdgeClick,\n      onInit = _ref72.onInit,\n      onMove = _ref72.onMove,\n      onMoveStart = _ref72.onMoveStart,\n      onMoveEnd = _ref72.onMoveEnd,\n      onConnect = _ref72.onConnect,\n      onConnectStart = _ref72.onConnectStart,\n      onConnectEnd = _ref72.onConnectEnd,\n      onClickConnectStart = _ref72.onClickConnectStart,\n      onClickConnectEnd = _ref72.onClickConnectEnd,\n      onNodeMouseEnter = _ref72.onNodeMouseEnter,\n      onNodeMouseMove = _ref72.onNodeMouseMove,\n      onNodeMouseLeave = _ref72.onNodeMouseLeave,\n      onNodeContextMenu = _ref72.onNodeContextMenu,\n      onNodeDoubleClick = _ref72.onNodeDoubleClick,\n      onNodeDragStart = _ref72.onNodeDragStart,\n      onNodeDrag = _ref72.onNodeDrag,\n      onNodeDragStop = _ref72.onNodeDragStop,\n      onNodesDelete = _ref72.onNodesDelete,\n      onEdgesDelete = _ref72.onEdgesDelete,\n      onSelectionChange = _ref72.onSelectionChange,\n      onSelectionDragStart = _ref72.onSelectionDragStart,\n      onSelectionDrag = _ref72.onSelectionDrag,\n      onSelectionDragStop = _ref72.onSelectionDragStop,\n      onSelectionContextMenu = _ref72.onSelectionContextMenu,\n      _ref72$connectionMode = _ref72.connectionMode,\n      connectionMode = _ref72$connectionMode === void 0 ? ConnectionMode.Strict : _ref72$connectionMode,\n      _ref72$connectionLine = _ref72.connectionLineType,\n      connectionLineType = _ref72$connectionLine === void 0 ? ConnectionLineType.Bezier : _ref72$connectionLine,\n      connectionLineStyle = _ref72.connectionLineStyle,\n      connectionLineComponent = _ref72.connectionLineComponent,\n      connectionLineContainerStyle = _ref72.connectionLineContainerStyle,\n      _ref72$deleteKeyCode = _ref72.deleteKeyCode,\n      deleteKeyCode = _ref72$deleteKeyCode === void 0 ? 'Backspace' : _ref72$deleteKeyCode,\n      _ref72$selectionKeyCo = _ref72.selectionKeyCode,\n      selectionKeyCode = _ref72$selectionKeyCo === void 0 ? 'Shift' : _ref72$selectionKeyCo,\n      _ref72$multiSelection = _ref72.multiSelectionKeyCode,\n      multiSelectionKeyCode = _ref72$multiSelection === void 0 ? 'Meta' : _ref72$multiSelection,\n      _ref72$zoomActivation = _ref72.zoomActivationKeyCode,\n      zoomActivationKeyCode = _ref72$zoomActivation === void 0 ? 'Meta' : _ref72$zoomActivation,\n      _ref72$snapToGrid = _ref72.snapToGrid,\n      snapToGrid = _ref72$snapToGrid === void 0 ? false : _ref72$snapToGrid,\n      _ref72$snapGrid = _ref72.snapGrid,\n      snapGrid = _ref72$snapGrid === void 0 ? initSnapGrid : _ref72$snapGrid,\n      _ref72$onlyRenderVisi = _ref72.onlyRenderVisibleElements,\n      onlyRenderVisibleElements = _ref72$onlyRenderVisi === void 0 ? false : _ref72$onlyRenderVisi,\n      _ref72$selectNodesOnD = _ref72.selectNodesOnDrag,\n      selectNodesOnDrag = _ref72$selectNodesOnD === void 0 ? true : _ref72$selectNodesOnD,\n      nodesDraggable = _ref72.nodesDraggable,\n      nodesConnectable = _ref72.nodesConnectable,\n      nodesFocusable = _ref72.nodesFocusable,\n      _ref72$nodeOrigin = _ref72.nodeOrigin,\n      nodeOrigin = _ref72$nodeOrigin === void 0 ? initNodeOrigin : _ref72$nodeOrigin,\n      edgesFocusable = _ref72.edgesFocusable,\n      elementsSelectable = _ref72.elementsSelectable,\n      _ref72$defaultViewpor = _ref72.defaultViewport,\n      defaultViewport = _ref72$defaultViewpor === void 0 ? initDefaultViewport : _ref72$defaultViewpor,\n      _ref72$minZoom = _ref72.minZoom,\n      minZoom = _ref72$minZoom === void 0 ? 0.5 : _ref72$minZoom,\n      _ref72$maxZoom = _ref72.maxZoom,\n      maxZoom = _ref72$maxZoom === void 0 ? 2 : _ref72$maxZoom,\n      _ref72$translateExten = _ref72.translateExtent,\n      translateExtent = _ref72$translateExten === void 0 ? infiniteExtent : _ref72$translateExten,\n      _ref72$preventScrolli = _ref72.preventScrolling,\n      preventScrolling = _ref72$preventScrolli === void 0 ? true : _ref72$preventScrolli,\n      nodeExtent = _ref72.nodeExtent,\n      _ref72$defaultMarkerC = _ref72.defaultMarkerColor,\n      defaultMarkerColor = _ref72$defaultMarkerC === void 0 ? '#b1b1b7' : _ref72$defaultMarkerC,\n      _ref72$zoomOnScroll = _ref72.zoomOnScroll,\n      zoomOnScroll = _ref72$zoomOnScroll === void 0 ? true : _ref72$zoomOnScroll,\n      _ref72$zoomOnPinch = _ref72.zoomOnPinch,\n      zoomOnPinch = _ref72$zoomOnPinch === void 0 ? true : _ref72$zoomOnPinch,\n      _ref72$panOnScroll = _ref72.panOnScroll,\n      panOnScroll = _ref72$panOnScroll === void 0 ? false : _ref72$panOnScroll,\n      _ref72$panOnScrollSpe = _ref72.panOnScrollSpeed,\n      panOnScrollSpeed = _ref72$panOnScrollSpe === void 0 ? 0.5 : _ref72$panOnScrollSpe,\n      _ref72$panOnScrollMod = _ref72.panOnScrollMode,\n      panOnScrollMode = _ref72$panOnScrollMod === void 0 ? PanOnScrollMode.Free : _ref72$panOnScrollMod,\n      _ref72$zoomOnDoubleCl = _ref72.zoomOnDoubleClick,\n      zoomOnDoubleClick = _ref72$zoomOnDoubleCl === void 0 ? true : _ref72$zoomOnDoubleCl,\n      _ref72$panOnDrag = _ref72.panOnDrag,\n      panOnDrag = _ref72$panOnDrag === void 0 ? true : _ref72$panOnDrag,\n      onPaneClick = _ref72.onPaneClick,\n      onPaneMouseEnter = _ref72.onPaneMouseEnter,\n      onPaneMouseMove = _ref72.onPaneMouseMove,\n      onPaneMouseLeave = _ref72.onPaneMouseLeave,\n      onPaneScroll = _ref72.onPaneScroll,\n      onPaneContextMenu = _ref72.onPaneContextMenu,\n      children = _ref72.children,\n      onEdgeUpdate = _ref72.onEdgeUpdate,\n      onEdgeContextMenu = _ref72.onEdgeContextMenu,\n      onEdgeDoubleClick = _ref72.onEdgeDoubleClick,\n      onEdgeMouseEnter = _ref72.onEdgeMouseEnter,\n      onEdgeMouseMove = _ref72.onEdgeMouseMove,\n      onEdgeMouseLeave = _ref72.onEdgeMouseLeave,\n      onEdgeUpdateStart = _ref72.onEdgeUpdateStart,\n      onEdgeUpdateEnd = _ref72.onEdgeUpdateEnd,\n      _ref72$edgeUpdaterRad = _ref72.edgeUpdaterRadius,\n      edgeUpdaterRadius = _ref72$edgeUpdaterRad === void 0 ? 10 : _ref72$edgeUpdaterRad,\n      onNodesChange = _ref72.onNodesChange,\n      onEdgesChange = _ref72.onEdgesChange,\n      _ref72$noDragClassNam = _ref72.noDragClassName,\n      noDragClassName = _ref72$noDragClassNam === void 0 ? 'nodrag' : _ref72$noDragClassNam,\n      _ref72$noWheelClassNa = _ref72.noWheelClassName,\n      noWheelClassName = _ref72$noWheelClassNa === void 0 ? 'nowheel' : _ref72$noWheelClassNa,\n      _ref72$noPanClassName = _ref72.noPanClassName,\n      noPanClassName = _ref72$noPanClassName === void 0 ? 'nopan' : _ref72$noPanClassName,\n      _ref72$fitView = _ref72.fitView,\n      fitView = _ref72$fitView === void 0 ? false : _ref72$fitView,\n      fitViewOptions = _ref72.fitViewOptions,\n      _ref72$connectOnClick = _ref72.connectOnClick,\n      connectOnClick = _ref72$connectOnClick === void 0 ? true : _ref72$connectOnClick,\n      attributionPosition = _ref72.attributionPosition,\n      proOptions = _ref72.proOptions,\n      defaultEdgeOptions = _ref72.defaultEdgeOptions,\n      _ref72$elevateEdgesOn = _ref72.elevateEdgesOnSelect,\n      elevateEdgesOnSelect = _ref72$elevateEdgesOn === void 0 ? false : _ref72$elevateEdgesOn,\n      _ref72$disableKeyboar = _ref72.disableKeyboardA11y,\n      disableKeyboardA11y = _ref72$disableKeyboar === void 0 ? false : _ref72$disableKeyboar,\n      style = _ref72.style,\n      id = _ref72.id,\n      rest = _objectWithoutProperties(_ref72, _excluded4);\n\n  var nodeTypesWrapped = useNodeOrEdgeTypes(nodeTypes, createNodeTypes);\n  var edgeTypesWrapped = useNodeOrEdgeTypes(edgeTypes, createEdgeTypes);\n  var rfId = id || '1';\n  return jsx(\"div\", _objectSpread(_objectSpread({}, rest), {}, {\n    style: _objectSpread(_objectSpread({}, style), wrapperStyle),\n    ref: ref,\n    className: cc(['react-flow', className]),\n    \"data-testid\": \"rf__wrapper\",\n    id: id,\n    children: jsxs(Wrapper, {\n      children: [jsx(GraphView$1, {\n        onInit: onInit,\n        onMove: onMove,\n        onMoveStart: onMoveStart,\n        onMoveEnd: onMoveEnd,\n        onNodeClick: onNodeClick,\n        onEdgeClick: onEdgeClick,\n        onNodeMouseEnter: onNodeMouseEnter,\n        onNodeMouseMove: onNodeMouseMove,\n        onNodeMouseLeave: onNodeMouseLeave,\n        onNodeContextMenu: onNodeContextMenu,\n        onNodeDoubleClick: onNodeDoubleClick,\n        nodeTypes: nodeTypesWrapped,\n        edgeTypes: edgeTypesWrapped,\n        connectionLineType: connectionLineType,\n        connectionLineStyle: connectionLineStyle,\n        connectionLineComponent: connectionLineComponent,\n        connectionLineContainerStyle: connectionLineContainerStyle,\n        selectionKeyCode: selectionKeyCode,\n        deleteKeyCode: deleteKeyCode,\n        multiSelectionKeyCode: multiSelectionKeyCode,\n        zoomActivationKeyCode: zoomActivationKeyCode,\n        onlyRenderVisibleElements: onlyRenderVisibleElements,\n        selectNodesOnDrag: selectNodesOnDrag,\n        defaultViewport: defaultViewport,\n        translateExtent: translateExtent,\n        minZoom: minZoom,\n        maxZoom: maxZoom,\n        preventScrolling: preventScrolling,\n        zoomOnScroll: zoomOnScroll,\n        zoomOnPinch: zoomOnPinch,\n        zoomOnDoubleClick: zoomOnDoubleClick,\n        panOnScroll: panOnScroll,\n        panOnScrollSpeed: panOnScrollSpeed,\n        panOnScrollMode: panOnScrollMode,\n        panOnDrag: panOnDrag,\n        onPaneClick: onPaneClick,\n        onPaneMouseEnter: onPaneMouseEnter,\n        onPaneMouseMove: onPaneMouseMove,\n        onPaneMouseLeave: onPaneMouseLeave,\n        onPaneScroll: onPaneScroll,\n        onPaneContextMenu: onPaneContextMenu,\n        onSelectionContextMenu: onSelectionContextMenu,\n        onEdgeUpdate: onEdgeUpdate,\n        onEdgeContextMenu: onEdgeContextMenu,\n        onEdgeDoubleClick: onEdgeDoubleClick,\n        onEdgeMouseEnter: onEdgeMouseEnter,\n        onEdgeMouseMove: onEdgeMouseMove,\n        onEdgeMouseLeave: onEdgeMouseLeave,\n        onEdgeUpdateStart: onEdgeUpdateStart,\n        onEdgeUpdateEnd: onEdgeUpdateEnd,\n        edgeUpdaterRadius: edgeUpdaterRadius,\n        defaultMarkerColor: defaultMarkerColor,\n        noDragClassName: noDragClassName,\n        noWheelClassName: noWheelClassName,\n        noPanClassName: noPanClassName,\n        elevateEdgesOnSelect: elevateEdgesOnSelect,\n        rfId: rfId,\n        disableKeyboardA11y: disableKeyboardA11y,\n        nodeOrigin: nodeOrigin,\n        nodeExtent: nodeExtent\n      }), jsx(StoreUpdater, {\n        nodes: nodes,\n        edges: edges,\n        defaultNodes: defaultNodes,\n        defaultEdges: defaultEdges,\n        onConnect: onConnect,\n        onConnectStart: onConnectStart,\n        onConnectEnd: onConnectEnd,\n        onClickConnectStart: onClickConnectStart,\n        onClickConnectEnd: onClickConnectEnd,\n        nodesDraggable: nodesDraggable,\n        nodesConnectable: nodesConnectable,\n        nodesFocusable: nodesFocusable,\n        edgesFocusable: edgesFocusable,\n        elementsSelectable: elementsSelectable,\n        minZoom: minZoom,\n        maxZoom: maxZoom,\n        nodeExtent: nodeExtent,\n        onNodesChange: onNodesChange,\n        onEdgesChange: onEdgesChange,\n        snapToGrid: snapToGrid,\n        snapGrid: snapGrid,\n        connectionMode: connectionMode,\n        translateExtent: translateExtent,\n        connectOnClick: connectOnClick,\n        defaultEdgeOptions: defaultEdgeOptions,\n        fitView: fitView,\n        fitViewOptions: fitViewOptions,\n        onNodesDelete: onNodesDelete,\n        onEdgesDelete: onEdgesDelete,\n        onNodeDragStart: onNodeDragStart,\n        onNodeDrag: onNodeDrag,\n        onNodeDragStop: onNodeDragStop,\n        onSelectionDrag: onSelectionDrag,\n        onSelectionDragStart: onSelectionDragStart,\n        onSelectionDragStop: onSelectionDragStop,\n        noPanClassName: noPanClassName,\n        nodeOrigin: nodeOrigin,\n        rfId: rfId\n      }), jsx(Wrapper$1, {\n        onSelectionChange: onSelectionChange\n      }), children, jsx(Attribution, {\n        proOptions: proOptions,\n        position: attributionPosition\n      }), jsx(A11yDescriptions, {\n        rfId: rfId,\n        disableKeyboardA11y: disableKeyboardA11y\n      })]\n    })\n  }));\n});\nReactFlow.displayName = 'ReactFlow';\n\nfunction EdgeLabelRenderer(_ref73) {\n  var children = _ref73.children;\n  var wrapperRef = useRef(document.getElementById('edgelabel-portal'));\n\n  if (!wrapperRef.current) {\n    return null;\n  }\n\n  return createPortal(children, wrapperRef.current);\n}\n\nfunction useUpdateNodeInternals() {\n  var store = useStoreApi();\n  return useCallback(function (id) {\n    var _store$getState32 = store.getState(),\n        domNode = _store$getState32.domNode,\n        updateNodeDimensions = _store$getState32.updateNodeDimensions;\n\n    var nodeElement = domNode === null || domNode === void 0 ? void 0 : domNode.querySelector(\".react-flow__node[data-id=\\\"\".concat(id, \"\\\"]\"));\n\n    if (nodeElement) {\n      requestAnimationFrame(function () {\n        return updateNodeDimensions([{\n          id: id,\n          nodeElement: nodeElement,\n          forceUpdate: true\n        }]);\n      });\n    }\n  }, []);\n}\n\nvar nodesSelector = function nodesSelector(state) {\n  return Array.from(state.nodeInternals.values());\n};\n\nfunction useNodes() {\n  var nodes = useStore(nodesSelector);\n  return nodes;\n}\n\nvar edgesSelector = function edgesSelector(state) {\n  return state.edges;\n};\n\nfunction useEdges() {\n  var edges = useStore(edgesSelector);\n  return edges;\n}\n\nvar viewportSelector = function viewportSelector(state) {\n  return {\n    x: state.transform[0],\n    y: state.transform[1],\n    zoom: state.transform[2]\n  };\n};\n\nfunction useViewport() {\n  var viewport = useStore(viewportSelector, shallow);\n  return viewport;\n}\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nfunction createUseItemsState(applyChanges) {\n  return function (initialItems) {\n    var _useState13 = useState(initialItems),\n        _useState14 = _slicedToArray(_useState13, 2),\n        items = _useState14[0],\n        setItems = _useState14[1];\n\n    var onItemsChange = useCallback(function (changes) {\n      return setItems(function (items) {\n        return applyChanges(changes, items);\n      });\n    }, []);\n    return [items, setItems, onItemsChange];\n  };\n}\n\nvar useNodesState = createUseItemsState(applyNodeChanges);\nvar useEdgesState = createUseItemsState(applyEdgeChanges);\n\nfunction useOnViewportChange(_ref74) {\n  var onStart = _ref74.onStart,\n      onChange = _ref74.onChange,\n      onEnd = _ref74.onEnd;\n  var store = useStoreApi();\n  useEffect(function () {\n    store.setState({\n      onViewportChangeStart: onStart\n    });\n  }, [onStart]);\n  useEffect(function () {\n    store.setState({\n      onViewportChange: onChange\n    });\n  }, [onChange]);\n  useEffect(function () {\n    store.setState({\n      onViewportChangeEnd: onEnd\n    });\n  }, [onEnd]);\n}\n\nfunction useOnSelectionChange(_ref75) {\n  var onChange = _ref75.onChange;\n  var store = useStoreApi();\n  useEffect(function () {\n    store.setState({\n      onSelectionChange: onChange\n    });\n  }, [onChange]);\n}\n\nvar selector = function selector(s) {\n  if (s.nodeInternals.size === 0) {\n    return false;\n  }\n\n  return Array.from(s.nodeInternals.values()).every(function (n) {\n    var _n$internalsSymbol;\n\n    return ((_n$internalsSymbol = n[internalsSymbol]) === null || _n$internalsSymbol === void 0 ? void 0 : _n$internalsSymbol.handleBounds) !== undefined;\n  });\n};\n\nfunction useNodesInitialized() {\n  var initialized = useStore(selector);\n  return initialized;\n}\n\nexport { BaseEdge, BezierEdge, ConnectionLineType, ConnectionMode, EdgeLabelRenderer, EdgeText$1 as EdgeText, Handle$1 as Handle, MarkerType, PanOnScrollMode, Panel, Position, ReactFlow, ReactFlowProvider, SimpleBezierEdge, SmoothStepEdge, StepEdge, StraightEdge, addEdge, applyEdgeChanges, applyNodeChanges, boxToRect, getBezierPath, getBoundsOfRects, getConnectedEdges, getIncomers, getMarkerEnd, getOutgoers, getRectOfNodes, getSimpleBezierPath, getSmoothStepPath, getStraightPath, getTransformForBounds, internalsSymbol, isEdge, isNode, rectToBox, updateEdge, useEdges, useEdgesState, useKeyPress, useNodes, useNodesInitialized, useNodesState, useOnSelectionChange, useOnViewportChange, useReactFlow, useStore, useStoreApi, useUpdateNodeInternals, useViewport };"],"names":["_handleDirections","_oppositePosition","_MarkerSymbols","_excluded","_excluded2","_excluded3","_excluded4","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","StoreContext","createContext","Provider$1","Provider","errorMessage","useStore","selector","equalityFn","store","useContext","Error","useStoreApi","useMemo","getState","setState","subscribe","destroy","selector$e","s","userSelectionActive","Panel","_ref","position","children","className","style","rest","pointerEvents","positionClasses","concat","split","jsx","Attribution","_ref2","proOptions","_ref2$position","hideAttribution","href","rel","EdgeText$1","memo","_ref3","x","y","label","_ref3$labelStyle","labelStyle","_ref3$labelShowBg","labelShowBg","_ref3$labelBgStyle","labelBgStyle","_ref3$labelBgPadding","labelBgPadding","_ref3$labelBgBorderRa","labelBgBorderRadius","edgeRef","useRef","_useState","useState","width","height","_useState2","edgeTextBbox","setEdgeTextBbox","edgeTextClasses","useEffect","current","textBbox","getBBox","jsxs","transform","visibility","rx","ry","dy","ref","BaseEdge","_ref4","path","labelX","labelY","markerEnd","markerStart","_ref4$interactionWidt","interactionWidth","Fragment","d","fill","strokeOpacity","strokeWidth","displayName","ConnectionMode","PanOnScrollMode","getMouseHandler$1","id","handler","undefined","event","edge","edges","find","e","getEdgeCenter","_ref5","sourceX","sourceY","targetX","targetY","xOffset","Math","abs","centerX","yOffset","getBezierEdgeCenter","_ref6","sourceControlX","sourceControlY","targetControlX","centerY","targetControlY","ConnectionLineType","MarkerType","Position","getDimensions","node","offsetWidth","offsetHeight","clamp","val","min","max","clampPosition","extent","getHostForElement","element","_element$getRootNode","_window","getRootNode","call","window","document","getBoundsOfBoxes","box1","box2","x2","y2","rectToBox","_ref7","boxToRect","_ref8","nodeToRect","positionAbsolute","getBoundsOfRects","rect1","rect2","getOverlappingArea","rectA","rectB","xOverlap","yOverlap","ceil","isNumeric","n","isNaN","isFinite","internalsSymbol","Symbol","for","elementSelectionKeys","devWarn","message","getControl","_ref9","pos","x1","y1","Left","Right","getSimpleBezierPath","_ref10","_ref10$sourcePosition","sourcePosition","Bottom","_ref10$targetPosition","targetPosition","Top","_getControl","_getControl2","_getControl3","_getControl4","_getBezierEdgeCenter","_getBezierEdgeCenter2","offsetX","offsetY","SimpleBezierEdge","_ref11","_ref11$sourcePosition","_ref11$targetPosition","_getSimpleBezierPath","_getSimpleBezierPath2","handleDirections","distance","a","b","sqrt","pow","getPoints","_ref13","_ref13$sourcePosition","_ref13$targetPosition","center","offset","sourceDir","targetDir","sourceGapped","targetGapped","dir","_ref12","_ref12$sourcePosition","getDirection","dirAccessor","currDir","points","_getEdgeCenter","_getEdgeCenter2","defaultCenterX","defaultCenterY","defaultOffsetX","defaultOffsetY","verticalSplit","horizontalSplit","sourceTarget","targetSource","dirAccessorOpposite","isSameDir","sourceGtTargetOppo","sourceLtTargetOppo","getSmoothStepPath","_ref14","_ref14$sourcePosition","_ref14$targetPosition","_ref14$borderRadius","borderRadius","_ref14$offset","_getPoints","_getPoints2","reduce","res","p","c","size","bendSize","_xDir","_yDir","xDir","yDir","getBend","SmoothStepEdge","_ref15","_ref15$sourcePosition","_ref15$targetPosition","pathOptions","_getSmoothStepPath","_getSmoothStepPath2","StepEdge","props","_props$pathOptions2","_props$pathOptions","StraightEdge","_ref17","_getStraightPath","_ref16","_getEdgeCenter3","_getEdgeCenter4","getStraightPath","_getStraightPath2","calculateControlOffset","curvature","getControlWithCurvature","_ref18","getBezierPath","_ref19","_ref19$sourcePosition","_ref19$targetPosition","_ref19$curvature","_getControlWithCurvat","_getControlWithCurvat2","_getControlWithCurvat3","_getControlWithCurvat4","_getBezierEdgeCenter3","_getBezierEdgeCenter4","BezierEdge","_ref20","_ref20$sourcePosition","_ref20$targetPosition","_getBezierPath","_getBezierPath2","NodeIdContext","checkElementBelowIsValid","connectionMode","isTarget","nodeId","handleId","isValidConnection","doc","elementBelow","elementFromPoint","clientX","clientY","elementBelowIsTarget","classList","contains","elementBelowIsSource","result","isValid","connection","sourceHandle","targetHandle","isHoveringHandle","elementBelowNodeId","getAttribute","elementBelowHandleId","Strict","resetRecentHandle","hoveredHandle","remove","handleMouseDown","_ref21","onConnect","elementEdgeUpdaterType","onEdgeUpdateEnd","reactFlowNode","closest","recentHoveredHandle","_getState","onConnectStart","handleType","containerBounds","getBoundingClientRect","connectionPosition","left","top","connectionNodeId","connectionHandleId","connectionHandleType","addEventListener","onMouseMove","onMouseUp","_getState$onConnectEn","_getState2","_checkElementBelowIsV2","onConnectEnd","removeEventListener","_checkElementBelowIsV","add","toggle","Consumer","getEdgeId","_ref22","getMarkerId","marker","rfId","idPrefix","sort","map","join","addEdge","edgeParams","some","el","connectionExists","getRectOfNodes","nodes","box","currBox","_ref28","Infinity","getNodesInside","nodeInternals","rect","_ref29","_ref30","tx","ty","tScale","partially","excludeNonSelectableNodes","paneRect","visibleNodes","_node$positionAbsolut","_node$selectable","selectable","nodeRect","overlappingArea","dragging","getConnectedEdges","nodeIds","includes","getTransformForBounds","bounds","minZoom","maxZoom","padding","xZoom","yZoom","zoom","clampedZoom","boundsCenterX","boundsCenterY","getD3Transition","selection","duration","transition","alwaysValid","selector$d","connectionStartHandle","connectOnClick","noPanClassName","Handle","forwardRef","_ref31","_ref31$type","type","_ref31$position","_ref31$isValidConnect","_ref31$isConnectable","isConnectable","onMouseDown","_useStore","onConnectExtended","params","_store$getState","defaultEdgeOptions","onConnectAction","hasDefaultEdges","connectable","connecting","button","onClick","_store$getState3","onClickConnectStart","onClickConnectEnd","_checkElementBelowIsV3","Handle$1","DefaultNode","_ref32","data","_ref32$targetPosition","_ref32$sourcePosition","DefaultNode$1","InputNode","_ref33","_ref33$sourcePosition","InputNode$1","OutputNode","_ref34","_ref34$targetPosition","OutputNode$1","GroupNode","selector$c","selectedNodes","Array","from","values","selected","selectedEdges","selectId","obj","areEqual","SelectionListener","_ref35","onSelectionChange","_useStore2","_store$getState$onSel","_store$getState4","changeSelector","Wrapper$1","_ref36","storeHasSelectionChange","selector$b","setNodes","setEdges","setDefaultNodesAndEdges","setMinZoom","setMaxZoom","setTranslateExtent","setNodeExtent","reset","useStoreUpdater","value","setStoreState","useDirectStoreUpdater","StoreUpdater","_ref37","defaultNodes","defaultEdges","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","snapGrid","snapToGrid","translateExtent","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","nodeOrigin","_useStore3","edgesWithDefaults","display","ariaLiveStyle","margin","border","overflow","clip","clipPath","ARIA_NODE_DESC_KEY","ARIA_EDGE_DESC_KEY","selector$a","ariaLiveMessage","AriaLiveMessage","_ref38","A11yDescriptions","_ref39","disableKeyboardA11y","shiftX","shift","shiftY","EdgeUpdaterClassName","EdgeAnchor","_ref40","_ref40$radius","radius","onMouseEnter","onMouseOut","cx","cy","r","stroke","wrapEdge","EdgeComponent","EdgeWrapper","_ref41","onEdgeDoubleClick","animated","hidden","sourceHandleId","targetHandleId","onContextMenu","onMouseLeave","edgeUpdaterRadius","onEdgeUpdate","onEdgeUpdateStart","ariaLabel","isFocusable","_useState3","_useState4","updateHover","setUpdateHover","_useState5","_useState6","updating","setUpdating","markerStartUrl","markerEndUrl","onEdgeDoubleClickHandler","onEdgeContextMenu","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","handleEdgeUpdater","isSourceHandle","evt","onEdgeUpdaterMouseEnter","onEdgeUpdaterMouseOut","inactive","handleEdgeUpdate","_store$getState5","addSelectedEdges","nodesSelectionActive","onDoubleClick","onKeyDown","_edgeRef$current","_store$getState6","unselectNodesAndEdges","blur","tabIndex","role","createEdgeTypes","edgeTypes","standardTypes","default","straight","bezier","step","smoothstep","simplebezier","specialTypes","k","getHandlePosition","handle","getHandle","getNodeData","_node$internalsSymbol","_node$positionAbsolut2","_node$positionAbsolut3","_node$positionAbsolut4","_node$positionAbsolut5","handleBounds","isInvalid","isParentSelected","parentNode","get","hasSelector","nodeRef","_current","matches","parentElement","getDragItems","mousePos","_n$positionAbsolute$x","_n$positionAbsolute","_n$positionAbsolute$y","_n$positionAbsolute2","delta","calcNextPosition","nextPosition","currentExtent","parent","_parent$positionAbsol","_parent$positionAbsol2","_parent$positionAbsol3","_parent$positionAbsol4","_parent","parentX","parentY","parentPosition","_parentNode$positionA","_parentNode$positionA2","_parentNode$positionA3","_parentNode$positionA4","getEventHandlerParams","_ref43","dragItems","extentedDragItems","getHandleBounds","nodeElement","handles","querySelectorAll","handlesArray","nodeBounds","nodeOffset","getMouseHandler","handleNodeClick","_ref44","_ref44$unselect","unselect","_store$getState7","addSelectedNodes","multiSelectionActive","wrapSelectionDragFunc","selectionFunc","_","useDrag","_ref45","_ref45$disabled","disabled","noDragClassName","handleSelector","isSelectable","selectNodesOnDrag","_useState7","_useState8","setDragging","lastPos","getPointerPosition","useCallback","_ref46","sourceEvent","_store$getState8","touches","pointerPos","xSnapped","round","ySnapped","dragHandler","on","_nodeInternals$get","_store$getState9","onStart","_getEventHandlerParam","_getEventHandlerParam2","currentNode","_store$getState10","updateNodePositions","updatedPos","onDrag","_getEventHandlerParam3","_getEventHandlerParam4","_store$getState11","onStop","_getEventHandlerParam5","_getEventHandlerParam6","useUpdateNodePositions","positionDiff","_store$getState12","arrowKeyDiffs","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","wrapNode","NodeComponent","NodeWrapper","_ref47","xPos","yPos","xPosOrigin","yPosOrigin","isDraggable","resizeObserver","dragHandle","zIndex","isParent","initialized","prevSourcePosition","prevTargetPosition","prevType","hasPointerEvents","updatePositions","onMouseEnterHandler","onMouseMoveHandler","onMouseLeaveHandler","onContextMenuHandler","onDoubleClickHandler","currNode","observe","unobserve","typeChanged","sourcePosChanged","targetPosChanged","updateNodeDimensions","forceUpdate","_store$getState13","_nodeRef$current","prototype","hasOwnProperty","replace","toLowerCase","xVelo","yVelo","factor","shiftKey","createNodeTypes","nodeTypes","input","output","group","useKeyPress","keyCode","options","_useState9","_useState10","keyPressed","setKeyPressed","pressedKeys","Set","_useMemo","isArray","kc","keysFlat","item","_useMemo2","keyCodes","keysToWatch","_options$target","_options$target2","downHandler","isInputDOMNode","keyOrCode","useKeyOrCode","code","isMatchingKey","preventDefault","upHandler","clear","delete","resetHandler","_options$target3","_options$target4","isUp","every","has","eventCode","_event$composedPath","composedPath","nodeName","hasAttribute","calculateXYZPosition","parentNodes","_result$x","_parentNode$position$","_parentNode$position","_result$y","_parentNode$position$2","_parentNode$position2","_parentNode$internals","_parentNode$internals2","_result$z","_parentNode$internals3","_parentNode$internals4","_result$z2","z","createNodeInternals","nextNodeInternals","Map","_currInternals$intern","currInternals","internals","set","_node$internalsSymbol2","_node$internalsSymbol3","_calculateXYZPosition","_fitView","_get","d3Zoom","d3Selection","fitViewOnInitDone","fitViewOnInit","initial","includeHiddenNodes","nodesInitialized","_options$minZoom","_options$maxZoom","_options$padding","_getTransformForBound","_getTransformForBound2","_zoom","nextTransform","scale","handleControlledNodeSelectionChange","nodeChanges","change","_objectSpread2","handleControlledEdgeSelectionChange","edgeChanges","updateNodesAndEdgesSelections","_ref50","changedNodes","changedEdges","_get2","hasDefaultNodes","noop","initialViewportHelper","zoomIn","zoomOut","zoomTo","getZoom","setViewport","getViewport","setCenter","fitBounds","project","viewportInitialized","selector$9","useViewportHelper","_useStore4","scaleBy","zoomLevel","scaleTo","_transform$x","_transform$y","_transform$zoom","_store$getState$trans","_store$getState$trans2","_store$getState14","nextZoom","_options$padding2","_store$getState15","_getTransformForBound3","_getTransformForBound4","_store$getState16","_ref23","_ref24","_ref25","_ref26","_ref27","snapX","snapY","pointToRendererPoint","useReactFlow","viewportHelper","getNodes","getNode","getEdges","_store$getState19$edg","getEdge","_store$getState20$edg","payload","_store$getState21","nextNodes","_store$getState22","_store$getState22$edg","nextEdges","addNodes","_store$getState23","currentNodes","addEdges","_store$getState24","_store$getState24$edg","toObject","_store$getState25","_store$getState25$edg","_transform","viewport","deleteElements","_ref51","nodesDeleted","edgesDeleted","_store$getState26","edgeIds","nodesToRemove","parentHit","deletable","deletableEdges","initialHitEdges","connectedEdges","edgesToRemove","edgeIdsToRemove","getNodeRect","nodeOrRect","isRect","getIntersectingNodes","_getNodeRect","_getNodeRect2","currNodeRect","isNodeIntersecting","area","_getNodeRect3","_getNodeRect4","partiallyVisible","containerStyle","eventToFlowTransform","eventViewport","isWrappedWithClass","selector$8","d3ZoomHandler","ZoomPane","_ref53","onMove","onMoveStart","onMoveEnd","_ref53$zoomOnScroll","zoomOnScroll","_ref53$zoomOnPinch","zoomOnPinch","_ref53$panOnScroll","panOnScroll","_ref53$panOnScrollSpe","panOnScrollSpeed","_ref53$panOnScrollMod","panOnScrollMode","Free","_ref53$zoomOnDoubleCl","zoomOnDoubleClick","selectionKeyPressed","_ref53$panOnDrag","panOnDrag","defaultViewport","zoomActivationKeyCode","_ref53$preventScrolli","preventScrolling","noWheelClassName","timerId","isZoomingOrPanning","zoomPane","prevTransform","_useStore5","zoomActivationKeyPressed","rendererNode","updateDimensions","ResizeObserver","useResizeHandler","d3ZoomInstance","scaleExtent","clampedX","clampedY","updatedTransform","domNode","stopImmediatePropagation","currentZoom","property","ctrlKey","point","pinchDelta","deltaY","deltaMode","_zoom2","deltaNormalize","deltaX","Vertical","Horizontal","translateBy","this","onViewportChange","flowTransform","_event$sourceEvent","onViewportChangeStart","paneDragging","prevViewport","onViewportChangeEnd","clearTimeout","setTimeout","zoomScroll","pinchZoom","handleParentExpand","updateItem","extendWidth","extendHeight","_parent$style$width","_parent$style$height","xDiff","yDiff","applyChanges","changes","elements","initElements","currentChange","expandParent","_updateItem","dimensions","applyNodeChanges","createSelectionChange","getSelectionChanges","items","selectedIds","willBeSelected","getMousePosition","selector$7","initialRect","startX","startY","draw","UserSelection","_ref54","prevSelectedNodesCount","prevSelectedEdgesCount","_useState11","_useState12","userSelectionRect","setUserSelectionRect","_useStore6","resetUserSelection","_userSelectionRect$st","_userSelectionRect$st2","nextUserSelectRect","_store$getState31","selectedEdgeIds","selectedNodeIds","_changes","selector$6","transformString","bboxSelector","NodesSelection$1","_ref55","onSelectionContextMenu","_useStore7","_useStore8","_nodeRef$current2","focus","selector$5","Pane","_ref56","onWheel","selector$4","FlowRenderer","_ref57","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneContextMenu","onPaneScroll","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","_ref52","deleteKeyPressed","multiSelectionKeyPressed","_store$getState27","useGlobalKeyHandler","resetSelectedElements","FlowRenderer$1","selector$3","NodeRenderer","onlyRenderVisible","_useStore9","onlyRenderVisibleElements","resizeObserverRef","observer","entries","updates","entry","_resizeObserverRef$cu","disconnect","_clampedPosition$x","_clampedPosition$y","_node$width","_node$height","_node$internalsSymbol4","_node$internalsSymbol5","_node$internalsSymbol6","nodeType","_ref49","origin","draggable","focusable","clampedPosition","posX","posY","posOrigin","onNodeClick","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","NodeRenderer$1","defaultEdgeTree","level","isMaxLevel","useVisibleEdges","elevateEdgesOnSelect","maxLevel","levelLookup","tree","_nodeInternals$get2","_nodeInternals$get2$i","_nodeInternals$get3","_nodeInternals$get3$i","hasZIndex","edgeTree","_ref58","_ref59","groupEdgesByZLevel","sourceNode","targetNode","_ref42","sourcePos","targetPos","sourceWidth","sourceHeight","targetWidth","targetHeight","edgeBox","viewBox","isEdgeVisible","oppositePosition","ConnectionLine","_ref60","_fromNode$internalsSy","_fromNode$width","_fromNode$height","_fromNode$positionAbs","_fromNode$positionAbs2","connectionLineStyle","_ref60$connectionLine","connectionLineType","Bezier","CustomConnectionLineComponent","_useStore10","fromNode","toX","toY","fromHandleBounds","handleBound","fromHandle","fromHandleX","fromHandleY","fromX","fromY","fromPosition","toPosition","dAttr","pathParams","_getBezierPath3","Step","_getSmoothStepPath3","SmoothStep","_getSmoothStepPath5","SimpleBezier","_getSimpleBezierPath3","MarkerSymbols","Arrow","_ref61","_ref61$color","color","_ref61$strokeWidth","strokeLinecap","strokeLinejoin","ArrowClosed","_ref62","_ref62$color","_ref62$strokeWidth","Marker","_ref63","_ref63$width","_ref63$height","_ref63$markerUnits","markerUnits","_ref63$orient","orient","useMarkerSymbol","markerWidth","markerHeight","refX","refY","MarkerDefinitions","_ref65","defaultColor","markers","_ref64","ids","markerId","localeCompare","markerSelector","m","MarkerDefinitions$1","selector$2","EdgeRenderer","_useStore11","defaultMarkerColor","connectionLineComponent","connectionLineContainerStyle","renderConnectionLine","_ref66","_getNodeData","_getNodeData2","sourceNodeRect","sourceHandleBounds","sourceIsValid","_getNodeData3","_getNodeData4","targetNodeRect","targetHandleBounds","targetIsValid","edgeType","targetNodeHandles","_getEdgePositions","sourceHandlePos","targetHandlePos","getEdgePositions","onEdgeClick","EdgeRenderer$1","selector$1","Viewport","_ref67","GraphView","_ref68","onInit","rfInstance","isInitialized","useOnInitHandler","GraphView$1","infiniteExtent","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY","initialState","fitViewOnInitOptions","ReactFlowProvider","_ref70","storeRef","_get3$defaultEdgeOpti","_get4","viewportNode","querySelector","getComputedStyle","DOMMatrixReadOnly","m22","update","nextFitViewOnInitDone","nodeDragItems","positionChanged","_get5","_get6","_get7","edgeId","_ref69","_get8","storeEdges","edgesToUnselect","_get9","_get10","_get12","cancelConnection","Wrapper","_ref71","isWrapped","useNodeOrEdgeTypes","nodeOrEdgeTypes","createTypes","defaultNodeTypes","defaultEdgeTypes","initNodeOrigin","initSnapGrid","initDefaultViewport","wrapperStyle","ReactFlow","_ref72","_ref72$nodeTypes","_ref72$edgeTypes","_ref72$connectionMode","_ref72$connectionLine","_ref72$deleteKeyCode","_ref72$selectionKeyCo","_ref72$multiSelection","_ref72$zoomActivation","_ref72$snapToGrid","_ref72$snapGrid","_ref72$onlyRenderVisi","_ref72$selectNodesOnD","_ref72$nodeOrigin","_ref72$defaultViewpor","_ref72$minZoom","_ref72$maxZoom","_ref72$translateExten","_ref72$preventScrolli","_ref72$defaultMarkerC","_ref72$zoomOnScroll","_ref72$zoomOnPinch","_ref72$panOnScroll","_ref72$panOnScrollSpe","_ref72$panOnScrollMod","_ref72$zoomOnDoubleCl","_ref72$panOnDrag","_ref72$edgeUpdaterRad","_ref72$noDragClassNam","_ref72$noWheelClassNa","_ref72$noPanClassName","_ref72$fitView","_ref72$connectOnClick","attributionPosition","_ref72$elevateEdgesOn","_ref72$disableKeyboar","nodeTypesWrapped","edgeTypesWrapped","createUseItemsState","initialItems","_useState13","_useState14","setItems","onItemsChange","useNodesState","useEdgesState"],"sourceRoot":""}